<!DOCTYPE html><html lang="en" dir="ltr" data-has-toc data-has-sidebar data-theme="dark" class="astro-bguv2lll"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>k8s Debian12‰∫åËøõÂà∂ÂÆâË£Ö | AGou's Docsv5</title><link rel="canonical"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><meta name="generator" content="Astro v4.4.15"/><meta name="generator" content="Starlight v0.21.1"/><meta property="og:title" content="k8s Debian12‰∫åËøõÂà∂ÂÆâË£Ö"/><meta property="og:type" content="article"/><meta property="og:url"/><meta property="og:locale" content="en"/><meta property="og:description" content="This is a document about k8s Debian12‰∫åËøõÂà∂ÂÆâË£Ö."/><meta property="og:site_name" content="AGou's Docsv5"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="k8s Debian12‰∫åËøõÂà∂ÂÆâË£Ö"/><meta name="twitter:description" content="This is a document about k8s Debian12‰∫åËøõÂà∂ÂÆâË£Ö."/><meta name="description" content="This is a document about k8s Debian12‰∫åËøõÂà∂ÂÆâË£Ö."/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg> <svg aria-hidden="true" class="dark astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg> <svg aria-hidden="true" class="auto astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> </template><link rel="stylesheet" href="/_astro/index.BsC2KTtW.css" /><script type="module" src="/_astro/hoisted.bf4k8FkQ.js"></script>
<script type="module" src="/_astro/page.CZ0TFQCk.js"></script></head> <body class="astro-bguv2lll"> <a href="#_top" class="astro-7q3lir66">Skip to content</a>  <div class="page sl-flex astro-vrdttmbt"> <header class="header astro-vrdttmbt"><div class="header sl-flex astro-kmkmnagf"> <div class="title-wrapper sl-flex astro-kmkmnagf"> <a href="/" class="site-title sl-flex astro-m46x6ez3">  <img class="astro-m46x6ez3" alt="" src="/_astro/logo.BdruG-BK.png" width="200" height="200">  <span class="astro-m46x6ez3"> AGou&#39;s Docsv5 </span> </a>  </div> <div class="sl-flex astro-kmkmnagf"> <site-search data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}" class="astro-v37mnknz"> <button data-open-modal disabled class="astro-v37mnknz">  <svg aria-label="Search" class="astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg>  <span class="sl-hidden md:sl-block astro-v37mnknz" aria-hidden="true">Search</span> <svg aria-label="(Press / to Search)" class="sl-hidden md:sl-block astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 2H7a5 5 0 0 0-5 5v10a5 5 0 0 0 5 5h10a5 5 0 0 0 5-5V7a5 5 0 0 0-5-5Zm3 15a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v10Z"/><path d="M15.293 6.707a1 1 0 1 1 1.414 1.414l-8.485 8.486a1 1 0 0 1-1.414-1.415l8.485-8.485Z"/></svg>  </button> <dialog style="padding:0" aria-label="Search" class="astro-v37mnknz"> <div class="dialog-frame sl-flex astro-v37mnknz">  <button data-close-modal class="sl-flex md:sl-hidden astro-v37mnknz"> Cancel </button> <div class="search-container astro-v37mnknz"> <div id="starlight__search" class="astro-v37mnknz"></div> </div> </div> </dialog> </site-search>    </div> <div class="sl-hidden md:sl-flex right-group astro-kmkmnagf"> <div class="sl-flex social-icons astro-kmkmnagf"> <a href="https://github.com/AGou-ops" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected="true" class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div> </div> </header> <nav class="sidebar astro-vrdttmbt" aria-label="Main"> <starlight-menu-button class="astro-jif73yzw"> <button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-jif73yzw"> <svg aria-hidden="true" class="astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg>  </button> </starlight-menu-button>    <div id="starlight__sidebar" class="sidebar-pane astro-vrdttmbt"> <div class="sidebar-content sl-flex astro-vrdttmbt"> <ul class="top-level astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">üîó Links</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="https://agou-ops.cn" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‚≠êÔ∏è Go to myBlog</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">guide</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/guide/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">index</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">CloudNative</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">index</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">CICD</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/argocd-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ArgoCD Basic</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">GitLab</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/gitlab/gitlab-backup-move/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">GitLab Backup-Move</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/gitlab/gitlab-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">GitLab Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/gitlab/gitlab-reset-passwd/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">GitLab reset passwd</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/gogs-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Gogs Basic</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Jenkins</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/docker-jenkins-ÊâßË°åÂÆø‰∏ªÊú∫ÂëΩ‰ª§/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Jenkins ÊâßË°åÂÆø‰∏ªÊú∫ÂëΩ‰ª§</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/generic-webhook-trigger/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Generic Webhook Trigger</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-backup-restore/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins Backup Restore</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-issues/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins issues</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-plugins/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins Plugins</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-ÂÖ±‰∫´Â∫ì/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins ÂÖ±‰∫´Â∫ì</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-Âà†Èô§ÊûÑÂª∫ÂéÜÂè≤/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins Âà†Èô§ÊûÑÂª∫ÂéÜÂè≤</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-ÊµÅÊ∞¥Á∫øÂÆû‰æã/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins ÊµÅÊ∞¥Á∫øÂÆû‰æã</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-ÈïúÂÉèÂä†ÈÄü/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins ÈïúÂÉèÂä†ÈÄü</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkinsfile-sample/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkinsfile Sample</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkinsfile-Ëá™ÂÆö‰πâÂáΩÊï∞/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkinsfile Ëá™ÂÆö‰πâÂáΩÊï∞</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/pipeline-build-parameters/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Pipeline build parameters</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/ÈÇÆ‰ª∂ÈÄöÁü•Ê®°Êùø/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÈÇÆ‰ª∂ÈÄöÁü•Ê®°Êùø</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jira-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jira Basic</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Sonarqube</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/sonarqube/sonarqube-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Sonarqube Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/sonarqube/sonarqube-with-jenkins/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Sonarqube with Jenkins</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/ÂèëÂ∏ÉÊñπÂºè/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÂèëÂ∏ÉÊñπÂºè</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">CloudComptering</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Aliyun</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/cloudcomptering/aliyun/untitled/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Untitled</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cloudcomptering/amazon-eks-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Amazon EKS Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cloudcomptering/amazon-web-services/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Amazon Web Services</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cloudcomptering/microsoft-azure/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Microsoft Azure</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/consul-ÂÖ•Èó®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Consul ÂÖ•Èó®</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Docker</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-compose/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Compose</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-network/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Network</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-openvswitch/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker openvswitch</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-portainer/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Portainer</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-private-registry/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Private Registry</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-remote-access/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Remote Access</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-volume/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Volume</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-Âõ∫ÂÆöipÂèäË∑®‰∏ªÊú∫‰∫íÈÄö/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Âõ∫ÂÆöIPÂèäË∑®‰∏ªÊú∫‰∫íÈÄö</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-ÂÆπÂô®Èó¥ÈÄöËøá‰∏ªÊú∫Âêç‰∫íÁõ∏ËÆøÈóÆ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker ÂÆπÂô®Èó¥ÈÄöËøá‰∏ªÊú∫Âêç‰∫íÁõ∏ËÆøÈóÆ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-Ê∏ÖÁêÜ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Ê∏ÖÁêÜ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-Á§∫‰æãÂèäÂ§öÊû∂ÊûÑÊûÑÂª∫/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Á§∫‰æãÂèäÂ§öÊû∂ÊûÑÊûÑÂª∫</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/dockerfile/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DockerFile</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/ssh-docker-container/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SSH Docker container</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/dubbo-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Dubbo Basic</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">ELFK</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/elastic-stack-beats/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Elastic Stack Beats</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/elk-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ELK basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/elk-kafka-filebeat/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ELK-Kafka-Filebeat</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/elk-redisÁºìÂ≠ò‰ª•ÂèäÊó•ÂøóÂàÜÊµÅ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ELK-RedisÁºìÂ≠ò‰ª•ÂèäÊó•ÂøóÂàÜÊµÅ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/es-3rd-part-plugins/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ES 3rd part Plugins</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/es-docker‰∏âËäÇÁÇπÈÉ®ÁΩ≤/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ES Docker‰∏âËäÇÁÇπÈÉ®ÁΩ≤</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/es-ÈÖçÁΩÆÊñá‰ª∂ËØ¶Ëß£/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ES ÈÖçÁΩÆÊñá‰ª∂ËØ¶Ëß£</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/filebeat-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Filebeat basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/kafka-elfkÂàÜÂ∏ÉÂºèÊó•ÂøóÊî∂ÈõÜ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kafka-ELFKÂàÜÂ∏ÉÂºèÊó•ÂøóÊî∂ÈõÜ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/kafka-redis-elfkÂàÜÂ∏ÉÂºèÊó•ÂøóÊî∂ÈõÜ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kafka-Redis-ELFKÂàÜÂ∏ÉÂºèÊó•ÂøóÊî∂ÈõÜ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/logstash-basic-plugins/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Logstash Basic - Plugins</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/logstash-Êó•ÂøóÂàÜÊµÅ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Logstash Êó•ÂøóÂàÜÊµÅ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/syslog-elkÊó•ÂøóÊî∂ÈõÜ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">syslog-ELKÊó•ÂøóÊî∂ÈõÜ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/tcp-elkÊó•ÂøóÊî∂ÈõÜ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">TCP-ELKÊó•ÂøóÊî∂ÈõÜ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/‰ΩøÁî®-docker-compose-ÈÉ®ÁΩ≤-elk/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰ΩøÁî® docker-compose ÈÉ®ÁΩ≤ ELK</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/Êî∂ÈõÜjavatomcatÊó•Âøó/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Êî∂ÈõÜJava„ÄÅTomcatÊó•Âøó</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/ÈÉ®ÁΩ≤elk-kafka-filebeatÊó•ÂøóÊî∂ÈõÜÂàÜÊûêÁ≥ªÁªü/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÈÉ®ÁΩ≤ELK-Kafka-FilebeatÊó•ÂøóÊî∂ÈõÜÂàÜÊûêÁ≥ªÁªü</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/grafana-loki-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Grafana Loki Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/istio-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Istio Basic</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">k8s</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/cilium-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">cilium Basic</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Helm</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/helm/charts/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">charts</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/helm/helm-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Helm Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/helm/helmgotemplate/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">HelmÔºàGoÔºâtemplate</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Installation</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/installation/k8s-debian12‰∫åËøõÂà∂ÂÆâË£Ö/" aria-current="page" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8s Debian12‰∫åËøõÂà∂ÂÆâË£Ö</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/installation/kubeadm-Âø´ÈÄüÈÉ®ÁΩ≤ÊâãÂÜå/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kubeadm Âø´ÈÄüÈÉ®ÁΩ≤ÊâãÂÜå</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/installation/kubernetes-‰∫åËøõÂà∂ÂÆâË£Ö/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kubernetes ‰∫åËøõÂà∂ÂÆâË£Ö</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/installation/‰ΩøÁî®-kubeadm-ÈÉ®ÁΩ≤Âçïmaster/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰ΩøÁî® Kubeadm ÈÉ®ÁΩ≤ÔºàÂçïmasterÔºâ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/installation/‰ΩøÁî®-kubespray-ÈÉ®ÁΩ≤/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰ΩøÁî® Kubespray ÈÉ®ÁΩ≤</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/installation/‰ΩøÁî®ÂõΩÂÜÖÊ∫êÂèäÁõ∏ÂÖ≥Â∞èÂ∑•ÂÖ∑/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰ΩøÁî®ÂõΩÂÜÖÊ∫êÂèäÁõ∏ÂÖ≥Â∞èÂ∑•ÂÖ∑</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/installation/Â∏∏Áî®ÁªÑ‰ª∂ÂÆâË£Ö/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Â∏∏Áî®ÁªÑ‰ª∂ÂÆâË£Ö</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/k3d/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k3d</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/k8s-command/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8s command</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/k8s-ÂõæËß£Â§ßÂÖ®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8s ÂõæËß£Â§ßÂÖ®</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/k8s-ÁΩëÁªúÁõ∏ÂÖ≥/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8s ÁΩëÁªúÁõ∏ÂÖ≥</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/k8sÊ¶ÇÂøµÂèäÂéüÁêÜÁõ∏ÂÖ≥/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8sÊ¶ÇÂøµÂèäÂéüÁêÜÁõ∏ÂÖ≥</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/kompose-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">kompose Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/kubeadm-Âø´ÈÄüÈÉ®ÁΩ≤k8sÈõÜÁæ§/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kubeadm Âø´ÈÄüÈÉ®ÁΩ≤k8sÈõÜÁæ§</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/kubenetesËøúÁ®ãË∞ÉËØïÂ∑•ÂÖ∑/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">kubenetesËøúÁ®ãË∞ÉËØïÂ∑•ÂÖ∑</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/kubernetes-rest-api/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kubernetes REST API</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/kubernetes-with-jenkins-cicd/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kubernetes with Jenkins CICD</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/kubernetes-yaml-quicklystart/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kubernetes Yaml quicklystart</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/kustmoize-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">kustmoize Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/metalb-ÈÉ®ÁΩ≤‰∏éÁÆÄÂçïÊµãËØï/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MetaLB ÈÉ®ÁΩ≤‰∏éÁÆÄÂçïÊµãËØï</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/minikube-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Minikube Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/prometheus-grafanaÂÖ®Êñπ‰ΩçÁõëÊéßkubernetesÈõÜÁæ§/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Prometheus-GrafanaÂÖ®Êñπ‰ΩçÁõëÊéßKubernetesÈõÜÁæ§</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Quicklystart</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/‰∏Ä-kubernetesÊ¶ÇËø∞/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰∏Ä KubernetesÊ¶ÇËø∞</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/‰∏É-ÊéßÂà∂Âô®ÈÖçÁΩÆÊ∏ÖÂçï/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰∏É ÊéßÂà∂Âô®ÈÖçÁΩÆÊ∏ÖÂçï</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/‰∏â-ÈõÜÁæ§ÈÉ®ÁΩ≤/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰∏â ÈõÜÁæ§ÈÉ®ÁΩ≤</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/‰πù-ingress-ÊéßÂà∂Âô®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰πù ingress ÊéßÂà∂Âô®</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/‰∫å-Ê†∏ÂøÉÁªÑ‰ª∂ÂèäÈôÑ‰ª∂/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰∫å Ê†∏ÂøÉÁªÑ‰ª∂ÂèäÈôÑ‰ª∂</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/‰∫î-ÈÖçÁΩÆÊ∏ÖÂçï‰ΩøÁî®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰∫î ÈÖçÁΩÆÊ∏ÖÂçï‰ΩøÁî®</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ÂÖ´-service-ÈÖçÁΩÆÊ∏ÖÂçï/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÂÖ´ Service ÈÖçÁΩÆÊ∏ÖÂçï</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ÂÖ≠-pod-ÈÖçÁΩÆÊ∏ÖÂçï/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÂÖ≠ POD ÈÖçÁΩÆÊ∏ÖÂçï</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ÂçÅ-pod-Â≠òÂÇ®Âç∑/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÂçÅ POD Â≠òÂÇ®Âç∑</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ÂçÅ‰∏Ä-ÈÖçÁΩÆ‰ø°ÊÅØÂÆπÂô®Âåñ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÂçÅ‰∏Ä ÈÖçÁΩÆ‰ø°ÊÅØÂÆπÂô®Âåñ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ÂçÅ‰∏É-Ë∞ÉÂ∫¶Á≠ñÁï•/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÂçÅ‰∏É Ë∞ÉÂ∫¶Á≠ñÁï•</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ÂçÅ‰∏â-Áî®Êà∑ËÆ§ËØÅÁ≥ªÁªü/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÂçÅ‰∏â Áî®Êà∑ËÆ§ËØÅÁ≥ªÁªü</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ÂçÅ‰πù-ÂÆπÂô®ËµÑÊ∫êÈôêÂà∂/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÂçÅ‰πù ÂÆπÂô®ËµÑÊ∫êÈôêÂà∂</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ÂçÅ‰∫å-statefulset-ÊéßÂà∂Âô®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÂçÅ‰∫å StatefulSet ÊéßÂà∂Âô®</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ÂçÅ‰∫î-dashboard/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÂçÅ‰∫î dashboard</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ÂçÅÂÖ´-È´òÁ∫ßË∞ÉÂ∫¶ËÆæÁΩÆ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÂçÅÂÖ´ È´òÁ∫ßË∞ÉÂ∫¶ËÆæÁΩÆ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ÂçÅÂÖ≠-ÁΩëÁªúÈÄö‰ø°/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÂçÅÂÖ≠ ÁΩëÁªúÈÄö‰ø°</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ÂçÅÂõõ-Áî®Êà∑ÊùÉÈôêÁ≥ªÁªü/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÂçÅÂõõ Áî®Êà∑ÊùÉÈôêÁ≥ªÁªü</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/Âõõ-ÂÖ•Èó®ÂëΩ‰ª§/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Âõõ ÂÖ•Èó®ÂëΩ‰ª§</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/remote-access-k8s/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Remote access k8s</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/xfs-recovery/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">xfs recovery</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">ÂÆûÊàòÊ°à‰æã</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/ÂÆûÊàòÊ°à‰æã/cert-managerËá™Âä®È¢ÅÂèëËØÅ‰π¶/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">cert-managerËá™Âä®È¢ÅÂèëËØÅ‰π¶</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/ÂÆûÊàòÊ°à‰æã/helmÂÆâË£ÖzookeeperÈõÜÁæ§/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">helmÂÆâË£ÖzookeeperÈõÜÁæ§</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/ÂÆûÊàòÊ°à‰æã/jenkinsÁªìÂêà/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">jenkinsÁªìÂêà</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/ÂÆûÊàòÊ°à‰æã/k8s‰∏≠‰ΩøÁî®traefikÂü∫Á°Ä/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8s‰∏≠‰ΩøÁî®traefikÔºàÂü∫Á°ÄÔºâ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/ÂÆûÊàòÊ°à‰æã/k8sÂÆâË£ÖapolloÈÖçÁΩÆ‰∏≠ÂøÉ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8sÂÆâË£ÖApolloÈÖçÁΩÆ‰∏≠ÂøÉ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/ÂÆûÊàòÊ°à‰æã/k8sÂÆâË£ÖminioÂØπË±°Â≠òÂÇ®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8sÂÆâË£ÖMinIOÂØπË±°Â≠òÂÇ®</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/ÂÆûÊàòÊ°à‰æã/rbac-ÂÆûÊàòÊ°à‰æã/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">RBAC ÂÆûÊàòÊ°à‰æã</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/ÂÆûÊàòÊ°à‰æã/springcloudÂæÆÊúçÂä°ÁîµÂïÜÁ≥ªÁªüÂú®kubernetesÈõÜÁæ§‰∏≠‰∏äÁ∫øËØ¶ÁªÜÊïôÁ®ã/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SpringCloudÂæÆÊúçÂä°ÁîµÂïÜÁ≥ªÁªüÂú®KubernetesÈõÜÁæ§‰∏≠‰∏äÁ∫øËØ¶ÁªÜÊïôÁ®ã</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/ÂÆûÊàòÊ°à‰æã/‰ΩøÁî®csr-apiÂàõÂª∫Áî®Êà∑/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰ΩøÁî®CSR APIÂàõÂª∫Áî®Êà∑</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/ÂÆûÊàòÊ°à‰æã/ÂÖ∂‰ªñÂÆûÊàòÊ°à‰æã/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÂÖ∂‰ªñÂÆûÊàòÊ°à‰æã</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Â∞èÊäÄÂ∑ß</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/Â∞èÊäÄÂ∑ß/‰ΩøÁî®curlËÆøÈóÆk8sÁöÑrest-api/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰ΩøÁî®curlËÆøÈóÆk8sÁöÑREST API</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/Â∞èÊäÄÂ∑ß/Âº∫Âà∂Âà†Èô§namespace/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Âº∫Âà∂Âà†Èô§namespace</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Prometheus</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/prometheus/influxdbtelegraf-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">influxDB„ÄÅTelegraf Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/prometheus/prometheus-alertmanager/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Prometheus-AlertManager</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/prometheus/prometheus-consulÊúçÂä°ÂèëÁé∞/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Prometheus-ConsulÔºàÊúçÂä°ÂèëÁé∞Ôºâ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/prometheus/prometheus-in-docker/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Prometheus in Docker</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/prometheus/prometheus-ÂÆâË£Ö‰∏éÈÉ®ÁΩ≤grafana/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Prometheus ÂÆâË£Ö‰∏éÈÉ®ÁΩ≤„ÄÅGrafana</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/prometheus/prometheus-ËøõÈò∂/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Prometheus ËøõÈò∂</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">LinuxBasics</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">index</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Ansible</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/ansible/ansible-ad-hoc-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ansible Ad-hoc Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/ansible/ansible-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ansible Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/ansible/ansible-best-practices/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ansible Best Practices</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/ansible/ansible-inventory/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ansible inventory</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/ansible/ansible-modules/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ansible modules</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/ansible/ansible-playbook-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ansible Playbook Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/ansible/ansible-tower/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ansible Tower</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Cache</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Nuster</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/cache/nuster/nuster-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nuster Basic</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Varnish</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/cache/varnish/varnish-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">varnish Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/cache/varnish/varnish-ÂèÇËÄÉÁ§∫‰æã/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">varnish ÂèÇËÄÉÁ§∫‰æã</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/cache/varnish/varnish-Êû∂ÊûÑÂ∑•‰ΩúÂéüÁêÜÂèäÁÆÄÂçïÈÖçÁΩÆ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">varnish Êû∂ÊûÑ„ÄÅÂ∑•‰ΩúÂéüÁêÜÂèäÁÆÄÂçïÈÖçÁΩÆ</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/certbot-nginx-ssl/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">CertBot Nginx SSL</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">DataBases</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Etcd</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/etcd/etcd-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">etcd Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/etcd/etcd-Â§á‰ªΩ‰∏éÊÅ¢Â§ç/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">etcd Â§á‰ªΩ‰∏éÊÅ¢Â§ç</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/etcd/etcd-Ê∑ªÂä†leanerËäÇÁÇπ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">etcd Ê∑ªÂä†leanerËäÇÁÇπ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/etcd/etcdctl-Âø´ÈÄüÊâãÂÜå/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">etcdctl Âø´ÈÄüÊâãÂÜå</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">MongoDB</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mongodb/mongodb-backup/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MongoDB Backup</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mongodb/mongodb-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MongoDB Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mongodb/mongodb-cluster/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MongoDB Cluster</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mongodb/mongodb-installation/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MongoDB Installation</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mongodb/mongodb-sharded-cluster/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MongoDB Sharded-Cluster</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mongodb/mongodb-ÂºÇÊûÑÊï∞ÊçÆÂπ≥Âè∞ËøÅÁßª/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MongoDB ÂºÇÊûÑÊï∞ÊçÆÂπ≥Âè∞ËøÅÁßª</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mongodb/mongodumprestoreoplogÈ´òÁ∫ßÂ§á‰ªΩ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">mongodumpÔºàrestoreÔºâoplogÈ´òÁ∫ßÂ§á‰ªΩ</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">MySQL</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mariadb-log/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MariaDB Log</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-auth-cli/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Auth CLI</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-backup-client-tools/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL BackUP - Client Tools</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-cluster/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Cluster</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-configuration/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Configuration</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-cursor/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Cursor</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-data_type/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Data_Type</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-explain/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL EXPLAIN</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-function/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Function</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-internal_function/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Internal_function</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-stored-procedure/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Stored Procedure</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-transaction/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Transaction</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-Â∞èÊäÄÂ∑ß/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Â∞èÊäÄÂ∑ß</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-Âø´ÈÄüÊâãÂÜå/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Âø´ÈÄüÊâãÂÜå</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-Á∫¶Êùü/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Á∫¶Êùü</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Redis</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-backup/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis Backup</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-cluster/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis Cluster</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-codis/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis Codis</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-ha/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis  HA</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-installation/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis Installation</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-sentinel/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis Sentinel</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-ËøõÈò∂/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis ËøõÈò∂</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/ÁºìÂ≠òÁ©øÈÄèÁºìÂ≠òÂáªÁ©øÁºìÂ≠òÈõ™Â¥©/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÁºìÂ≠òÁ©øÈÄè„ÄÅÁºìÂ≠òÂáªÁ©ø„ÄÅÁºìÂ≠òÈõ™Â¥©</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">DHCP-PXE-Cobbler</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/dhcp-pxe-cobbler/cobbler-centos/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Cobbler CentOS</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/dhcp-pxe-cobbler/dhcp-ÁÆÄÂçï‰ΩøÁî®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DHCP ÁÆÄÂçï‰ΩøÁî®</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/dhcp-pxe-cobbler/pxe-centos/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PXE CentOS</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/dnsmasq/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">dnsmasq</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/fail2ban-ÁÆÄÂçï‰ΩøÁî®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Fail2ban ÁÆÄÂçï‰ΩøÁî®</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">FileSystem</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Ceph</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/ceph-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ceph Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/ceph-cluster-ÁßªÈô§/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ceph Cluster ÁßªÈô§</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/ceph-deploy-ÈõÜÁæ§Âø´ÈÄüÈÉ®ÁΩ≤/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ceph-deploy ÈõÜÁæ§Âø´ÈÄüÈÉ®ÁΩ≤</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/ceph-manager-dashboard/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ceph Manager Dashboard</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/ceph-rgw/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ceph RGW</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/ceph-ÈÉ®ÁΩ≤ÈóÆÈ¢òÊ±áÊÄª/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ceph ÈÉ®ÁΩ≤ÈóÆÈ¢òÊ±áÊÄª</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/cephadm-ÈÉ®ÁΩ≤octopus/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Cephadm ÈÉ®ÁΩ≤octopus</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/cephfs/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">CephFS</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">FastDFS</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/fastdfs/fastdfs-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">FastDFS Basic</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">GlusterFS</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/glusterfs/‰∏¥Êó∂/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰∏¥Êó∂</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">MinIO</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/minio/minio-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MinIO Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/minio/minio-in-docker/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MinIO in Docker</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/nfs-Âü∫Á°ÄÂèäÂÆûÊàò/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">NFS Âü∫Á°ÄÂèäÂÆûÊàò</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/samba-Âü∫Á°ÄÂèäÂÆûÊàò/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SAMBA Âü∫Á°ÄÂèäÂÆûÊàò</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/smbconfËØ¶Ëß£/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">smb.confËØ¶Ëß£</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/tftp/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">TFTP</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/vsftp-Âü∫Á°ÄÂèäÂÆûÊàò/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">vsFTP Âü∫Á°ÄÂèäÂÆûÊàò</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/firewalld-iptablesÂø´ÈÄüÊâãÂÜå/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Firewalld IPtablesÂø´ÈÄüÊâãÂÜå</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/inotifywait-Êñá‰ª∂ÁõëÊéß/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">inotifywait Êñá‰ª∂ÁõëÊéß</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/jumpserver/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">JumpServer</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/k3s-k3d-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k3s - k3d Basic</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Kafka</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/kafka/cmak/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">CMAK</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/kafka/kafka-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kafka Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/kafka/‰ΩøÁî®-docker-compose-ÈÉ®ÁΩ≤-kafka/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰ΩøÁî® docker-compose ÈÉ®ÁΩ≤ Kafka</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/keepalived/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">keepalived</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">KVM</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/kvm/kvm_installsh/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">kvm_install.sh</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/kvm/kvm-2-vmware-station/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">KVM 2 VMware Station</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/kvm/kvm-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">KVM Basic</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/linux-ÂéãÊµãÂ§ßÂÖ®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Linux ÂéãÊµãÂ§ßÂÖ®</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/linuxËØäÊñ≠/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LinuxËØäÊñ≠</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">LoadBalancer</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">HAProxy</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/haproxy/haproxy-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">HAProxy Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/haproxy/haproxy-in-docker/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">HAProxy in Docker</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/haproxy/haproxy-ÂèÇËÄÉÁ§∫‰æã/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">HAProxy ÂèÇËÄÉÁ§∫‰æã</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/haproxy/haproxy-ÈÖçÁΩÆËØ¶Ëß£/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">HAProxy ÈÖçÁΩÆËØ¶Ëß£</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/haproxy/keepalived-haproxy/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Keepalived - HAProxy</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Keepalived-Nginx</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/keepalived-nginx/nginx-keepalivedÂÆûÁé∞È´òÂèØÁî®ÈõÜÁæ§/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx - keepalivedÂÆûÁé∞È´òÂèØÁî®ÈõÜÁæ§</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/keepalived-nginx/nginx-keepalivedÂø´ÈÄüÈÖçÁΩÆÂèäËÑöÊú¨/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx - keepalivedÂø´ÈÄüÈÖçÁΩÆÂèäËÑöÊú¨</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">LVS</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/lvs/ipvsadm-ÂèÇÊï∞/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ipvsadm ÂèÇÊï∞</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/lvs/lvs-keepalived/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LVS - keepalived</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/lvs/lvs-ÂõõÁßçÊ®°ÂûãËØ¶Ëß£/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LVS ÂõõÁßçÊ®°ÂûãËØ¶Ëß£</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/lvs/lvs-ÁÆÄÂçïÂ∫îÁî®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LVS ÁÆÄÂçïÂ∫îÁî®</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/lvs/lvs-Ë∞ÉÂ∫¶ÁÆóÊ≥ï/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LVS Ë∞ÉÂ∫¶ÁÆóÊ≥ï</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/lvs/lvs-ËøõÈò∂ÈÖçÁΩÆ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LVS ËøõÈò∂ÈÖçÁΩÆ</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/lsyncd/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">lsyncd</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/lvm-ËÆ≤Ëß£/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">lvm ËÆ≤Ëß£</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Makefile</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/makefile/makefile-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Makefile Basic</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Nexus</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/nexus/nexus-basic-maven-ÁßÅÊúç/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nexus Basic - Maven ÁßÅÊúç</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/nexus/nexus-yum-ÁßÅÊúç/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nexus - yum ÁßÅÊúç</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/nexus/nexus-ÊâπÈáè‰∏ä‰º†ËÑöÊú¨/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">nexus ÊâπÈáè‰∏ä‰º†ËÑöÊú¨</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/openvpn-for-centos/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">OpenVPN for CentOS</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/powerdns/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PowerDNS</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">PVE</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/pve/pve-issues/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PVE issues</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/pve/pve-ÂàùÂßãÂåñÁõ∏ÂÖ≥/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PVE ÂàùÂßãÂåñÁõ∏ÂÖ≥</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/pve/pve-Âà∂‰ΩúÈïúÂÉèÊ®°Êùø/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PVE Âà∂‰ΩúÈïúÂÉèÊ®°Êùø</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">RabbitMQ</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/rabbitmq/rabbitmq-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">RabbitMQ Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/rabbitmq/rabbitmq-mirror-queue/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">RabbitMQ Mirror Queue</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/rabbitmq/rabbitmq-on-docker/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">RabbitMQ on Docker</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/rsync-inotifysersync/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">rsync - inotifyÔºàsersyncÔºâ</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Shell</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/shell/command/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">command</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/shell/linux-shell-ÂÆûÁî®ÂëΩ‰ª§Âèä‰ΩøÁî®Âú∫ÊôØ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Linux Shell ÂÆûÁî®ÂëΩ‰ª§Âèä‰ΩøÁî®Âú∫ÊôØ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/shell/shell-getopts-Ê†∑‰æã/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Shell getopts Ê†∑‰æã</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/shell/userful-shell/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">userful-shell</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/snmpÈÖçÁΩÆ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">snmpÈÖçÁΩÆ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/split-logrotate/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Split - Logrotate</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">SpringBoot</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/springboot/springboot-in-docker/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SpringBoot in Docker</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/springboot/springboot-quicklystart/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SpringBoot Quicklystart</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/sql-review/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SQL review</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/ssh-tunnel/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SSH Tunnel</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/tcpdump-wireshark/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tcpdump - Wireshark</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Terraform</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/terraform/terraform-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Terraform Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/terraform/terraform-examples/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Terraform Examples</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/terraform/terraform-variable/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Terraform Variable</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/useful-command/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Useful Command</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/vagrant/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Vagrant</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/vim-tricks/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">vim tricks</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/vps-ËäÇÁÇπÊê≠Âª∫/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">VPS ËäÇÁÇπÊê≠Âª∫</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Web-Servers</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Apache</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/apache/lamp-Âø´ÈÄüÈÉ®ÁΩ≤/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LAMP Âø´ÈÄüÈÉ®ÁΩ≤</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Jvm-Tomcat</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/jvm-tomcat/jvm-monitor-tools/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jvm Monitor Tools</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/jvm-tomcat/tomcat-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tomcat Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/jvm-tomcat/tomcat-clusternginx/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tomcat ClusterÔºànginxÔºâ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/jvm-tomcat/tomcat-sessionmemcached/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tomcat SessionÔºàmemcachedÔºâ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/jvm-tomcat/tomcat-sessionredis-with-nginx/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tomcat SessionÔºàRedis with NginxÔºâ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/jvm-tomcat/tomcat-Ë∞É‰ºò/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tomcat Ë∞É‰ºò</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/jvm-tomcat/tomcat‰∏≠Èó¥‰ª∂ÊñπÊñπÈù¢Èù¢ÂÇ®Â§áÁü•ËØÜ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tomcat‰∏≠Èó¥‰ª∂ÊñπÊñπÈù¢Èù¢ÂÇ®Â§áÁü•ËØÜ</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Nginx</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/https-ÈÖçÁΩÆÂèä‰ºòÂåñ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">HTTPS  ÈÖçÁΩÆÂèä‰ºòÂåñ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-cache/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx Cache</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-php-fpm/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx php-fpm</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-rewrite/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx Rewrite</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-try_files/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx try_files</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-uwsgi-ÈÉ®ÁΩ≤django/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx - uWSGI ÈÉ®ÁΩ≤Django</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-ÂÜÖÁΩÆÂèòÈáè/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx ÂÜÖÁΩÆÂèòÈáè</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-ÂèçÂêë‰ª£ÁêÜ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx ÂèçÂêë‰ª£ÁêÜ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-Âπ≥ÊªëÂçáÁ∫ß‰∏éÂõûÊªö/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx Âπ≥ÊªëÂçáÁ∫ß‰∏éÂõûÊªö</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-Âø´ÈÄüÈÖçÁΩÆÊâãÂÜå/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx Âø´ÈÄüÈÖçÁΩÆÊâãÂÜå</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-ÊÄßËÉΩ‰ºòÂåñ‰∏éÂÆâÂÖ®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx ÊÄßËÉΩ‰ºòÂåñ‰∏éÂÆâÂÖ®</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-Áà¨Ëô´ÈôêÂà∂/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx Áà¨Ëô´ÈôêÂà∂</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-ÁºñËØëÂèäÂà∂‰ΩúÂåÖ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx ÁºñËØëÂèäÂà∂‰ΩúÂåÖ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-Ë¥üËΩΩÂùáË°°/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx Ë¥üËΩΩÂùáË°°</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-È´òÁ∫ßÊ®°Âùó/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx È´òÁ∫ßÊ®°Âùó</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Others</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/others/nodejs-with-ssl-nginx/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Node.js with ssl - nginx</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/others/‰ΩøÁî®logrotateÂàáÂâ≤nginxÊó•Âøó/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰ΩøÁî®logrotateÂàáÂâ≤nginxÊó•Âøó</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/others/Ê£ÄÊü•ÊúçÂä°Âô®ÊòØÂê¶ÊîØÊåÅgzip/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ê£ÄÊü•ÊúçÂä°Âô®ÊòØÂê¶ÊîØÊåÅgzip</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Problems</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/problems/rewriteÂèÇÊï∞Â§ÑÁêÜÈóÆÈ¢ò/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">rewriteÂèÇÊï∞Â§ÑÁêÜÈóÆÈ¢ò</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">PHP</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/php/php-‰ºòÂåñÂèäÂÆâÂÖ®ÈÖçÁΩÆ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PHP ‰ºòÂåñÂèäÂÆâÂÖ®ÈÖçÁΩÆ</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Python-Django</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/python-django/access-to-database/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Access to Database</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/python-django/django-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Django Basic</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/windows-useful-cmd/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Windows useful cmd</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/wireguard-vpn-for-ubuntu/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">WireGuard VPN for Ubuntu</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Zabbix</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/zabbix/zabbix-agentÊâßË°åËøúÁ®ãÂëΩ‰ª§/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Zabbix agentÊâßË°åËøúÁ®ãÂëΩ‰ª§</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/zabbix/zabbix-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Zabbix Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/zabbix/zabbix-ÂÆâË£Ö‰∏≠ÊñáÂåÖ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Zabbix ÂÆâË£Ö‰∏≠ÊñáÂåÖ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/zabbix/zabbix-ËØ¶ÁªÜ‰ªãÁªç/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Zabbix ËØ¶ÁªÜ‰ªãÁªç</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/zabbix/zabbix-ÈíâÈíâÊä•Ë≠¶/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Zabbix ÈíâÈíâÊä•Ë≠¶</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Zookeeper</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/zookeeper/zookeeper-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Zookeeper Basic</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/Ëá™Âª∫dns/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ëá™Âª∫dns</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/Ëá™Âª∫ÈÇÆÁÆ±ÊúçÂä°Âô®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ëá™Âª∫ÈÇÆÁÆ±ÊúçÂä°Âô®</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/ËìùÈ≤∏ËøêÁª¥Âπ≥Âè∞/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ËìùÈ≤∏ËøêÁª¥Âπ≥Âè∞</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">ProgramLang</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/programlang/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">index</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Golang</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-errors-handler/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Errors - handler</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-file-operate/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang File Operate</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-fmtÂç†‰ΩçÁ¨¶/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang fmtÂç†‰ΩçÁ¨¶</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-function/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Function</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-interface/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Interface</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-json/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Json</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-package-manage/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Package manage</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-pkgs/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Pkgs</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-pointer/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Pointer</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-project-layout/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Project Layout</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-testing/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Testing</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-Âπ∂Âèë/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Âπ∂Âèë</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/gormÂåÖ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">gormÂåÖ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/string-operate/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">String Operate</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Lua</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/programlang/lua/lua-baisc/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Lua Baisc</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/lua/lua-continue-ex/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Lua continue Ex</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Scripts</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/scripts/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">index</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">shell</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/scripts/shell/centos-sys-information/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">CentOS sys information</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/scripts/shell/dokcer-ÈïúÂÉèÂ§á‰ªΩ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Dokcer ÈïúÂÉèÂ§á‰ªΩ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/scripts/shell/nginx-log-check/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx Log Check</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/scripts/shell/redis-tools/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis tools</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">resort-file-from-csv</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/scripts/shell/resort-file-from-csv/resort-file/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">resort-file</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/scripts/shell/rsync/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Rsync</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/scripts/shell/shell-Âπ∂Âèë/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Shell Âπ∂Âèë</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/scripts/shell/Êó•Â∏∏Â∑°Ê£Äshell/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Êó•Â∏∏Â∑°Ê£ÄShell</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">windows</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/scripts/windows/ÈÄöÁî®‰øÆÊîπdns/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÈÄöÁî®‰øÆÊîπdns</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Interview</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/interview/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">index</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/pdfÈù¢ËØïÈ¢òÈõÜÂêà/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PDFÈù¢ËØïÈ¢òÈõÜÂêà</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Â∑•‰ΩúÈù¢ËØïÈ¢ò</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/dbaÊï∞ÊçÆÂ∫ìËøêÁª¥Â∑•Á®ãÂ∏à/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DBAÊï∞ÊçÆÂ∫ìËøêÁª¥Â∑•Á®ãÂ∏à</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/devopsÈù¢ËØïÈ¢ò/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DevopsÈù¢ËØïÈ¢ò</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/dockerÈù¢ËØïÈ¢ò/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">dockerÈù¢ËØïÈ¢ò</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/esÈù¢ËØïÈ¢ò/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">esÈù¢ËØïÈ¢ò</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/etcdÈù¢ËØïÈ¢ò/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">etcdÈù¢ËØïÈ¢ò</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/goËØ≠Ë®ÄÁõ∏ÂÖ≥/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">GoËØ≠Ë®ÄÁõ∏ÂÖ≥</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/goËØ≠Ë®ÄÁõ∏ÂÖ≥Áª≠-ÊñáÁ´†Ê±áÊÄª/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">GoËØ≠Ë®ÄÁõ∏ÂÖ≥ÔºàÁª≠-ÊñáÁ´†Ê±áÊÄªÔºâ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/k8sÈù¢ËØïÈ¢òÊï¥ÁêÜ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">K8sÈù¢ËØïÈ¢òÊï¥ÁêÜ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/linuxÁõ∏ÂÖ≥ÁöÑÊÄßËÉΩ‰ºòÂåñÈù¢ËØïÈ¢ò/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">linuxÁõ∏ÂÖ≥ÁöÑÊÄßËÉΩ‰ºòÂåñÈù¢ËØïÈ¢ò</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/mysqlÈù¢ËØïÈ¢ò/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">mysqlÈù¢ËØïÈ¢ò</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/nginxÈù¢ËØïÈ¢ò/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">nginxÈù¢ËØïÈ¢ò</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/nginxÈù¢ËØïÈ¢òÂê´Á≠îÊ°àÁª≠/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">nginxÈù¢ËØïÈ¢òÂê´Á≠îÊ°àÔºàÁª≠Ôºâ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/redisÈù¢ËØïÈ¢ò1/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">RedisÈù¢ËØïÈ¢ò1</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/redisÈù¢ËØïÈ¢ò1Âê´Á≠îÊ°àÁª≠/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">RedisÈù¢ËØïÈ¢ò1Âê´Á≠îÊ°àÔºàÁª≠Ôºâ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/redisÈù¢ËØïÈ¢ò2/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">RedisÈù¢ËØïÈ¢ò2</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/shellËÑöÊú¨Áõ∏ÂÖ≥/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">shellËÑöÊú¨Áõ∏ÂÖ≥</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/sreÂü∫Á°ÄÂøÖ‰ºöÊ†∏ÂøÉÂÆûÊàòÈù¢ËØïÈ¢ò/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SREÂü∫Á°ÄÂøÖ‰ºöÊ†∏ÂøÉÂÆûÊàòÈù¢ËØïÈ¢ò</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/sreÈ´òÁ∫ßËøêÁª¥Èù¢ËØïÈ¢ò/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SREÈ´òÁ∫ßËøêÁª¥Èù¢ËØïÈ¢ò</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/ÂÖ¨Âè∏‰∫ßÂìÅ‰∏ä‰∫ëÊµÅÁ®ãËßÑËåÉ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÂÖ¨Âè∏‰∫ßÂìÅ‰∏ä‰∫ëÊµÅÁ®ãËßÑËåÉ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/Êó•ÂøóÊî∂ÈõÜefk/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Êó•ÂøóÊî∂ÈõÜEFK</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/Êù•Ëá™ÁΩëÁªú-1/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Êù•Ëá™ÁΩëÁªú-1</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/Êù•Ëá™Áæ§Âèã-1/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Êù•Ëá™Áæ§Âèã-1</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/Á≥ªÁªüËøêÁª¥ÊïÖÈöúÁõ∏ÂÖ≥/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Á≥ªÁªüËøêÁª¥ÊïÖÈöúÁõ∏ÂÖ≥</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/ËµÑÊ∑±ËøêÁª¥Êû∂ÊûÑËÆæËÆ°ËßÑÂàí/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ËµÑÊ∑±ËøêÁª¥Êû∂ÊûÑËÆæËÆ°ËßÑÂàí</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/ËøêÁª¥ÂÆâÂÖ®Áõ∏ÂÖ≥/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ËøêÁª¥ÂÆâÂÖ®Áõ∏ÂÖ≥</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/ËøêÁª¥ÂøÖ‰ºöÈù¢ËØïÈ¢ò-Âø´ÈÄüÁ™ÅÂáª/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ËøêÁª¥ÂøÖ‰ºöÈù¢ËØïÈ¢ò-Âø´ÈÄüÁ™ÅÂáª</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/ËøêÁª¥ÁõëÊéß‰ΩìÁ≥ª/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ËøêÁª¥ÁõëÊéß‰ΩìÁ≥ª</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/ËøêÁª¥ÁΩëÁªúÂü∫Á°Ä/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ËøêÁª¥ÁΩëÁªúÂü∫Á°Ä</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Â∑•‰ΩúÈù¢ËØïÈ¢ò/ËøêÁª¥Èù¢ËØïËØùÊúØËá™Êàë‰ªãÁªç/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ËøêÁª¥Èù¢ËØïËØùÊúØËá™Êàë‰ªãÁªç</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">ÊùÇÈ°π-Ëá™Áî®</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/interview/ÊùÇÈ°π-Ëá™Áî®/‰∏¥Êó∂2/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰∏¥Êó∂2</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/ÊùÇÈ°π-Ëá™Áî®/‰∏¥Êó∂Â§ç‰π†Áî®Âæà‰π±/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">‰∏¥Êó∂Â§ç‰π†Áî®ÔºàÂæà‰π±Ôºâ</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/interview/ÈÄâÊã©ÂÖ¨Âè∏/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÈÄâÊã©ÂÖ¨Âè∏</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/Èù¢ËØïÂçöÊñáÈìæÊé•ÈõÜÂêà/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Èù¢ËØïÂçöÊñáÈìæÊé•ÈõÜÂêà</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">WORK</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">AnHeng</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/work/anheng/telegraf/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">telegraf</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/work/anheng/ÊµÅÊ∞¥Á∫ø-Â∑•‰ΩúÊµÅÂºïÊìé/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ÊµÅÊ∞¥Á∫ø Â∑•‰ΩúÊµÅÂºïÊìé</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li> </ul>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-wu23bvmt"> <div class="sl-flex social-icons astro-wu23bvmt"> <a href="https://github.com/AGou-ops" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected="true" class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div>  </div> </div> </div> </nav> <div class="main-frame astro-vrdttmbt">  <div class="lg:sl-flex astro-67yu43on"> <aside class="right-sidebar-container astro-67yu43on"> <div class="right-sidebar astro-67yu43on"> <div class="lg:sl-hidden astro-pb3aqygn"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-doynk5tl"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-doynk5tl"><details id="starlight__mobile-toc" class="astro-doynk5tl"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-doynk5tl"><div class="toggle sl-flex astro-doynk5tl">On this page<svg aria-hidden="true" class="caret astro-doynk5tl astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </div><span class="display-current astro-doynk5tl"></span></summary><div class="dropdown astro-doynk5tl"><ul class="isMobile astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#‰∏ÄÈ¢ÑÂÖàÂáÜÂ§á" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">‰∏Ä„ÄÅÈ¢ÑÂÖàÂáÜÂ§á</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#11-ÊúçÂä°Âô®ËßíËâ≤" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.1 ÊúçÂä°Âô®ËßíËâ≤</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#12-Á≥ªÁªüÂàùÂßãÂåñ" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.2 Á≥ªÁªüÂàùÂßãÂåñ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#13-hostsËÆæÁΩÆ" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.3 hostsËÆæÁΩÆ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#14-ÂèØÈÄâÂÆâË£Ösupervisor" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.4 ÔºàÂèØÈÄâÔºâÂÆâË£Ösupervisor</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#‰∫åÂÆâË£ÖcriÂÆπÂô®ËøêË°åÊó∂ÂèäharborÁßÅÊúâ‰ªì" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">‰∫å„ÄÅÂÆâË£ÖCRIÂÆπÂô®ËøêË°åÊó∂ÂèäharborÁßÅÊúâ‰ªì</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#21-ÂÆâË£Öcontainerd" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">2.1 ÂÆâË£Öcontainerd</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#22-ÂÆâË£ÖharborÁßÅÊúâ‰ªì" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">2.2 ÂÆâË£ÖharborÁßÅÊúâ‰ªì</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#‰∏â‰ΩøÁî®cfsslÁîüÊàêËØÅ‰π¶" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">‰∏â„ÄÅ‰ΩøÁî®cfsslÁîüÊàêËØÅ‰π¶</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#31-ÂÆâË£Öcfssl" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.1 ÂÆâË£Öcfssl</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#32-ÂàùÂßãÂåñÂèäËØ¥Êòé" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.2 ÂàùÂßãÂåñÂèäËØ¥Êòé</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#ÂõõÈÉ®ÁΩ≤masterËäÇÁÇπ" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Âõõ„ÄÅÈÉ®ÁΩ≤masterËäÇÁÇπ</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#41-ÈÉ®ÁΩ≤etcdÈõÜÁæ§" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.1 ÈÉ®ÁΩ≤etcdÈõÜÁæ§</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#42-ÈÉ®ÁΩ≤api-server" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.2 ÈÉ®ÁΩ≤API server</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#43-ÈÉ®ÁΩ≤controller-manager" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.3 ÈÉ®ÁΩ≤controller-manager</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#44-ÈÉ®ÁΩ≤kube-scheduler" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.4 ÈÉ®ÁΩ≤kube-scheduler</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#45-ÈÖçÁΩÆkubectlÊâÄÈúÄË¶ÅÁöÑkubeconfig" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.5 ÈÖçÁΩÆkubectlÊâÄÈúÄË¶ÅÁöÑkubeconfig</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#46-ÈÉ®ÁΩ≤nodeÁõ∏ÂÖ≥ÁªÑ‰ª∂kube-proxykubelet" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.6 ÈÉ®ÁΩ≤nodeÁõ∏ÂÖ≥ÁªÑ‰ª∂kube-proxy„ÄÅkubelet</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#47-Ê£ÄÊü•masterËäÇÁÇπÈÉ®ÁΩ≤ÁªìÊûú" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.7 Ê£ÄÊü•masterËäÇÁÇπÈÉ®ÁΩ≤ÁªìÊûú</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#‰∫îÈÉ®ÁΩ≤nodeËäÇÁÇπ" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">‰∫î„ÄÅÈÉ®ÁΩ≤nodeËäÇÁÇπ</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#51-ÈÉ®ÁΩ≤kubelet" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">5.1 ÈÉ®ÁΩ≤kubelet</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#52-ÈÉ®ÁΩ≤kube-proxy" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">5.2 ÈÉ®ÁΩ≤kube-proxy</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#53-Ê£ÄÊü•nodeËäÇÁÇπÈÉ®ÁΩ≤ÁªìÊûú" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">5.3 Ê£ÄÊü•nodeËäÇÁÇπÈÉ®ÁΩ≤ÁªìÊûú</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#ÂÖ≠ÂÖ∂‰ªñÂèØÈÄâÁªÑ‰ª∂ÂÆâË£Ö" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">ÂÖ≠„ÄÅÂÖ∂‰ªñÂèØÈÄâÁªÑ‰ª∂ÂÆâË£Ö</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#61-coredns" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">6.1 coredns</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#62-nginx-ingress" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">6.2 nginx ingress</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#63-Èù¢Êùø" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">6.3 Èù¢Êùø</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#‰∏ÉÊú™ÂÆåÂæÖÁª≠" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">‰∏É„ÄÅÊú™ÂÆåÂæÖÁª≠</span> </a>  </li> </ul> </div></details></nav></mobile-starlight-toc></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-pb3aqygn"><div class="sl-container astro-pb3aqygn"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#‰∏ÄÈ¢ÑÂÖàÂáÜÂ§á" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">‰∏Ä„ÄÅÈ¢ÑÂÖàÂáÜÂ§á</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#11-ÊúçÂä°Âô®ËßíËâ≤" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.1 ÊúçÂä°Âô®ËßíËâ≤</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#12-Á≥ªÁªüÂàùÂßãÂåñ" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.2 Á≥ªÁªüÂàùÂßãÂåñ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#13-hostsËÆæÁΩÆ" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.3 hostsËÆæÁΩÆ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#14-ÂèØÈÄâÂÆâË£Ösupervisor" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.4 ÔºàÂèØÈÄâÔºâÂÆâË£Ösupervisor</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#‰∫åÂÆâË£ÖcriÂÆπÂô®ËøêË°åÊó∂ÂèäharborÁßÅÊúâ‰ªì" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">‰∫å„ÄÅÂÆâË£ÖCRIÂÆπÂô®ËøêË°åÊó∂ÂèäharborÁßÅÊúâ‰ªì</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#21-ÂÆâË£Öcontainerd" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">2.1 ÂÆâË£Öcontainerd</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#22-ÂÆâË£ÖharborÁßÅÊúâ‰ªì" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">2.2 ÂÆâË£ÖharborÁßÅÊúâ‰ªì</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#‰∏â‰ΩøÁî®cfsslÁîüÊàêËØÅ‰π¶" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">‰∏â„ÄÅ‰ΩøÁî®cfsslÁîüÊàêËØÅ‰π¶</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#31-ÂÆâË£Öcfssl" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.1 ÂÆâË£Öcfssl</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#32-ÂàùÂßãÂåñÂèäËØ¥Êòé" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.2 ÂàùÂßãÂåñÂèäËØ¥Êòé</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#ÂõõÈÉ®ÁΩ≤masterËäÇÁÇπ" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Âõõ„ÄÅÈÉ®ÁΩ≤masterËäÇÁÇπ</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#41-ÈÉ®ÁΩ≤etcdÈõÜÁæ§" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.1 ÈÉ®ÁΩ≤etcdÈõÜÁæ§</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#42-ÈÉ®ÁΩ≤api-server" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.2 ÈÉ®ÁΩ≤API server</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#43-ÈÉ®ÁΩ≤controller-manager" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.3 ÈÉ®ÁΩ≤controller-manager</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#44-ÈÉ®ÁΩ≤kube-scheduler" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.4 ÈÉ®ÁΩ≤kube-scheduler</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#45-ÈÖçÁΩÆkubectlÊâÄÈúÄË¶ÅÁöÑkubeconfig" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.5 ÈÖçÁΩÆkubectlÊâÄÈúÄË¶ÅÁöÑkubeconfig</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#46-ÈÉ®ÁΩ≤nodeÁõ∏ÂÖ≥ÁªÑ‰ª∂kube-proxykubelet" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.6 ÈÉ®ÁΩ≤nodeÁõ∏ÂÖ≥ÁªÑ‰ª∂kube-proxy„ÄÅkubelet</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#47-Ê£ÄÊü•masterËäÇÁÇπÈÉ®ÁΩ≤ÁªìÊûú" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.7 Ê£ÄÊü•masterËäÇÁÇπÈÉ®ÁΩ≤ÁªìÊûú</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#‰∫îÈÉ®ÁΩ≤nodeËäÇÁÇπ" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">‰∫î„ÄÅÈÉ®ÁΩ≤nodeËäÇÁÇπ</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#51-ÈÉ®ÁΩ≤kubelet" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">5.1 ÈÉ®ÁΩ≤kubelet</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#52-ÈÉ®ÁΩ≤kube-proxy" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">5.2 ÈÉ®ÁΩ≤kube-proxy</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#53-Ê£ÄÊü•nodeËäÇÁÇπÈÉ®ÁΩ≤ÁªìÊûú" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">5.3 Ê£ÄÊü•nodeËäÇÁÇπÈÉ®ÁΩ≤ÁªìÊûú</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#ÂÖ≠ÂÖ∂‰ªñÂèØÈÄâÁªÑ‰ª∂ÂÆâË£Ö" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">ÂÖ≠„ÄÅÂÖ∂‰ªñÂèØÈÄâÁªÑ‰ª∂ÂÆâË£Ö</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#61-coredns" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">6.1 coredns</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#62-nginx-ingress" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">6.2 nginx ingress</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#63-Èù¢Êùø" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">6.3 Èù¢Êùø</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#‰∏ÉÊú™ÂÆåÂæÖÁª≠" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">‰∏É„ÄÅÊú™ÂÆåÂæÖÁª≠</span> </a>  </li> </ul> </nav></starlight-toc></div></div> </div> </aside> <div class="main-pane astro-67yu43on">  <main data-pagefind-body lang="en" dir="ltr" class="astro-bguv2lll">    <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <h1 id="_top" class="astro-j6tvhyss">k8s Debian12‰∫åËøõÂà∂ÂÆâË£Ö</h1>  </div> </div>  <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <div class="sl-markdown-content"> <h2 id="‰∏ÄÈ¢ÑÂÖàÂáÜÂ§á">‰∏Ä„ÄÅÈ¢ÑÂÖàÂáÜÂ§á</h2>
<h3 id="11-ÊúçÂä°Âô®ËßíËâ≤">1.1 ÊúçÂä°Âô®ËßíËâ≤</h3>
<p>ÁéØÂ¢É‰ø°ÊÅØÔºö</p>
<ul>
<li>k8sÁâàÊú¨Ôºöv1.25.12</li>
<li>Debian12(bookworm)ÔºöÂÜÖÊ†∏6.1.0-9-amd64</li>
</ul>

























<table><thead><tr><th>ËßíËâ≤</th><th>IP</th><th>ÁªÑ‰ª∂ÂàóË°®</th></tr></thead><tbody><tr><td>master</td><td>172.19.82.157</td><td>kube-apiserver„ÄÅkube-controller-manage„ÄÅkube-scheduler„ÄÅkubelet„ÄÅkube-proxy„ÄÅetcd„ÄÅcontainerd</td></tr><tr><td>node01</td><td>172.19.82.158</td><td>kubelet„ÄÅkube-proxy„ÄÅcontainerd„ÄÅetcd</td></tr><tr><td>node02</td><td>172.19.82.159</td><td>kubelet„ÄÅkube-proxy„ÄÅcontainerd„ÄÅetcd</td></tr></tbody></table>
<p>‚ÑπÁî±‰∫éÊâã‰∏äËµÑÊ∫êÊúâÈôêÔºåÊâÄ‰ª•Êê≠Âª∫‰∏Ä‰∏™‰∏Ä‰∏ª‰∏§‰ªéÁöÑÈõÜÁæ§ÔºåÂ¶ÇÊûúÂêéÁª≠ÊÉ≥Ë¶ÅÊâ©Â±ïÁöÑËØùÔºå‰ªÖÈúÄË¶ÅÂÜçÊ∑ªÂä†masterÊàñËÄÖnodeËäÇÁÇπÂç≥ÂèØÔºåÊ≠§Â§ñetcdÂèØ‰ª•ÈÉ®ÁΩ≤Âà∞ÈõÜÁæ§‰πãÂ§ñÂπ∂ÂÅöÈ´òÂèØÁî®„ÄÇ</p>
<h3 id="12-Á≥ªÁªüÂàùÂßãÂåñ">1.2 Á≥ªÁªüÂàùÂßãÂåñ</h3>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.pjkke.css"><script type="module" src="/_astro/ec.sgewm.js"></script><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Á¶ÅÁî®Èò≤ÁÅ´Â¢ô</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">systemctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stop</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ufw</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">systemctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">disable</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ufw</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÂÖ≥Èó≠SELinuxÔºåÊàëËøôÈáåcloudintÂÆâË£ÖÁöÑÁ≥ªÁªüÔºåÊ≤°ÊúâÈò≤ÁÅ´Â¢ôÂíåselinux</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">sed</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">s/enforcing/disabled/</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/selinux/config</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">setenforce</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÂÖ≥Èó≠‰∫§Êç¢ÂàÜÂå∫swap</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">swap</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-a</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">sed</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-ri</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">s/.*swap.*/#&#x26;/</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/fstab</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÂêåÊ≠•Êó∂Âå∫‰∏éÊó∂Èó¥Ôºå**ÈùûÂ∏∏ÈáçË¶Å**</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">timedatectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-timezone</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">Asia/Shanghai</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">ntpdate</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ntp.aliyun.com</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#809191;--1:#616671"># Ê≤°ÊúântpdateÁöÑËØùÔºåÈúÄË¶ÅÂÆâË£Ö‰∏Ä‰∏ãÔºåapt install ntpdate -y</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÈÖçÁΩÆulimitÔºåÊúÄÂ§ßÊñá‰ª∂ÊâìÂºÄÊï∞Ôºå‰ºòÂåñlinuxÊÄßËÉΩÔºåÈáçÊñ∞ÈÄÄÂá∫ÁôªÂΩïÂΩìÂâçshellÂç≥ÂèØÁîüÊïà</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">ulimit</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-SHn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">65535</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">>></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/security/limits.conf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x3C;&#x3C;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">EOF</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">root soft nofile 65536</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">root hard nofile 131072</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">root soft nproc 65535</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">root hard nproc 655350</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">root soft memlock unlimited</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">root hard memlock unlimited</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">EOF</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÂÆâË£Öipvs</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">apt</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ipvsadm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ipset</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">sysstat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">conntrack</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-y</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Âä†ËΩΩ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">modprobe</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ip_vs</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">modprobe</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ip_vs_rr</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">modprobe</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ip_vs_wrr</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">modprobe</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ip_vs_sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">modprobe</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">nf_conntrack</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÂÜôÂÖ•ÈÖçÁΩÆÊñá‰ª∂Ê∞∏‰πÖÁîüÊïà</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">>></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/modules-load.d/ipvs.conf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x3C;&#x3C;</span><span style="--0:#D9F5DD;--1:#111111">EOF</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">ip_vs</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">ip_vs_rr</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">ip_vs_wrr</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">ip_vs_sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">nf_conntrack</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">ip_tables</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">ip_set</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">xt_set</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">ipt_set</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">ipt_rpfilter</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">ipt_REJECT</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">ipip</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">EOF</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÈáçÂêØÊúçÂä°‰ª•Âä†ËΩΩÊ®°Âùó</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">systemctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">restart</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">systemd-modules-load.service</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê£ÄÊü•Ê®°ÂùóÊòØÂê¶Âä†ËΩΩÔºåËøôÈáåÂèØ‰ª•reboot‰∏Ä‰∏ã</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">lsmod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">grep</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-e</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ip_vs</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-e</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">nf_conntrack</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ‰øÆÊîπÂÜÖÊ†∏ÂèÇÊï∞ÔºåÊåâÈúÄ‰øÆÊîπÂç≥ÂèØ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/sysctl.d/k8s.conf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x3C;&#x3C;</span><span style="--0:#D9F5DD;--1:#111111">EOF</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv4.ip_forward = 1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.bridge.bridge-nf-call-iptables = 1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">fs.may_detach_mounts = 1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">vm.overcommit_memory=1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">vm.panic_on_oom=0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">fs.inotify.max_user_watches=89100</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">fs.file-max=52706963</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">fs.nr_open=52706963</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.netfilter.nf_conntrack_max=2310720</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv4.tcp_keepalive_time = 600</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv4.tcp_keepalive_probes = 3</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv4.tcp_keepalive_intvl =15</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv4.tcp_max_tw_buckets = 36000</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv4.tcp_tw_reuse = 1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv4.tcp_max_orphans = 327680</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv4.tcp_orphan_retries = 3</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv4.tcp_syncookies = 1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv4.tcp_max_syn_backlog = 16384</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv4.ip_conntrack_max = 65536</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv4.tcp_max_syn_backlog = 16384</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv4.tcp_timestamps = 0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.core.somaxconn = 16384</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv6.conf.all.disable_ipv6 = 0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv6.conf.default.disable_ipv6 = 0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv6.conf.lo.disable_ipv6 = 0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">net.ipv6.conf.all.forwarding = 0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">EOF</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ‰ΩøÂÖ∂ÁîüÊïà</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">sysctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--system</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="systemctl stop ufwsystemctl disable ufwsed -i &#x27;s/enforcing/disabled/&#x27; /etc/selinux/configsetenforce 0swap -ased -ri &#x27;s/.*swap.*/#&#x26;/&#x27; /etc/fstabtimedatectl set-timezone Asia/Shanghaintpdate ntp.aliyun.com    # Ê≤°ÊúântpdateÁöÑËØùÔºåÈúÄË¶ÅÂÆâË£Ö‰∏Ä‰∏ãÔºåapt install ntpdate -yulimit -SHn 65535cat >> /etc/security/limits.conf << EOFroot soft nofile 65536root hard nofile 131072root soft nproc 65535root hard nproc 655350root soft memlock unlimitedroot hard memlock unlimitedEOFapt install ipvsadm ipset sysstat conntrack -ymodprobe -- ip_vsmodprobe -- ip_vs_rrmodprobe -- ip_vs_wrrmodprobe -- ip_vs_shmodprobe -- nf_conntrackcat >> /etc/modules-load.d/ipvs.conf <<EOFip_vsip_vs_rrip_vs_wrrip_vs_shnf_conntrackip_tablesip_setxt_setipt_setipt_rpfilteript_REJECTipipEOFsystemctl restart systemd-modules-load.servicelsmod | grep -e ip_vs -e nf_conntrackcat > /etc/sysctl.d/k8s.conf <<EOFnet.ipv4.ip_forward = 1net.bridge.bridge-nf-call-iptables = 1fs.may_detach_mounts = 1vm.overcommit_memory=1vm.panic_on_oom=0fs.inotify.max_user_watches=89100fs.file-max=52706963fs.nr_open=52706963net.netfilter.nf_conntrack_max=2310720net.ipv4.tcp_keepalive_time = 600net.ipv4.tcp_keepalive_probes = 3net.ipv4.tcp_keepalive_intvl =15net.ipv4.tcp_max_tw_buckets = 36000net.ipv4.tcp_tw_reuse = 1net.ipv4.tcp_max_orphans = 327680net.ipv4.tcp_orphan_retries = 3net.ipv4.tcp_syncookies = 1net.ipv4.tcp_max_syn_backlog = 16384net.ipv4.ip_conntrack_max = 65536net.ipv4.tcp_max_syn_backlog = 16384net.ipv4.tcp_timestamps = 0net.core.somaxconn = 16384net.ipv6.conf.all.disable_ipv6 = 0net.ipv6.conf.default.disable_ipv6 = 0net.ipv6.conf.lo.disable_ipv6 = 0net.ipv6.conf.all.forwarding = 0EOFsysctl --system"><div></div></button></div></figure></div>
<h3 id="13-hostsËÆæÁΩÆ">1.3 hostsËÆæÁΩÆ</h3>
<h4 id="131-ÈÄöËøáhostsÊñá‰ª∂ÈÖçÁΩÆ">1.3.1 ÈÄöËøáhostsÊñá‰ª∂ÈÖçÁΩÆ</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">>></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/hosts</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x3C;&#x3C;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">EOF</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">172.19.82.157 master.k8s.local master</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">172.19.82.158 node01.k8s.local node01</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">172.19.82.159 node02.k8s.local node02</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">EOF</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÊµãËØïÁΩëÁªúËøûÈÄö</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">in</span><span style="--0:#D6DEEB;--1:#403F53"> master node01 node02; </span><span style="--0:#C792EA;--1:#8D46B4">do</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">ping</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-c</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$i</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#C792EA;--1:#8D46B4">done</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cat >> /etc/hosts << EOF172.19.82.157 master.k8s.local master172.19.82.158 node01.k8s.local node01172.19.82.159 node02.k8s.local node02EOFfor i in master node01 node02; do ping -c 2 $i; done"><div></div></button></div></figure></div>
<h4 id="132-‰ΩøÁî®bind9-dnsÂ∑•ÂÖ∑">1.3.2 ‰ΩøÁî®bind9 DNSÂ∑•ÂÖ∑</h4>
<p>‚Ñπ‰ªÖÂú®‰∏ÄÂè∞Êú∫Âô®‰∏äÂÆâË£Öbind9Âç≥ÂèØÔºåÊàëËøôÈáåÈÄâÊã©masterËäÇÁÇπÔºåÂ¶ÇÊûúÊúâÈ´òÂèØÁî®ÈúÄÊ±ÇÁöÑËØùÂèØ‰ª•ÂÆâË£ÖÂ§ö‰∏™bindÂÅöÈõÜÁæ§„ÄÇ</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÂÆâË£Öbind9 DNSÂ∑•ÂÖ∑</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">apt</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">bind9</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">dnsutils</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-y</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="apt install bind9 dnsutils -y"><div></div></button></div></figure></div>
<p>‰øÆÊîπÈÖçÁΩÆÔºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/bind/named.conf.options</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÂÜÖÂÆπÂ¶Ç‰∏ã(Âà†Êéâ‰∫ÜÈÉ®ÂàÜÊ≥®Èáä)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">options</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">directory</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">/var/cache/bind</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">//</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ÂΩìDNSËß£Êûê‰∏çÂà∞Êó∂ÔºåËΩ¨ÂèëÁªôÂÖ∂‰ªñDNSÊúçÂä°Âô®</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">forwarders</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#82AAFF;--1:#3C63B3">8.8.8.8</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">};</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">dnssec-validation</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">auto</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">listen-on-v6</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">any</span><span style="--0:#D6DEEB;--1:#403F53">; };</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">};</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="vim /etc/bind/named.conf.optionsoptions {        directory &#x22;/var/cache/bind&#x22;;        // ÂΩìDNSËß£Êûê‰∏çÂà∞Êó∂ÔºåËΩ¨ÂèëÁªôÂÖ∂‰ªñDNSÊúçÂä°Âô®        forwarders {                8.8.8.8;        };        dnssec-validation auto;        listen-on-v6 { any; };};"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230822111122.png" alt="image.png">
ÈÖçÁΩÆËß£ÊûêÂüü‰ª•ÂèäÊ®°ÊùøÊñá‰ª∂Ôºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÈÖçÁΩÆËß£ÊûêÂüü</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/bind/named.conf.default-zones</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">//</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">Ê≠£ÂêëËß£ÊûêÂüü</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">zone</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">k8s.local</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">IN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C5E478;--1:#3C63B3">type</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">master</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">file</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">/etc/bind/db.k8s.local</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">};</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">//</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ÂèçÂêëËß£ÊûêÂüü</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">zone</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">82.19.172.in-addr.zrpa</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">IN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C5E478;--1:#3C63B3">type</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">master</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">file</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">/etc/bind/db.in-addr.k8s.local</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">};</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Â§çÂà∂Ê®°ÁâàÊñá‰ª∂</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cp</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-a</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/bind/db.local</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/bind/db.k8s.local</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cp</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-a</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/bind/db.127</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/bind/db.in-addr.k8s.local</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÈÖçÁΩÆÊ≠£ÂêëËß£ÊûêÊñá‰ª∂</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/bind/db.k8s.local</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">$TTL</span><span style="--0:#D6DEEB;--1:#403F53">    604800</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">@</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#ECC48D;--1:#3C63B3">IN</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">SOA</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">dns.k8s.local.</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">k8s.local.</span><span style="--0:#D6DEEB;--1:#403F53"> (</span></div></div><div class="ec-line"><div class="code"><span class="indent">                              </span><span style="--0:#82AAFF;--1:#3C63B3">2</span><span style="--0:#D6DEEB;--1:#403F53">         ; </span><span style="--0:#82AAFF;--1:#3C63B3">Serial</span></div></div><div class="ec-line"><div class="code"><span class="indent">                         </span><span style="--0:#82AAFF;--1:#3C63B3">604800</span><span style="--0:#D6DEEB;--1:#403F53">         ; </span><span style="--0:#82AAFF;--1:#3C63B3">Refresh</span></div></div><div class="ec-line"><div class="code"><span class="indent">                          </span><span style="--0:#82AAFF;--1:#3C63B3">86400</span><span style="--0:#D6DEEB;--1:#403F53">         ; </span><span style="--0:#82AAFF;--1:#3C63B3">Retry</span></div></div><div class="ec-line"><div class="code"><span class="indent">                        </span><span style="--0:#82AAFF;--1:#3C63B3">2419200</span><span style="--0:#D6DEEB;--1:#403F53">         ; </span><span style="--0:#82AAFF;--1:#3C63B3">Expire</span></div></div><div class="ec-line"><div class="code"><span class="indent">                         </span><span style="--0:#82AAFF;--1:#3C63B3">604800</span><span style="--0:#D6DEEB;--1:#403F53"> )       ; </span><span style="--0:#82AAFF;--1:#3C63B3">Negative</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">Cache</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">TTL</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">@</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#ECC48D;--1:#3C63B3">IN</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">NS</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">dns.k8s.local.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">dns</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">IN</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">A</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#F78C6C;--1:#AA0982">172.19</span><span style="--0:#ECC48D;--1:#3C63B3">.82.157</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">master</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3C63B3">IN</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">A</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#F78C6C;--1:#AA0982">172.19</span><span style="--0:#ECC48D;--1:#3C63B3">.82.157</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">node01</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3C63B3">IN</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">A</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#F78C6C;--1:#AA0982">172.19</span><span style="--0:#ECC48D;--1:#3C63B3">.82.158</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">node02</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3C63B3">IN</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">A</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#F78C6C;--1:#AA0982">172.19</span><span style="--0:#ECC48D;--1:#3C63B3">.82.159</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÈÖçÁΩÆÂèçÂêëËß£ÊûêÊñá‰ª∂</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/bind/db.in-addr.k8s.local</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">$TTL</span><span style="--0:#D6DEEB;--1:#403F53">    604800</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">@</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#ECC48D;--1:#3C63B3">IN</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">SOA</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">dns.k8s.local.</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">k8s.local.</span><span style="--0:#D6DEEB;--1:#403F53"> (</span></div></div><div class="ec-line"><div class="code"><span class="indent">                              </span><span style="--0:#82AAFF;--1:#3C63B3">1</span><span style="--0:#D6DEEB;--1:#403F53">         ; </span><span style="--0:#82AAFF;--1:#3C63B3">Serial</span></div></div><div class="ec-line"><div class="code"><span class="indent">                         </span><span style="--0:#82AAFF;--1:#3C63B3">604800</span><span style="--0:#D6DEEB;--1:#403F53">         ; </span><span style="--0:#82AAFF;--1:#3C63B3">Refresh</span></div></div><div class="ec-line"><div class="code"><span class="indent">                          </span><span style="--0:#82AAFF;--1:#3C63B3">86400</span><span style="--0:#D6DEEB;--1:#403F53">         ; </span><span style="--0:#82AAFF;--1:#3C63B3">Retry</span></div></div><div class="ec-line"><div class="code"><span class="indent">                        </span><span style="--0:#82AAFF;--1:#3C63B3">2419200</span><span style="--0:#D6DEEB;--1:#403F53">         ; </span><span style="--0:#82AAFF;--1:#3C63B3">Expire</span></div></div><div class="ec-line"><div class="code"><span class="indent">                         </span><span style="--0:#82AAFF;--1:#3C63B3">604800</span><span style="--0:#D6DEEB;--1:#403F53"> )       ; </span><span style="--0:#82AAFF;--1:#3C63B3">Negative</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">Cache</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">TTL</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">@</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#ECC48D;--1:#3C63B3">IN</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">NS</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">dns.k8s.local.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">157</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">IN</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">PTR</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">k8s.local.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">157</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">IN</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">PTR</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">master.k8s.local.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">158</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">IN</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">PTR</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">node01.k8s.local.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">159</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">IN</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">PTR</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">node02.k8s.local.</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="vim /etc/bind/named.conf.default-zones// Ê≠£ÂêëËß£ÊûêÂüüzone &#x22;k8s.local&#x22; IN {        type master;        file &#x22;/etc/bind/db.k8s.local&#x22;;};// ÂèçÂêëËß£ÊûêÂüüzone &#x22;82.19.172.in-addr.zrpa&#x22; IN {        type master;        file &#x22;/etc/bind/db.in-addr.k8s.local&#x22;;};cp -a /etc/bind/db.local /etc/bind/db.k8s.localcp -a /etc/bind/db.127 /etc/bind/db.in-addr.k8s.localvim /etc/bind/db.k8s.local$TTL    604800@       IN      SOA     dns.k8s.local. k8s.local. (                              2         ; Serial                         604800         ; Refresh                          86400         ; Retry                        2419200         ; Expire                         604800 )       ; Negative Cache TTL;@       IN      NS      dns.k8s.local.dns     IN      A       172.19.82.157master  IN      A       172.19.82.157node01  IN      A       172.19.82.158node02  IN      A       172.19.82.159vim /etc/bind/db.in-addr.k8s.local$TTL    604800@       IN      SOA     dns.k8s.local. k8s.local. (                              1         ; Serial                         604800         ; Refresh                          86400         ; Retry                        2419200         ; Expire                         604800 )       ; Negative Cache TTL;@       IN      NS      dns.k8s.local.157     IN      PTR     k8s.local.157     IN      PTR     master.k8s.local.158     IN      PTR     node01.k8s.local.159     IN      PTR     node02.k8s.local."><div></div></button></div></figure></div>
<p>ÈáçÂêØÊúçÂä°ÂèäÊµãËØïÔºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">systemctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">restart</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">bind9</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ‰øÆÊîπ‰∏ªÊú∫ÁöÑÈ¶ñÈÄâDNSÂú∞ÂùÄ‰∏∫172.19.82.157</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/resolv.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">nameserver</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">172.19</span><span style="--0:#ECC48D;--1:#3C63B3">.82.157</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">nameserver</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8.8</span><span style="--0:#ECC48D;--1:#3C63B3">.8.8</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÊµãËØï</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">in</span><span style="--0:#D6DEEB;--1:#403F53"> master node01 node02; </span><span style="--0:#C792EA;--1:#8D46B4">do</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">dig</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">+short</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$i</span><span style="--0:#ECC48D;--1:#3C63B3">.k8s.local</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#C792EA;--1:#8D46B4">done</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Â∫îÂΩìËæìÂá∫ÔºåÊà™ÂõæÂ¶Ç‰∏ã</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">172.19.82.157</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">172.19.82.158</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">172.19.82.159</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="systemctl restart bind9cat /etc/resolv.confnameserver 172.19.82.157nameserver 8.8.8.8for i in master node01 node02; do dig +short $i.k8s.local; done172.19.82.157172.19.82.158172.19.82.159"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230822114543.png" alt="image.png"></p>
<h3 id="14-ÂèØÈÄâÂÆâË£Ösupervisor">1.4 ÔºàÂèØÈÄâÔºâÂÆâË£Ösupervisor</h3>
<p>ÂÆâË£ÖsupervisorÁÆÄÂçïÂÆûÁé∞ÊúçÂä°‚ÄúÈ´òÂèØÁî®‚Äù.
‚ÑπÈùûÂøÖÈ°ªÔºå‰ΩøÁî®systemdÊù•ÁÆ°ÁêÜ‰πüÂèØ‰ª•.</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span class="indent"> </span><span style="--0:#82AAFF;--1:#3C63B3">apt</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">supervisor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-y</span></div></div><div class="ec-line"><div class="code"><span class="indent"> </span><span style="--0:#809191;--1:#616671"># ËÆæÁΩÆ‰∏∫ÂºÄÊú∫Ëá™ÂêØÔºåÂπ∂ÂêØÂä®</span></div></div><div class="ec-line"><div class="code"><span class="indent"> </span><span style="--0:#82AAFF;--1:#3C63B3">systemctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">enable</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">supervisor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--now</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="apt install supervisor -y systemctl enable supervisor --now"><div></div></button></div></figure></div>
<h2 id="‰∫åÂÆâË£ÖcriÂÆπÂô®ËøêË°åÊó∂ÂèäharborÁßÅÊúâ‰ªì">‰∫å„ÄÅÂÆâË£ÖCRIÂÆπÂô®ËøêË°åÊó∂ÂèäharborÁßÅÊúâ‰ªì</h2>
<h3 id="21-ÂÆâË£Öcontainerd">2.1 ÂÆâË£Öcontainerd</h3>
<p>ÂÆâË£ÖÊñπÂºèÊúâÂ•ΩÂá†ÁßçÔºå‰∫åËøõÂà∂ÂÆâË£ÖÔºå‰ªìÂ∫ìÂÆâË£Ö‰ª•ÂèäÁºñËØëÂÆâË£Ö„ÄÇ</p>
<p>ËøôÈáåÊàë‰ΩøÁî®‰∫åËøõÂà∂ËøõË°åÂÆâË£ÖÔºå‰ªìÂ∫ìÂÆâË£ÖÂèÇËÄÉÔºö<a href="https://github.com/containerd/containerd/blob/main/docs/getting-started.md#option-2-from-apt-get-or-dnf">https://github.com/containerd/containerd/blob/main/docs/getting-started.md#option-2-from-apt-get-or-dnf</a>
üòÑ let‚Äôs go~</p>
<h4 id="211-Ê≠•È™§‰∏ÄÂÆâË£Öcontainerd">2.1.1 Ê≠•È™§‰∏ÄÂÆâË£Öcontainerd</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ‰ªéhttps://github.com/containerd/containerd/releasesÔºå‰∏ãËΩΩcontainerdÁöÑ‰∫åËøõÂà∂ÂåÖÔºåÊ≥®ÊÑèËΩØ‰ª∂ÂåÖÊû∂ÊûÑ.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">wget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://github.com/containerd/containerd/releases/download/v1.6.23/containerd-1.6.23-linux-amd64.tar.gz</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tar</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">Cxzvf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">containerd-1.6.23-linux-amd64.tar.gz</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÂÆâË£ÖserviceÊúçÂä°</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">wget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-O</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/lib/systemd/system/containerd.service</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://raw.githubusercontent.com/containerd/containerd/main/containerd.service</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÈáçËΩΩÂπ∂ÂêØÂä®ÊúçÂä°ÔºåËÆæÁΩÆ‰∏∫ÂºÄÊú∫Ëá™ÂêØÂä®</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">systemctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">daemon-reload</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">systemctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">enable</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">containerd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--now</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="wget https://github.com/containerd/containerd/releases/download/v1.6.23/containerd-1.6.23-linux-amd64.tar.gztar Cxzvf /usr/local containerd-1.6.23-linux-amd64.tar.gzwget -O /lib/systemd/system/containerd.service https://raw.githubusercontent.com/containerd/containerd/main/containerd.servicesystemctl daemon-reloadsystemctl enable containerd --now"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230822131441.png" alt="image.png"></p>
<h4 id="212-Ê≠•È™§‰∫åÂÆâË£Örunc">2.1.2 Ê≠•È™§‰∫åÂÆâË£ÖrunC</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span class="indent"> </span><span style="--0:#82AAFF;--1:#3C63B3">wget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://github.com/opencontainers/runc/releases/download/v1.1.9/runc.amd64</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-m</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">755</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">runc.amd64</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/sbin/runc</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="wget https://github.com/opencontainers/runc/releases/download/v1.1.9/runc.amd64install -m 755 runc.amd64 /usr/local/sbin/runc"><div></div></button></div></figure></div>
<h4 id="213-Ê≠•È™§‰∏âÂÆâË£ÖcniÊèí‰ª∂">2.1.3 Ê≠•È™§‰∏âÂÆâË£ÖCNIÊèí‰ª∂</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">wget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://github.com/containernetworking/plugins/releases/download/v1.3.0/cni-plugins-linux-amd64-v1.3.0.tgz</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># tar Cxzvf /usr/local/bin cni-plugins-linux-amd64-v1.3.0.tgz</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tar</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">Cxzvf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/opt/cni/bin</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cni-plugins-linux-amd64-v1.3.0.tgz</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="wget https://github.com/containernetworking/plugins/releases/download/v1.3.0/cni-plugins-linux-amd64-v1.3.0.tgztar Cxzvf /opt/cni/bin cni-plugins-linux-amd64-v1.3.0.tgz"><div></div></button></div></figure></div>
<h4 id="214-ÈÖçÁΩÆcontainerd‰ΩøÁî®systemd-cgroupÈ©±Âä®">2.1.4 ÈÖçÁΩÆcontainerd‰ΩøÁî®systemd cgroupÈ©±Âä®</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÁîüÊàêÈªòËÆ§ÁöÑÈÖçÁΩÆÊñá‰ª∂</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">containerd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">tee</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/containerd/config.toml</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="containerd config default | tee /etc/containerd/config.toml"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230822132245.png" alt="image.png">
Â§ßÊ¶ÇÁ¨¨125Ë°åÔºå‰øÆÊîπ   <code dir="auto">SystemdCgroup</code> ‰∏∫<code dir="auto">true</code>.</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/containerd/config.toml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ‰øÆÊîπÈªòËÆ§ÁöÑpauseÂÆπÂô®ÈïúÂÉèÂú∞ÂùÄ‰∏∫ÈòøÈáå‰∫ëÂõΩÂÜÖÊ∫ê</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">sandbox_image</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.9</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="vim /etc/containerd/config.tomlsandbox_image = &#x22;registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.9&#x22;"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230822132616.png" alt="image.png">
Â§ßÊ¶ÇÁ¨¨61Ë°å„ÄÇ
‰øÆÊîπÂÆå‰øùÂ≠ò‰πãÂêéÔºåÈáçÂêØ<code dir="auto">systemctl restart containerd</code>.
Ê£ÄÊü•ËøêË°åÁä∂ÊÄÅÔºö
<img src="https://cdn.agou-ops.cn/others/20230822132807.png" alt="image.png"></p>
<h4 id="215-ÂÆâË£ÖcrictlÂÆ¢Êà∑Á´ØÂ∑•ÂÖ∑">2.1.5 ÂÆâË£ÖcrictlÂÆ¢Êà∑Á´ØÂ∑•ÂÖ∑</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">wget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://github.com/kubernetes-sigs/cri-tools/releases/download/v1.28.0/crictl-v1.28.0-linux-amd64.tar.gz</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tar</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">xf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">crictl-v1.28.0-linux-amd64.tar.gz</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-C</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/bin</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÁºñÂÜôÈªòËÆ§ÈÖçÁΩÆÊñá‰ª∂ÔºåÊñπ‰æøÂÆ¢Êà∑Á´Ø‰ΩøÁî®</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">bash</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-c</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">cat > /etc/crictl.yaml</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#7FDBCA;--1:#097174">&#x3C;&#x3C;</span><span style="--0:#D9F5DD;--1:#111111">EOF</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">runtime-endpoint: unix:///run/containerd/containerd.sock</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">image-endpoint: unix:///run/containerd/containerd.sock</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">timeout: 10</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">debug: false</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">EOF</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="wget https://github.com/kubernetes-sigs/cri-tools/releases/download/v1.28.0/crictl-v1.28.0-linux-amd64.tar.gztar xf crictl-v1.28.0-linux-amd64.tar.gz -C /usr/local/binbash -c &#x22;cat > /etc/crictl.yaml&#x22;  <<EOFruntime-endpoint: unix:///run/containerd/containerd.sockimage-endpoint: unix:///run/containerd/containerd.socktimeout: 10debug: falseEOF"><div></div></button></div></figure></div>
<p>Ê£ÄÊü•ÊòØÂê¶ÂÆâË£ÖÊàêÂäü<code dir="auto">crictl ps</code>
<img src="https://cdn.agou-ops.cn/others/20230822133349.png" alt="image.png"></p>
<h3 id="22-ÂÆâË£ÖharborÁßÅÊúâ‰ªì">2.2 ÂÆâË£ÖharborÁßÅÊúâ‰ªì</h3>
<p>harborÂª∫ËÆÆÈÉ®ÁΩ≤Âú®ÂÖ∂‰ªñ‰∏ªÊú∫‰∏äÔºåÊØîÂ¶ÇËØ¥‰∏ªÊéßÊú∫Ôºå‰∏ék8sÈõÜÁæ§ÂàÜÂâ≤ÂºÄÊù•ÔºåËøô‰∏™Èöè‰æøÔºåÁúã‰Ω†Ëá™Â∑±„ÄÇ</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ‰∏ãËΩΩÁ¶ªÁ∫øÂÆâË£ÖÂåÖ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">wget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://github.com/goharbor/harbor/releases/download/v2.8.4/harbor-offline-installer-v2.8.4.tgz</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tar</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">xzvf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">harbor-offline-installer-v2.8.4.tgz</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ËøêË°åÂÆâË£ÖÁ®ãÂ∫èÂç≥ÂèØ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">sudo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">./install.sh</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="wget https://github.com/goharbor/harbor/releases/download/v2.8.4/harbor-offline-installer-v2.8.4.tgztar xzvf harbor-offline-installer-v2.8.4.tgzsudo ./install.sh"><div></div></button></div></figure></div>
<p>ÂêéÁª≠Ê≠•È™§Áï•.</p>
<h2 id="‰∏â‰ΩøÁî®cfsslÁîüÊàêËØÅ‰π¶">‰∏â„ÄÅ‰ΩøÁî®cfsslÁîüÊàêËØÅ‰π¶</h2>
<h3 id="31-ÂÆâË£Öcfssl">3.1 ÂÆâË£Öcfssl</h3>
<p>‚ÑπÂú®masterËäÇÁÇπÊàñËÄÖ‰∏ªÊéßÊú∫ÔºàÂ¶ÇÊûúÊúâÁöÑËØùÔºâ‰∏äÂÆâË£ÖcfsslÂç≥ÂèØÔºåÂÖ∂‰ªñ‰∏ªÊú∫‰∏çÈúÄË¶Å„ÄÇ</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">wget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://github.com/cloudflare/cfssl/releases/download/v1.6.4/cfssl_1.6.4_linux_amd64</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">wget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://github.com/cloudflare/cfssl/releases/download/v1.6.4/cfssljson_1.6.4_linux_amd64</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">wget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://github.com/cloudflare/cfssl/releases/download/v1.6.4/cfssl-certinfo_1.6.4_linux_amd64</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-m</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">755</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cfssl_1.6.4_linux_amd64</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/bin/cfssl</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-m</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">755</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cfssljson_1.6.4_linux_amd64</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/bin/cfssl-json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-m</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">755</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cfssl-certinfo_1.6.4_linux_amd64</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/bin/cfssl-certinfo</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="wget https://github.com/cloudflare/cfssl/releases/download/v1.6.4/cfssl_1.6.4_linux_amd64wget https://github.com/cloudflare/cfssl/releases/download/v1.6.4/cfssljson_1.6.4_linux_amd64wget https://github.com/cloudflare/cfssl/releases/download/v1.6.4/cfssl-certinfo_1.6.4_linux_amd64install -m 755 cfssl_1.6.4_linux_amd64 /usr/local/bin/cfsslinstall -m 755 cfssljson_1.6.4_linux_amd64 /usr/local/bin/cfssl-jsoninstall -m 755 cfssl-certinfo_1.6.4_linux_amd64 /usr/local/bin/cfssl-certinfo"><div></div></button></div></figure></div>
<p>Ê£ÄÊü•ÂÆâË£ÖÔºö
<img src="https://cdn.agou-ops.cn/others/20230822134549.png" alt="image.png"></p>
<h3 id="32-ÂàùÂßãÂåñÂèäËØ¥Êòé">3.2 ÂàùÂßãÂåñÂèäËØ¥Êòé</h3>
<p>ÂàõÂª∫k8sÈõÜÁæ§ÂèäetcdÊâÄÈúÄË¶ÅÁöÑËØÅ‰π¶ÁõÆÂΩïÔºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ‰∏ãÈù¢‰∏Ä‰∏™ÂëΩ‰ª§‰∏â‰∏™‰∏ªÊú∫ÈÉΩÊâßË°å‰∏Ä‰∏ã„ÄÇ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-pv</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/{etcd,k8s}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="mkdir -pv /etc/kubernetes/TLS/{etcd,k8s}"><div></div></button></div></figure></div>
<p>ËØ¥ÊòéÔºö‰∏ÄÂÖ±ÂàõÂª∫‰∫Ü‰∏â‰∏™CAÔºåÂàÜÂà´Áî®‰∫éÔºö</p>
<ul>
<li>etcdÈõÜÁæ§</li>
<li>apiserver„ÄÅcontroller manager„ÄÅkubelet„ÄÅkube-schedulerÁ≠â</li>
<li>front-proxy</li>
</ul>
<h2 id="ÂõõÈÉ®ÁΩ≤masterËäÇÁÇπ">Âõõ„ÄÅÈÉ®ÁΩ≤masterËäÇÁÇπ</h2>
<h3 id="41-ÈÉ®ÁΩ≤etcdÈõÜÁæ§">4.1 ÈÉ®ÁΩ≤etcdÈõÜÁæ§</h3>
<h4 id="411-‰∏ãËΩΩÂÆâË£ÖetcdÂíåetcdctl‰∫åËøõÂà∂Êñá‰ª∂">4.1.1 ‰∏ãËΩΩÂÆâË£ÖetcdÂíåetcdctl‰∫åËøõÂà∂Êñá‰ª∂</h4>
<p>Êàë‰ª¨ÈúÄË¶ÅÂú®157Ôºå158Âíå159‰∏âÂè∞Êú∫Âô®‰∏≠ÈÉΩË£Ö‰∏äetcdÔºå‰ª•ÁªÑÊàêetcdÈõÜÁæ§Ôºå‰øùËØÅetcdÁöÑÈ´òÂèØÁî®„ÄÇ</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># 157Ôºå158Ôºå159Êú∫Âô®‰∏äÔºå‰πüÂ∞±ÊòØmasterÂíånode01„ÄÅnode02ËäÇÁÇπÊâßË°å‰ª•‰∏ãÂëΩ‰ª§</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÂàõÂª∫etcdÁî®Êà∑</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">useradd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-s</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/sbin/nologin</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-M</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">wget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://github.com/etcd-io/etcd/releases/download/v3.4.27/etcd-v3.4.27-linux-amd64.tar.gz</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tar</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">xf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd-v3.4.27-linux-amd64.tar.gz</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-C</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mv</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/etcd-v3.4.27-linux-amd64</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/etcd-v3.4.27</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÂàõÂª∫ËΩØËøûÊé•Êñπ‰æø‰ΩøÁî®</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">ln</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-sv</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/etcd-v3.4.27/etcd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/bin</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">ln</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-sv</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/etcd-v3.4.27/etcdctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/bin</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="useradd -s /sbin/nologin -M etcdwget https://github.com/etcd-io/etcd/releases/download/v3.4.27/etcd-v3.4.27-linux-amd64.tar.gztar xf etcd-v3.4.27-linux-amd64.tar.gz -C /usr/localmv /usr/local/etcd-v3.4.27-linux-amd64 /usr/local/etcd-v3.4.27ln -sv /usr/local/etcd-v3.4.27/etcd /usr/local/binln -sv /usr/local/etcd-v3.4.27/etcdctl /usr/local/bin"><div></div></button></div></figure></div>
<p>Ê£ÄÊü•etcdÂÆâË£ÖÁªìÊûúÔºö
<img src="https://cdn.agou-ops.cn/others/20230822141125.png" alt="image.png"></p>
<h4 id="412-‰∏∫etcdÂà∂‰ΩúËØÅ‰π¶">4.1.2 ‰∏∫etcdÂà∂‰ΩúËØÅ‰π¶</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ‰ªÖÂú®master‰∏ªÊú∫‰∏äÊâßË°å</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/etcd</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca-config.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"signing"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"default"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">"expiry"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">87600h</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"profiles"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">"etcd"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">         </span><span style="--0:#82AAFF;--1:#3C63B3">"expiry"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">87600h</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">         </span><span style="--0:#82AAFF;--1:#3C63B3">"usages"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"signing"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"key encipherment"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"server auth"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"client auth"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"CN"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">etcd CA</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"key"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"algo"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">rsa</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"size"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2048</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"names"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"C"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">CN</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"L"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">HangZhou</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"ST"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">ZheJiang</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cfssl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">gencert</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-initca</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca-csr.json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">cfssl-json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-bare</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê£ÄÊü•caÁîüÊàêÁªìÊûúÔºåËßÅ‰∏ãÂõæ</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/etcd</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Â∞ÜÂèØËÉΩÁî®Âà∞ÁöÑIPÂä†Âà∞hostsÂ≠óÊÆµÈáåÈù¢„ÄÇ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd-server-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"CN"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">etcd</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"hosts"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"172.19.82.157"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"172.19.82.158"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"172.19.82.159"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"192.168.3.28"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"127.0.0.1"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"10.96.0.1"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">],</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"key"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"algo"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">rsa</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"size"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2048</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"names"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"C"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">CN</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"L"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">HangZhou</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"ST"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">ZheJiang</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ‰ΩøÁî®‰∏äÈù¢ÁöÑËá™Á≠æCAÁ≠æÂèëetcdËØÅ‰π¶</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cfssl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">gencert</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-ca=ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-ca-key=ca-key.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-config=ca-config.json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-profile=etcd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd-server-csr.json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">cfssl-json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-bare</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd-server</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cd /etc/kubernetes/TLS/etcdvim ca-config.json{  &#x22;signing&#x22;: {    &#x22;default&#x22;: {      &#x22;expiry&#x22;: &#x22;87600h&#x22;    },    &#x22;profiles&#x22;: {      &#x22;etcd&#x22;: {         &#x22;expiry&#x22;: &#x22;87600h&#x22;,         &#x22;usages&#x22;: [            &#x22;signing&#x22;,            &#x22;key encipherment&#x22;,            &#x22;server auth&#x22;,            &#x22;client auth&#x22;        ]      }    }  }}vim ca-csr.json{    &#x22;CN&#x22;: &#x22;etcd CA&#x22;,    &#x22;key&#x22;: {        &#x22;algo&#x22;: &#x22;rsa&#x22;,        &#x22;size&#x22;: 2048    },    &#x22;names&#x22;: [        {            &#x22;C&#x22;: &#x22;CN&#x22;,            &#x22;L&#x22;: &#x22;HangZhou&#x22;,            &#x22;ST&#x22;: &#x22;ZheJiang&#x22;        }    ]}cfssl gencert -initca ca-csr.json | cfssl-json -bare cacd /etc/kubernetes/TLS/etcdvim etcd-server-csr.json{    &#x22;CN&#x22;: &#x22;etcd&#x22;,    &#x22;hosts&#x22;: [        &#x22;172.19.82.157&#x22;,        &#x22;172.19.82.158&#x22;,        &#x22;172.19.82.159&#x22;,        &#x22;192.168.3.28&#x22;,        &#x22;127.0.0.1&#x22;,        &#x22;10.96.0.1&#x22;    ],    &#x22;key&#x22;: {        &#x22;algo&#x22;: &#x22;rsa&#x22;,        &#x22;size&#x22;: 2048    },    &#x22;names&#x22;: [        {            &#x22;C&#x22;: &#x22;CN&#x22;,            &#x22;L&#x22;: &#x22;HangZhou&#x22;,            &#x22;ST&#x22;: &#x22;ZheJiang&#x22;        }    ]}cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=etcd etcd-server-csr.json | cfssl-json -bare etcd-server"><div></div></button></div></figure></div>
<p>ÈÖçÁΩÆÊñá‰ª∂Â≠óÊÆµËß£ÈáäÔºö</p>
<blockquote>
<ul>
<li>CNÔºöCommon NameÔºåÊµèËßàÂô®‰ΩøÁî®ËØ•Â≠óÊÆµÈ™åËØÅÁΩëÂùÄÊòØÂê¶ÂêàÊ≥ïÔºå‰∏ÄËà¨ÂÜôÂüüÂêçÔºåÈùûÂ∏∏ÈáçË¶Å</li>
<li>STÔºöStateÔºåÁúÅ</li>
<li>LÔºöLocalityÔºåÂú∞Âå∫</li>
<li>OÔºöOrganization NameÔºåÁªÑÁªáÂêçÁß∞</li>
<li>OUÔºöOrganization Unit NameÔºåÁªÑÁªáÂçï‰ΩçÂêçÁß∞</li>
</ul>
</blockquote>
<p>Ê£ÄÊü•CAÁîüÊàêÁªìÊûúÔºö
<img src="https://cdn.agou-ops.cn/others/20230823104905.png" alt="image.png"></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">ca-config.jsonËß£ÊûêÔºö</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="ca-config.jsonËß£ÊûêÔºö"><div></div></button></div></figure></div>
<blockquote>
<p>expiryÔºöÊúâÊïàÊúü‰∏∫200Âπ¥
profiles-serverÔºöÂêØÂä®serverÁöÑÊó∂ÂÄôÈúÄË¶ÅÈÖçÁΩÆËØÅ‰π¶
profiles-clientÔºöclientÂéªËøûÊé•serverÁöÑÊó∂ÂÄôÈúÄË¶ÅËØÅ‰π¶
profiles-peerÔºöÂèåÂêëËØÅ‰π¶ÔºåÊúçÂä°Á´ØÊâæÂÆ¢Êà∑Á´ØÈúÄË¶ÅËØÅ‰π¶ÔºåÂÆ¢Êà∑Á´ØÊâæÊúçÂä°Á´ØÈúÄË¶ÅËØÅ‰π¶
etcd-peer-csrËß£ÊûêÔºö</p>
<p>hostsÔºöetcdÊúâÂèØËÉΩÈÉ®ÁΩ≤Âà∞Âì™‰∫õÁªÑ‰ª∂ÁöÑIPÈÉΩË¶ÅÂ°´ËøõÊù•
cfssl gencertÔºöÁîüÊàêËØÅ‰π¶
<img src="https://cdn.agou-ops.cn/others/20230823105545.png" alt="image.png"></p>
</blockquote>
<h4 id="413-ÈÖçÁΩÆÂèäÂêØÂä®etcdÈõÜÁæ§">4.1.3 ÈÖçÁΩÆÂèäÂêØÂä®etcdÈõÜÁæ§</h4>
<p>Â§çÂà∂ËØÅ‰π¶Êñá‰ª∂Ôºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Â§çÂà∂3.3‰∏≠ÁîüÊàêÁöÑËØÅ‰π¶Âà∞certsÁõÆÂΩïÔºåÊ≥®ÊÑèÔºå‰∏â‰∏™‰∏ªÊú∫ÈÉΩË¶ÅÊâßË°å</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># node01ÔºåËá™Â∑±ÂÅöÂÖçÂØÜÂì¶ÔºåËøôÈáåÂ∞±‰∏çÊïô‰∫Ü„ÄÇ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">scp</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-r</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">master:/etc/kubernetes/TLS/etcd/</span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#ECC48D;--1:#3C63B3">.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/etcd</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># node02</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">scp</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-r</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">master:/etc/kubernetes/TLS/etcd/</span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#ECC48D;--1:#3C63B3">.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/etcd</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="scp -r master:/etc/kubernetes/TLS/etcd/*.pem /etc/kubernetes/TLS/etcdscp -r master:/etc/kubernetes/TLS/etcd/*.pem /etc/kubernetes/TLS/etcd"><div></div></button></div></figure></div>
<p>ÁºñÂÜôÂêØÂä®ËÑöÊú¨Ôºö
‚ö†Ê≥®ÊÑè‰ª•‰∏ãËÑöÊú¨‰∏≠Ôºånode01Ôºà158ÔºâÔºånode02Ôºà159Ôºâ‰∏ªÊú∫‰∏äÈÉΩË¶Å‰øÆÊîπÂØπÂ∫îÁöÑÁõëÂê¨Âú∞ÂùÄÔºå‰∏çËÉΩÁÖßÊê¨.
ÈúÄË¶Å‰øÆÊîπÁöÑÂú∞ÊñπÊúâ‰ª•‰∏ã‰∫îÂ§ÑÔºö</p>
<ul>
<li><code dir="auto">--name</code></li>
<li><code dir="auto">--advertise-client-urls </code></li>
<li><code dir="auto">--initial-advertise-peer-urls</code></li>
<li><code dir="auto">--listen-peer-urls</code></li>
<li><code dir="auto">--listen-client-urls</code></li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Âú®157 master‰∏ªÊú∫‰∏ä</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/etcd-v3.4.27/etcd-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#!/usr/bin/env sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./etcd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--name=etcd-server-157</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--advertise-client-urls=https://172.19.82.157:2379</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--cert-file=/etc/kubernetes/TLS/etcd/etcd-server.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--client-cert-auth=true</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--data-dir=/data/etcd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--experimental-initial-corrupt-check=true</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--experimental-watch-progress-notify-interval=5s</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--initial-advertise-peer-urls=https://172.19.82.157:2380</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--initial-cluster=etcd-server-157=https://172.19.82.157:2380,etcd-server-158=https://172.19.82.158:2380,etcd-server-159=https://172.19.82.159:2380</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--key-file=/etc/kubernetes/TLS/etcd/etcd-server-key.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--listen-client-urls=https://127.0.0.1:2379,https://172.19.82.157:2379</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--listen-metrics-urls=http://127.0.0.1:2381</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--listen-peer-urls=https://172.19.82.157:2380</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--peer-cert-file=/etc/kubernetes/TLS/etcd/etcd-server.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--peer-client-cert-auth=true</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--peer-key-file=/etc/kubernetes/TLS/etcd/etcd-server-key.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--peer-trusted-ca-file=/etc/kubernetes/TLS/etcd/ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--snapshot-count=10000</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--trusted-ca-file=/etc/kubernetes/TLS/etcd/ca.pem</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="# Âú®157 master‰∏ªÊú∫‰∏ävim /usr/local/etcd-v3.4.27/etcd-startup.sh#!/usr/bin/env sh./etcd --name=etcd-server-157 \  --advertise-client-urls=https://172.19.82.157:2379 \  --cert-file=/etc/kubernetes/TLS/etcd/etcd-server.pem \  --client-cert-auth=true \  --data-dir=/data/etcd \  --experimental-initial-corrupt-check=true \  --experimental-watch-progress-notify-interval=5s \  --initial-advertise-peer-urls=https://172.19.82.157:2380 \  --initial-cluster=etcd-server-157=https://172.19.82.157:2380,etcd-server-158=https://172.19.82.158:2380,etcd-server-159=https://172.19.82.159:2380 \  --key-file=/etc/kubernetes/TLS/etcd/etcd-server-key.pem \  --listen-client-urls=https://127.0.0.1:2379,https://172.19.82.157:2379 \  --listen-metrics-urls=http://127.0.0.1:2381 \  --listen-peer-urls=https://172.19.82.157:2380 \  --peer-cert-file=/etc/kubernetes/TLS/etcd/etcd-server.pem \  --peer-client-cert-auth=true \  --peer-key-file=/etc/kubernetes/TLS/etcd/etcd-server-key.pem \  --peer-trusted-ca-file=/etc/kubernetes/TLS/etcd/ca.pem \  --snapshot-count=10000 \  --trusted-ca-file=/etc/kubernetes/TLS/etcd/ca.pem"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230823111335.png" alt="image.png">
‰øÆÊîπËÑöÊú¨ÂèäÁõÆÂΩïÊùÉÈôêÔºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">chmod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">+x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/etcd-v3.4.27/etcd-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">chown</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-R</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd:etcd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/etcd-v3.4.27/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">chown</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-R</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd:etcd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/etcd/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">chown</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-R</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd:etcd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/logs/etcd-server/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">chown</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-R</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd:etcd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/etcd/</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="chmod +x /usr/local/etcd-v3.4.27/etcd-startup.shchown -R etcd:etcd /usr/local/etcd-v3.4.27/chown -R etcd:etcd /data/etcd/chown -R etcd:etcd /data/logs/etcd-server/chown -R etcd:etcd /etc/kubernetes/TLS/etcd/"><div></div></button></div></figure></div>
<p>ÂàõÂª∫supervisorÈÖçÁΩÆÊñá‰ª∂Ôºö
‰∏â‰∏™‰∏ªÊú∫ÈÉΩÂæóÊâßË°åÔºå‰∏çÂêå‰∏ªÊú∫Âè™ÈúÄË¶Å‰øÆÊîπ‰∏ã<code dir="auto">[program:etcd-server-157]</code>Ëøô‰∏™Âç≥ÂèØÔºåÊç¢Êàê158Âíå159.</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/supervisor/conf.d/etcd-server.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[program:etcd-server-157]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">command</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/etcd-v3.4.27/etcd-startup.sh</span><span style="--0:#D6DEEB;--1:#403F53">                 ; </span><span style="--0:#82AAFF;--1:#3C63B3">the</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">program</span><span style="--0:#D6DEEB;--1:#403F53"> (relative </span><span style="--0:#ECC48D;--1:#3C63B3">uses</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">PATH,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">can</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">take</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">args</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">numprocs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">                                                      ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">processes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">copies</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> (def </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">directory</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/etcd-v3.4.27</span><span style="--0:#D6DEEB;--1:#403F53">                               ; </span><span style="--0:#82AAFF;--1:#3C63B3">directory</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cwd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">before</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">exec</span><span style="--0:#D6DEEB;--1:#403F53"> (def </span><span style="--0:#ECC48D;--1:#3C63B3">no</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cwd</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">autostart</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                  ; </span><span style="--0:#82AAFF;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">at</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">supervisord</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> (default: </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">autorestart</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                ; </span><span style="--0:#82AAFF;--1:#3C63B3">retstart</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">at</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">unexpected</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">quit</span><span style="--0:#D6DEEB;--1:#403F53"> (default: </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">startsecs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">                                                    ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">secs</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">prog</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">must</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stay</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">running</span><span style="--0:#D6DEEB;--1:#403F53"> (def. </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">startretries</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">                                                  ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#809191;--1:#616671"># of serial start failures (default 3)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">exitcodes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#ECC48D;--1:#3C63B3">,2</span><span style="--0:#D6DEEB;--1:#403F53">                                                   ; </span><span style="--0:#82AAFF;--1:#3C63B3">'expected'</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">exit</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">codes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">process</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#ECC48D;--1:#3C63B3">,2</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stopsignal</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">QUIT</span><span style="--0:#D6DEEB;--1:#403F53">                                                 ; </span><span style="--0:#82AAFF;--1:#3C63B3">signal</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">used</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kill</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">process</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#ECC48D;--1:#3C63B3">TERM</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stopwaitsecs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">                                                 ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">num</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">secs</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">wait</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">b4</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">SIGKILL</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">user</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">etcd</span><span style="--0:#D6DEEB;--1:#403F53">                                                       ; </span><span style="--0:#82AAFF;--1:#3C63B3">setuid</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">this</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">UNIX</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">account</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">the</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">program</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">redirect_stderr</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                            ; </span><span style="--0:#82AAFF;--1:#3C63B3">redirect</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">proc</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stderr</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stdout</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/data/logs/etcd-server/etcd.stdout.log</span><span style="--0:#D6DEEB;--1:#403F53">           ; </span><span style="--0:#82AAFF;--1:#3C63B3">stdout</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">log</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">path,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">NONE</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">none</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#82AAFF;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">AUTO</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile_maxbytes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">64</span><span style="--0:#ECC48D;--1:#3C63B3">MB</span><span style="--0:#D6DEEB;--1:#403F53">                                    ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#809191;--1:#616671"># logfile bytes b4 rotation (default 50MB)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile_backups</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#D6DEEB;--1:#403F53">                                        ; </span><span style="--0:#809191;--1:#616671"># of stdout logfile backups (default 10)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_capture_maxbytes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">MB</span><span style="--0:#D6DEEB;--1:#403F53">                                     ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">bytes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">capturemode</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_events_enabled</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">                                     ; </span><span style="--0:#82AAFF;--1:#3C63B3">emit</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">events</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">on</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stdout</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">writes</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="vim /etc/supervisor/conf.d/etcd-server.conf[program:etcd-server-157]command=/usr/local/etcd-v3.4.27/etcd-startup.sh                 ; the program (relative uses PATH, can take args)numprocs=1                                                      ; number of processes copies to start (def 1)directory=/usr/local/etcd-v3.4.27                               ; directory to cwd to before exec (def no cwd)autostart=true                                                  ; start at supervisord start (default: true)autorestart=true                                                ; retstart at unexpected quit (default: true)startsecs=0                                                    ; number of secs prog must stay running (def. 1)startretries=3                                                  ; max # of serial start failures (default 3)exitcodes=0,2                                                   ; &#x27;expected&#x27; exit codes for process (default 0,2)stopsignal=QUIT                                                 ; signal used to kill process (default TERM)stopwaitsecs=10                                                 ; max num secs to wait b4 SIGKILL (default 10)user=etcd                                                       ; setuid to this UNIX account to run the programredirect_stderr=true                                            ; redirect proc stderr to stdout (default false)stdout_logfile=/data/logs/etcd-server/etcd.stdout.log           ; stdout log path, NONE for none; default AUTOstdout_logfile_maxbytes=64MB                                    ; max # logfile bytes b4 rotation (default 50MB)stdout_logfile_backups=4                                        ; # of stdout logfile backups (default 10)stdout_capture_maxbytes=1MB                                     ; number of bytes in &#x27;capturemode&#x27; (default 0)stdout_events_enabled=false                                     ; emit events on stdout writes (default false)"><div></div></button></div></figure></div>
<p>ÈáçËΩΩsupervisorÈÖçÁΩÆÊñá‰ª∂Ôºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">supervisorctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">update</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">supervisorctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">status</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="supervisorctl updatesupervisorctl status"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230822151410.png" alt="image.png">
‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§ÂèØ‰ª•Êü•ÁúãÈõÜÁæ§Áä∂ÊÄÅÔºàleaderÊòØË∞ÅÔºüÔºâ</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">etcdctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-w</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">table</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--cacert=/etc/kubernetes/TLS/etcd/ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--cert=/etc/kubernetes/TLS/etcd/etcd-server.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--key=/etc/kubernetes/TLS/etcd/etcd-server-key.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--endpoints</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://172.19.82.157:2379</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">endpoint</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">status</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--cluster</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="etcdctl -w table --cacert=/etc/kubernetes/TLS/etcd/ca.pem --cert=/etc/kubernetes/TLS/etcd/etcd-server.pem --key=/etc/kubernetes/TLS/etcd/etcd-server-key.pem --endpoints https://172.19.82.157:2379 endpoint status --cluster"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230823111655.png" alt="image.png"></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">etcdctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-w</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">table</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--cacert=/etc/kubernetes/TLS/etcd/ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--cert=/etc/kubernetes/TLS/etcd/etcd-server.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--key=/etc/kubernetes/TLS/etcd/etcd-server-key.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--endpoints</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://172.19.82.157:2379</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">member</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">list</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="etcdctl -w table --cacert=/etc/kubernetes/TLS/etcd/ca.pem --cert=/etc/kubernetes/TLS/etcd/etcd-server.pem --key=/etc/kubernetes/TLS/etcd/etcd-server-key.pem --endpoints https://172.19.82.157:2379 member list"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230823111723.png" alt="image.png"></p>
<h3 id="42-ÈÉ®ÁΩ≤api-server">4.2 ÈÉ®ÁΩ≤API server</h3>
<p>API serverÊàëÂ∞±‰∏çÂÅöÈõÜÁæ§‰∫ÜÔºàÂçïËäÇÁÇπÔºâÔºåÊñπÊ≥ïÂÖ∂ÂÆûÂíåetcdÂ§ßÂ∑Æ‰∏çÂ∑Æ.</p>
<h4 id="421-‰ΩøÁî®cfsslÁîüÊàêËØÅ‰π¶">4.2.1 ‰ΩøÁî®cfsslÁîüÊàêËØÅ‰π¶</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ËøôÈáåÁõ¥Êé•‰ΩøÁî®‰∏äÈù¢etcdÁöÑËá™Âª∫CAÔºåÂ¶ÇÊûúetcdÈÉ®ÁΩ≤Âà∞ÈõÜÁæ§‰πãÂ§ñÁöÑËØùÔºåÂèØ‰ª•ÈáçÊñ∞Âª∫‰∏™CA‰ª•‰ΩúÂå∫ÂàÜ„ÄÇ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># master‰∏ªÊú∫‰∏ä</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/k8s/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca-config.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"signing"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"default"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">"expiry"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">87600h</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"profiles"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">"kubernetes"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">         </span><span style="--0:#82AAFF;--1:#3C63B3">"expiry"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">87600h</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">         </span><span style="--0:#82AAFF;--1:#3C63B3">"usages"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"signing"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"key encipherment"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"server auth"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"client auth"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"CN"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">kubernetes</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"key"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"algo"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">rsa</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"size"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2048</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"names"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"C"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">CN</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"L"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">HangZhou</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"ST"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">ZheJiang</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"O"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">k8s</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"OU"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">System</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cfssl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">gencert</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-initca</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca-csr.json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">cfssl-json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-bare</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">-</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-apiserver-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"CN"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">kubernetes</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"hosts"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"127.0.0.1"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"kubernetes"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"kubernetes.default"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"kubernetes.default.svc"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"kubernetes.default.svc.cluster"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"kubernetes.default.svc.cluster.local"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"172.19.82.157"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"172.19.82.158"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"172.19.82.159"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"192.168.3.28"</span><span style="--0:#82AAFF;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"10.96.0.1"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">],</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"key"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"algo"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">rsa</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"size"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2048</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"names"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"C"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">CN</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"L"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">HangZhou</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"ST"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">ZheJiang</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"O"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">k8s</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">"OU"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">System</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cfssl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">gencert</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-ca=ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-ca-key=ca-key.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-config=ca-config.json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-profile=kubernetes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-apiserver-csr.json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">cfssl-json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-bare</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-apiserver</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÁîüÊàêsa keyÔºåÂêéÈù¢‰ºöÁî®Âà∞</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">openssl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">genrsa</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-out</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">sa.key</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2048</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">openssl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">rsa</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">sa.key</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-pubout</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-out</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">sa.pub</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">proxy-client</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">proxy-client</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">front-proxy-ca-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"CA"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"expiry"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#82AAFF;--1:#3C63B3">"87600h"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"CN"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">kubernetes</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"key"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">     </span><span style="--0:#82AAFF;--1:#3C63B3">"algo"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">rsa</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">     </span><span style="--0:#82AAFF;--1:#3C63B3">"size"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2048</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cfssl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">gencert</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-initca</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">front-proxy-ca-csr.json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">cfssl-json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-bare</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">front-proxy-ca</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">front-proxy-client-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"CN"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">front-proxy-client</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"key"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">     </span><span style="--0:#82AAFF;--1:#3C63B3">"algo"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">rsa</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">     </span><span style="--0:#82AAFF;--1:#3C63B3">"size"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2048</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cfssl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">gencert</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">-ca=front-proxy-ca.pem </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">-ca-key=front-proxy-ca-key.pem  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">-config=../ca-config.json   </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">-profile=kubernetes </span><span style="--0:#ECC48D;--1:#3C63B3">front-proxy-client-csr.json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">cfssl-json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-bare</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">front-proxy-client</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cd /etc/kubernetes/TLS/k8s/vim ca-config.json{  &#x22;signing&#x22;: {    &#x22;default&#x22;: {      &#x22;expiry&#x22;: &#x22;87600h&#x22;    },    &#x22;profiles&#x22;: {      &#x22;kubernetes&#x22;: {         &#x22;expiry&#x22;: &#x22;87600h&#x22;,         &#x22;usages&#x22;: [            &#x22;signing&#x22;,            &#x22;key encipherment&#x22;,            &#x22;server auth&#x22;,            &#x22;client auth&#x22;        ]      }    }  }}vim ca-csr.json{    &#x22;CN&#x22;: &#x22;kubernetes&#x22;,    &#x22;key&#x22;: {        &#x22;algo&#x22;: &#x22;rsa&#x22;,        &#x22;size&#x22;: 2048    },    &#x22;names&#x22;: [        {            &#x22;C&#x22;: &#x22;CN&#x22;,            &#x22;L&#x22;: &#x22;HangZhou&#x22;,            &#x22;ST&#x22;: &#x22;ZheJiang&#x22;,            &#x22;O&#x22;: &#x22;k8s&#x22;,            &#x22;OU&#x22;: &#x22;System&#x22;        }    ]}cfssl gencert -initca ca-csr.json | cfssl-json -bare ca -vim kube-apiserver-csr.json{    &#x22;CN&#x22;: &#x22;kubernetes&#x22;,    &#x22;hosts&#x22;: [        &#x22;127.0.0.1&#x22;,        &#x22;kubernetes&#x22;,        &#x22;kubernetes.default&#x22;,        &#x22;kubernetes.default.svc&#x22;,        &#x22;kubernetes.default.svc.cluster&#x22;,        &#x22;kubernetes.default.svc.cluster.local&#x22;,        &#x22;172.19.82.157&#x22;,        &#x22;172.19.82.158&#x22;,        &#x22;172.19.82.159&#x22;,        &#x22;192.168.3.28&#x22;,        &#x22;10.96.0.1&#x22;    ],    &#x22;key&#x22;: {        &#x22;algo&#x22;: &#x22;rsa&#x22;,        &#x22;size&#x22;: 2048    },    &#x22;names&#x22;: [        {            &#x22;C&#x22;: &#x22;CN&#x22;,            &#x22;L&#x22;: &#x22;HangZhou&#x22;,            &#x22;ST&#x22;: &#x22;ZheJiang&#x22;,            &#x22;O&#x22;: &#x22;k8s&#x22;,      &#x22;OU&#x22;: &#x22;System&#x22;        }    ]}cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-apiserver-csr.json | cfssl-json -bare kube-apiserveropenssl genrsa -out sa.key 2048openssl rsa -in sa.key -pubout -out sa.pubmkdir proxy-clientcd proxy-clientvim front-proxy-ca-csr.json{  &#x22;CA&#x22;:{    &#x22;expiry&#x22;:&#x22;87600h&#x22;  },  &#x22;CN&#x22;: &#x22;kubernetes&#x22;,  &#x22;key&#x22;: {     &#x22;algo&#x22;: &#x22;rsa&#x22;,     &#x22;size&#x22;: 2048  }}cfssl gencert -initca front-proxy-ca-csr.json | cfssl-json -bare front-proxy-cavim front-proxy-client-csr.json{  &#x22;CN&#x22;: &#x22;front-proxy-client&#x22;,  &#x22;key&#x22;: {     &#x22;algo&#x22;: &#x22;rsa&#x22;,     &#x22;size&#x22;: 2048  }}cfssl gencert \-ca=front-proxy-ca.pem \-ca-key=front-proxy-ca-key.pem  \-config=../ca-config.json   \-profile=kubernetes front-proxy-client-csr.json | cfssl-json -bare front-proxy-client"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230823114325.png" alt="image.png"></p>
<h4 id="422-ÈÉ®ÁΩ≤api-server">4.2.2 ÈÉ®ÁΩ≤api-server</h4>
<p>‰ªìÂ∫ìÂú∞ÂùÄÔºö<a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.25.md#v12512">https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.25.md#v12512</a></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">wget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://dl.k8s.io/v1.25.12/kubernetes-server-linux-amd64.tar.gz</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tar</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">xf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes-server-linux-amd64.tar.gz</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-C</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Âà†Èô§‰∏çÂøÖË¶ÅÁöÑÊ∫êÁ†ÅÂíåÊñá‰ª∂</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">rm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-f</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes-src.tar.gz</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">rm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-rf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">server/bin/</span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#ECC48D;--1:#3C63B3">.tar</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">rm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-rf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">server/bin/</span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#ECC48D;--1:#3C63B3">_tag</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†ËΩØËøûÊé•Êñπ‰æø‰ΩøÁî®</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">ln</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-sv</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/</span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/bin/</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="wget https://dl.k8s.io/v1.25.12/kubernetes-server-linux-amd64.tar.gztar xf kubernetes-server-linux-amd64.tar.gz -C /usr/local/cd /usr/local/kubernetesrm -f kubernetes-src.tar.gzrm -rf server/bin/*.tarrm -rf server/bin/*_tagln -sv /usr/local/kubernetes/server/bin/* /usr/local/bin/"><div></div></button></div></figure></div>
<p>ÂêØÂä®ËÑöÊú¨Ôºö</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kube-apiserver-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#!/usr/bin/env sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ‰∏ãÈù¢ÁöÑcertÂíåkeyÁªüÁªüÁî®‰∏ÄÂ•óÂ∞±Â•Ω‰∫Ü„ÄÇ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#!/usr/bin/env sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./kube-apiserver</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--v=2</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--logtostderr=true</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--allow-privileged=true</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--bind-address=172.19.82.157</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--secure-port=6443</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--advertise-address=157</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--service-cluster-ip-range=10.244.0.0/12</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--service-node-port-range=30000-40000</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--etcd-servers=https://172.19.82.157:2379,https://172.19.82.158:2379,https://172.19.82.159:2379</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--etcd-cafile=/etc/kubernetes/TLS/etcd/ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--etcd-certfile=/etc/kubernetes/TLS/etcd/etcd-server.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--etcd-keyfile=/etc/kubernetes/TLS/etcd/etcd-server-key.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--client-ca-file=/etc/kubernetes/TLS/k8s/ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--tls-cert-file=/etc/kubernetes/TLS/k8s/kube-apiserver.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--tls-private-key-file=/etc/kubernetes/TLS/k8s/kube-apiserver-key.pem</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--kubelet-client-certificate</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/k8s/kube-apiserver.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--kubelet-client-key</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/k8s/kube-apiserver-key.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--service-account-key-file</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/k8s/sa.pub</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--service-account-signing-key-file</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/k8s/sa.key</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--service-account-issuer</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">https://kubernetes.default.svc.cluster.local</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--kubelet-preferred-address-types</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">InternalIP,ExternalIP,Hostname</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--enable-admission-plugins</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,DefaultTolerationSeconds,NodeRestriction,ResourceQuota</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--authorization-mode</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">Node,RBAC</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--enable-bootstrap-token-auth</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--requestheader-client-ca-file</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/k8s/proxy-client/front-proxy-ca.pem</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--proxy-client-cert-file</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/k8s/proxy-client/front-proxy-client.pem</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--proxy-client-key-file</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/k8s/proxy-client/front-proxy-client-key.pem</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--requestheader-allowed-names</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">front-proxy-client</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--requestheader-group-headers</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">X-Remote-Group</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--requestheader-extra-headers-prefix</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">X-Remote-Extra-</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">--requestheader-username-headers</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">X-Remote-User</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">chmod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">+x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kube-apiserver-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-pv</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/logs/kubernetes/kube-apiserver</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="mkdir /etc/kubernetes/configvim /usr/local/kubernetes/server/bin/kube-apiserver-startup.sh#!/usr/bin/env sh# ‰∏ãÈù¢ÁöÑcertÂíåkeyÁªüÁªüÁî®‰∏ÄÂ•óÂ∞±Â•Ω‰∫Ü„ÄÇ#!/usr/bin/env sh./kube-apiserver \  --v=2  \  --logtostderr=true  \  --allow-privileged=true  \  --bind-address=172.19.82.157  \  --secure-port=6443  \  --advertise-address=157 \  --service-cluster-ip-range=10.244.0.0/12 \  --service-node-port-range=30000-40000  \  --etcd-servers=https://172.19.82.157:2379,https://172.19.82.158:2379,https://172.19.82.159:2379 \  --etcd-cafile=/etc/kubernetes/TLS/etcd/ca.pem \  --etcd-certfile=/etc/kubernetes/TLS/etcd/etcd-server.pem \  --etcd-keyfile=/etc/kubernetes/TLS/etcd/etcd-server-key.pem \  --client-ca-file=/etc/kubernetes/TLS/k8s/ca.pem \  --tls-cert-file=/etc/kubernetes/TLS/k8s/kube-apiserver.pem \  --tls-private-key-file=/etc/kubernetes/TLS/k8s/kube-apiserver-key.pem  --kubelet-client-certificate=/etc/kubernetes/TLS/k8s/kube-apiserver.pem \  --kubelet-client-key=/etc/kubernetes/TLS/k8s/kube-apiserver-key.pem \  --service-account-key-file=/etc/kubernetes/TLS/k8s/sa.pub  \  --service-account-signing-key-file=/etc/kubernetes/TLS/k8s/sa.key  \  --service-account-issuer=https://kubernetes.default.svc.cluster.local \  --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname  \  --enable-admission-plugins=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,DefaultTolerationSeconds,NodeRestriction,ResourceQuota  \  --authorization-mode=Node,RBAC  \  --enable-bootstrap-token-auth=true  \  --requestheader-client-ca-file=/etc/kubernetes/TLS/k8s/proxy-client/front-proxy-ca.pem  \  --proxy-client-cert-file=/etc/kubernetes/TLS/k8s/proxy-client/front-proxy-client.pem  \  --proxy-client-key-file=/etc/kubernetes/TLS/k8s/proxy-client/front-proxy-client-key.pem  \  --requestheader-allowed-names=front-proxy-client  \  --requestheader-group-headers=X-Remote-Group  \  --requestheader-extra-headers-prefix=X-Remote-Extra-  \  --requestheader-username-headers=X-Remote-Userchmod +x /usr/local/kubernetes/server/bin/kube-apiserver-startup.shmkdir -pv /data/logs/kubernetes/kube-apiserver"><div></div></button></div></figure></div>
<p>ÈÖçÁΩÆsupervisorÔºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/supervisor/conf.d/apiserver.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[program:apiserver-157]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">command</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kube-apiserver-startup.sh</span><span style="--0:#D6DEEB;--1:#403F53">                 ; </span><span style="--0:#82AAFF;--1:#3C63B3">the</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">program</span><span style="--0:#D6DEEB;--1:#403F53"> (relative </span><span style="--0:#ECC48D;--1:#3C63B3">uses</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">PATH,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">can</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">take</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">args</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">numprocs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">                                                      ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">processes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">copies</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> (def </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">directory</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin</span><span style="--0:#D6DEEB;--1:#403F53">                               ; </span><span style="--0:#82AAFF;--1:#3C63B3">directory</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cwd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">before</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">exec</span><span style="--0:#D6DEEB;--1:#403F53"> (def </span><span style="--0:#ECC48D;--1:#3C63B3">no</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cwd</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">autostart</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                  ; </span><span style="--0:#82AAFF;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">at</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">supervisord</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> (default: </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">autorestart</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                ; </span><span style="--0:#82AAFF;--1:#3C63B3">retstart</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">at</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">unexpected</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">quit</span><span style="--0:#D6DEEB;--1:#403F53"> (default: </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">startsecs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">                                                     ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">secs</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">prog</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">must</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stay</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">running</span><span style="--0:#D6DEEB;--1:#403F53"> (def. </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">startretries</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">                                                  ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#809191;--1:#616671"># of serial start failures (default 3)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">exitcodes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#ECC48D;--1:#3C63B3">,2</span><span style="--0:#D6DEEB;--1:#403F53">                                                   ; </span><span style="--0:#82AAFF;--1:#3C63B3">'expected'</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">exit</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">codes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">process</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#ECC48D;--1:#3C63B3">,2</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stopsignal</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">QUIT</span><span style="--0:#D6DEEB;--1:#403F53">                                                 ; </span><span style="--0:#82AAFF;--1:#3C63B3">signal</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">used</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kill</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">process</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#ECC48D;--1:#3C63B3">TERM</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stopwaitsecs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">                                                 ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">num</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">secs</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">wait</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">b4</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">SIGKILL</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">user</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">root</span><span style="--0:#D6DEEB;--1:#403F53">                                                       ; </span><span style="--0:#82AAFF;--1:#3C63B3">setuid</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">this</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">UNIX</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">account</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">the</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">program</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">redirect_stderr</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                            ; </span><span style="--0:#82AAFF;--1:#3C63B3">redirect</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">proc</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stderr</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stdout</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/data/logs/kubernetes/kube-apiserver/apiserver.stdout.log</span><span style="--0:#D6DEEB;--1:#403F53">           ; </span><span style="--0:#82AAFF;--1:#3C63B3">stdout</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">log</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">path,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">NONE</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">none</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#82AAFF;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">AUTO</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile_maxbytes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">64</span><span style="--0:#ECC48D;--1:#3C63B3">MB</span><span style="--0:#D6DEEB;--1:#403F53">                                    ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#809191;--1:#616671"># logfile bytes b4 rotation (default 50MB)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile_backups</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#D6DEEB;--1:#403F53">                                        ; </span><span style="--0:#809191;--1:#616671"># of stdout logfile backups (default 10)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_capture_maxbytes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">MB</span><span style="--0:#D6DEEB;--1:#403F53">                                     ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">bytes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">capturemode</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_events_enabled</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">                                     ; </span><span style="--0:#82AAFF;--1:#3C63B3">emit</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">events</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">on</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stdout</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">writes</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÈáçËΩΩsupervisorÈÖçÁΩÆÊñá‰ª∂</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">supervisorctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">update</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">ss</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-tnulp</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">grep</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">6443</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># output</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tcp</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">LISTEN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#F78C6C;--1:#AA0982">16384</span><span style="--0:#D6DEEB;--1:#403F53">                                </span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#ECC48D;--1:#3C63B3">:6443</span><span style="--0:#D6DEEB;--1:#403F53">             </span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#ECC48D;--1:#3C63B3">:</span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">users:</span><span style="--0:#D6DEEB;--1:#403F53">(("kube</span><span style="--0:#C792EA;--1:#8D46B4">-</span><span style="--0:#D6DEEB;--1:#403F53">apiserver"</span><span style="--0:#C792EA;--1:#8D46B4">,</span><span style="--0:#D6DEEB;--1:#403F53">pid</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">5989</span><span style="--0:#C792EA;--1:#8D46B4">,</span><span style="--0:#D6DEEB;--1:#403F53">fd</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">7</span><span style="--0:#D6DEEB;--1:#403F53">))</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="vim /etc/supervisor/conf.d/apiserver.conf[program:apiserver-157]command=/usr/local/kubernetes/server/bin/kube-apiserver-startup.sh                 ; the program (relative uses PATH, can take args)numprocs=1                                                      ; number of processes copies to start (def 1)directory=/usr/local/kubernetes/server/bin                               ; directory to cwd to before exec (def no cwd)autostart=true                                                  ; start at supervisord start (default: true)autorestart=true                                                ; retstart at unexpected quit (default: true)startsecs=0                                                     ; number of secs prog must stay running (def. 1)startretries=3                                                  ; max # of serial start failures (default 3)exitcodes=0,2                                                   ; &#x27;expected&#x27; exit codes for process (default 0,2)stopsignal=QUIT                                                 ; signal used to kill process (default TERM)stopwaitsecs=10                                                 ; max num secs to wait b4 SIGKILL (default 10)user=root                                                       ; setuid to this UNIX account to run the programredirect_stderr=true                                            ; redirect proc stderr to stdout (default false)stdout_logfile=/data/logs/kubernetes/kube-apiserver/apiserver.stdout.log           ; stdout log path, NONE for none; default AUTOstdout_logfile_maxbytes=64MB                                    ; max # logfile bytes b4 rotation (default 50MB)stdout_logfile_backups=4                                        ; # of stdout logfile backups (default 10)stdout_capture_maxbytes=1MB                                     ; number of bytes in &#x27;capturemode&#x27; (default 0)stdout_events_enabled=false                                     ; emit events on stdout writes (default false)supervisorctl updatess -tnulp  | grep 6443tcp   LISTEN 0      16384                                *:6443             *:*    users:((&#x22;kube-apiserver&#x22;,pid=5989,fd=7))"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230822170053.png" alt="image.png"></p>
<h3 id="43-ÈÉ®ÁΩ≤controller-manager">4.3 ÈÉ®ÁΩ≤controller-manager</h3>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/k8s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-controller-manager-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"CN"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">system:kube-controller-manager</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"hosts"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [],</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"key"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"algo"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">rsa</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"size"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2048</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"names"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"C"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">CN</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"L"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">HangZhou</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"ST"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">ZheJiang</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">"O"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">system:kube-controller-manager</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">"OU"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">System</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cfssl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">gencert</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-ca=ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-ca-key=ca-key.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-config=ca-config.json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-profile=kubernetes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-controller-manager-csr.json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">cfssl-json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-bare</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-controller-manager</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†ÈõÜÁæ§apiserver‰ø°ÊÅØ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-cluster</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--certificate-authority=/etc/kubernetes/TLS/k8s/ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--embed-certs=true</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--server=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">https://172.19.82.157:6443</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kube-controller-manager.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†ËØÅ‰π¶Êñá‰ª∂‰ø°ÊÅØ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-credentials</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">system:kube-controller-manager</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--client-certificate=/etc/kubernetes/TLS/k8s/kube-controller-manager.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--client-key=/etc/kubernetes/TLS/k8s/kube-controller-manager-key.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--embed-certs=true</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kube-controller-manager.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†Áî®Êà∑</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--cluster=kubernetes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--user=system:kube-controller-manager</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kube-controller-manager.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÊåáÂÆöÈªòËÆ§ÁöÑÈõÜÁæ§</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">use-context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kube-controller-manager.kubeconfig</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kube-controller-manager-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#!/usr/bin/env sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./kube-controller-manager</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--v=2</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--root-ca-file=/etc/kubernetes/TLS/k8s/ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--cluster-signing-cert-file=/etc/kubernetes/TLS/k8s/ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--cluster-signing-key-file=/etc/kubernetes/TLS/k8s/ca-key.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--service-account-private-key-file=/etc/kubernetes/TLS/k8s/sa.key</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kube-controller-manager.kubeconfig</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--leader-elect=true</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--use-service-account-credentials=true</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--node-monitor-grace-period=40s</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--node-monitor-period=5s</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--pod-eviction-timeout=2m0s</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--controllers=</span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#82AAFF;--1:#3C63B3">,bootstrapsigner,tokencleaner</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--allocate-node-cidrs=true</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--cluster-cidr=10.244.0.0/12</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--requestheader-client-ca-file=/etc/kubernetes/TLS/k8s/proxy-client/front-proxy-ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--node-cidr-mask-size=24</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">chmod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">+x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kube-controller-manager-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-pv</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/logs/kubernetes/kube-controller-manager/</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/supervisor/conf.d/controller-manager.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[program:kube-controller-manager-157]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">command</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kube-controller-manager-startup.sh</span><span style="--0:#D6DEEB;--1:#403F53">                     ; </span><span style="--0:#82AAFF;--1:#3C63B3">the</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">program</span><span style="--0:#D6DEEB;--1:#403F53"> (relative </span><span style="--0:#ECC48D;--1:#3C63B3">uses</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">PATH,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">can</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">take</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">args</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">numprocs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">                                                                        ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">processes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">copies</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> (def </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">directory</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin</span><span style="--0:#D6DEEB;--1:#403F53">                                              ; </span><span style="--0:#82AAFF;--1:#3C63B3">directory</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cwd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">before</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">exec</span><span style="--0:#D6DEEB;--1:#403F53"> (def </span><span style="--0:#ECC48D;--1:#3C63B3">no</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cwd</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">autostart</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                                    ; </span><span style="--0:#82AAFF;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">at</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">supervisord</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> (default: </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">autorestart</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                                  ; </span><span style="--0:#82AAFF;--1:#3C63B3">retstart</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">at</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">unexpected</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">quit</span><span style="--0:#D6DEEB;--1:#403F53"> (default: </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">startsecs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">30</span><span style="--0:#D6DEEB;--1:#403F53">                                                                      ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">secs</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">prog</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">must</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stay</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">running</span><span style="--0:#D6DEEB;--1:#403F53"> (def. </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">startretries</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">                                                                    ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#809191;--1:#616671"># of serial start failures (default 3)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">exitcodes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#ECC48D;--1:#3C63B3">,2</span><span style="--0:#D6DEEB;--1:#403F53">                                                                     ; </span><span style="--0:#82AAFF;--1:#3C63B3">'expected'</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">exit</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">codes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">process</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#ECC48D;--1:#3C63B3">,2</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stopsignal</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">QUIT</span><span style="--0:#D6DEEB;--1:#403F53">                                                                   ; </span><span style="--0:#82AAFF;--1:#3C63B3">signal</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">used</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kill</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">process</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#ECC48D;--1:#3C63B3">TERM</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stopwaitsecs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">                                                                   ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">num</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">secs</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">wait</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">b4</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">SIGKILL</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">user</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">root</span><span style="--0:#D6DEEB;--1:#403F53">                                                                         ; </span><span style="--0:#82AAFF;--1:#3C63B3">setuid</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">this</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">UNIX</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">account</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">the</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">program</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">redirect_stderr</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                              ; </span><span style="--0:#82AAFF;--1:#3C63B3">redirect</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">proc</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stderr</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stdout</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/data/logs/kubernetes/kube-controller-manager/controller.stdout.log</span><span style="--0:#D6DEEB;--1:#403F53">  ; </span><span style="--0:#82AAFF;--1:#3C63B3">stderr</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">log</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">path,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">NONE</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">none</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#82AAFF;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">AUTO</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile_maxbytes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">64</span><span style="--0:#ECC48D;--1:#3C63B3">MB</span><span style="--0:#D6DEEB;--1:#403F53">                                                      ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#809191;--1:#616671"># logfile bytes b4 rotation (default 50MB)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile_backups</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#D6DEEB;--1:#403F53">                                                          ; </span><span style="--0:#809191;--1:#616671"># of stdout logfile backups (default 10)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_capture_maxbytes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">MB</span><span style="--0:#D6DEEB;--1:#403F53">                                                       ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">bytes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">capturemode</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_events_enabled</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">                                                       ; </span><span style="--0:#82AAFF;--1:#3C63B3">emit</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">events</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">on</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stdout</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">writes</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cd /etc/kubernetes/TLS/k8svim kube-controller-manager-csr.json{  &#x22;CN&#x22;: &#x22;system:kube-controller-manager&#x22;,  &#x22;hosts&#x22;: [],  &#x22;key&#x22;: {    &#x22;algo&#x22;: &#x22;rsa&#x22;,    &#x22;size&#x22;: 2048  },    &#x22;names&#x22;: [        {            &#x22;C&#x22;: &#x22;CN&#x22;,            &#x22;L&#x22;: &#x22;HangZhou&#x22;,            &#x22;ST&#x22;: &#x22;ZheJiang&#x22;,      &#x22;O&#x22;: &#x22;system:kube-controller-manager&#x22;,      &#x22;OU&#x22;: &#x22;System&#x22;        }    ]}cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-controller-manager-csr.json | cfssl-json -bare kube-controller-managerkubectl config set-cluster kubernetes \  --certificate-authority=/etc/kubernetes/TLS/k8s/ca.pem \  --embed-certs=true \  --server=&#x22;https://172.19.82.157:6443&#x22; \  --kubeconfig=/etc/kubernetes/config/kube-controller-manager.kubeconfigkubectl config set-credentials system:kube-controller-manager \  --client-certificate=/etc/kubernetes/TLS/k8s/kube-controller-manager.pem \  --client-key=/etc/kubernetes/TLS/k8s/kube-controller-manager-key.pem \  --embed-certs=true \  --kubeconfig=/etc/kubernetes/config/kube-controller-manager.kubeconfigkubectl config set-context default \  --cluster=kubernetes \  --user=system:kube-controller-manager \  --kubeconfig=/etc/kubernetes/config/kube-controller-manager.kubeconfigkubectl config use-context default --kubeconfig=/etc/kubernetes/config/kube-controller-manager.kubeconfigvim /usr/local/kubernetes/server/bin/kube-controller-manager-startup.sh./kube-controller-manager \  --v=2 \  --root-ca-file=/etc/kubernetes/TLS/k8s/ca.pem \  --cluster-signing-cert-file=/etc/kubernetes/TLS/k8s/ca.pem \  --cluster-signing-key-file=/etc/kubernetes/TLS/k8s/ca-key.pem \  --service-account-private-key-file=/etc/kubernetes/TLS/k8s/sa.key \  --kubeconfig=/etc/kubernetes/config/kube-controller-manager.kubeconfig \  --leader-elect=true \  --use-service-account-credentials=true \  --node-monitor-grace-period=40s \  --node-monitor-period=5s \  --pod-eviction-timeout=2m0s \  --controllers=*,bootstrapsigner,tokencleaner \  --allocate-node-cidrs=true \  --cluster-cidr=10.244.0.0/12 \  --requestheader-client-ca-file=/etc/kubernetes/TLS/k8s/proxy-client/front-proxy-ca.pem \  --node-cidr-mask-size=24chmod +x /usr/local/kubernetes/server/bin/kube-controller-manager-startup.shmkdir -pv /data/logs/kubernetes/kube-controller-manager/vim /etc/supervisor/conf.d/controller-manager.conf[program:kube-controller-manager-157]command=/usr/local/kubernetes/server/bin/kube-controller-manager-startup.sh                     ; the program (relative uses PATH, can take args)numprocs=1                                                                        ; number of processes copies to start (def 1)directory=/usr/local/kubernetes/server/bin                                              ; directory to cwd to before exec (def no cwd)autostart=true                                                                    ; start at supervisord start (default: true)autorestart=true                                                                  ; retstart at unexpected quit (default: true)startsecs=30                                                                      ; number of secs prog must stay running (def. 1)startretries=3                                                                    ; max # of serial start failures (default 3)exitcodes=0,2                                                                     ; &#x27;expected&#x27; exit codes for process (default 0,2)stopsignal=QUIT                                                                   ; signal used to kill process (default TERM)stopwaitsecs=10                                                                   ; max num secs to wait b4 SIGKILL (default 10)user=root                                                                         ; setuid to this UNIX account to run the programredirect_stderr=true                                                              ; redirect proc stderr to stdout (default false)stdout_logfile=/data/logs/kubernetes/kube-controller-manager/controller.stdout.log  ; stderr log path, NONE for none; default AUTOstdout_logfile_maxbytes=64MB                                                      ; max # logfile bytes b4 rotation (default 50MB)stdout_logfile_backups=4                                                          ; # of stdout logfile backups (default 10)stdout_capture_maxbytes=1MB                                                       ; number of bytes in &#x27;capturemode&#x27; (default 0)stdout_events_enabled=false                                                       ; emit events on stdout writes (default false)"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230823134408.png" alt="image.png"></p>
<h3 id="44-ÈÉ®ÁΩ≤kube-scheduler">4.4 ÈÉ®ÁΩ≤kube-scheduler</h3>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/k8s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-scheduler-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"CN"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">system:kube-scheduler</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"hosts"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [],</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"key"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"algo"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">rsa</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"size"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2048</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"names"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"C"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">CN</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"L"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">HangZhou</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"ST"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">ZheJiang</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">"O"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">system:kube-scheduler</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">"OU"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">System</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cfssl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">gencert</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-ca=ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-ca-key=ca-key.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-config=ca-config.json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-profile=kubernetes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-scheduler-csr.json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">cfssl-json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-bare</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-scheduler</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†ÈõÜÁæ§apiserver‰ø°ÊÅØ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-cluster</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--certificate-authority=/etc/kubernetes/TLS/k8s/ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--embed-certs=true</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--server=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">https://172.19.82.157:6443</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kube-scheduler.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†ËØÅ‰π¶Êñá‰ª∂‰ø°ÊÅØ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-credentials</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">system:kube-scheduler</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--client-certificate=/etc/kubernetes/TLS/k8s/kube-scheduler.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--client-key=/etc/kubernetes/TLS/k8s/kube-scheduler-key.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--embed-certs=true</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kube-scheduler.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†Áî®Êà∑</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--cluster=kubernetes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--user=system:kube-scheduler</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kube-scheduler.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÊåáÂÆöÈªòËÆ§ÁöÑÈõÜÁæ§</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">use-context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kube-scheduler.kubeconfig</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kube-scheduler-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#!/usr/bin/env sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./kube-scheduler</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--v=2</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--leader-elect=true</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kube-scheduler.kubeconfig</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">chmod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">+x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kube-scheduler-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-pv</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/logs/kubernetes/kube-scheduler/</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/supervisor/conf.d/scheduler.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[program:kube-scheduler-157]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">command</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kube-scheduler-startup.sh</span><span style="--0:#D6DEEB;--1:#403F53">                   ; </span><span style="--0:#82AAFF;--1:#3C63B3">the</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">program</span><span style="--0:#D6DEEB;--1:#403F53"> (relative </span><span style="--0:#ECC48D;--1:#3C63B3">uses</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">PATH,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">can</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">take</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">args</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">numprocs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">                                                               ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">processes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">copies</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> (def </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">directory</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin</span><span style="--0:#D6DEEB;--1:#403F53">                                  ; </span><span style="--0:#82AAFF;--1:#3C63B3">directory</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cwd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">before</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">exec</span><span style="--0:#D6DEEB;--1:#403F53"> (def </span><span style="--0:#ECC48D;--1:#3C63B3">no</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cwd</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">autostart</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                           ; </span><span style="--0:#82AAFF;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">at</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">supervisord</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> (default: </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">autorestart</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                         ; </span><span style="--0:#82AAFF;--1:#3C63B3">retstart</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">at</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">unexpected</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">quit</span><span style="--0:#D6DEEB;--1:#403F53"> (default: </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">startsecs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">                                                             ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">secs</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">prog</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">must</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stay</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">running</span><span style="--0:#D6DEEB;--1:#403F53"> (def. </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">startretries</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">                                                           ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#809191;--1:#616671"># of serial start failures (default 3)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">exitcodes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#ECC48D;--1:#3C63B3">,2</span><span style="--0:#D6DEEB;--1:#403F53">                                                            ; </span><span style="--0:#82AAFF;--1:#3C63B3">'expected'</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">exit</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">codes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">process</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#ECC48D;--1:#3C63B3">,2</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stopsignal</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">QUIT</span><span style="--0:#D6DEEB;--1:#403F53">                                                          ; </span><span style="--0:#82AAFF;--1:#3C63B3">signal</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">used</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kill</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">process</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#ECC48D;--1:#3C63B3">TERM</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stopwaitsecs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">                                                          ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">num</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">secs</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">wait</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">b4</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">SIGKILL</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">user</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">root</span><span style="--0:#D6DEEB;--1:#403F53">                                                                ; </span><span style="--0:#82AAFF;--1:#3C63B3">setuid</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">this</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">UNIX</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">account</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">the</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">program</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">redirect_stderr</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                     ; </span><span style="--0:#82AAFF;--1:#3C63B3">redirect</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">proc</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stderr</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stdout</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/data/logs/kubernetes/kube-scheduler/scheduler.stdout.log</span><span style="--0:#D6DEEB;--1:#403F53"> ; </span><span style="--0:#82AAFF;--1:#3C63B3">stderr</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">log</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">path,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">NONE</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">none</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#82AAFF;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">AUTO</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile_maxbytes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">64</span><span style="--0:#ECC48D;--1:#3C63B3">MB</span><span style="--0:#D6DEEB;--1:#403F53">                                             ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#809191;--1:#616671"># logfile bytes b4 rotation (default 50MB)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile_backups</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#D6DEEB;--1:#403F53">                                                 ; </span><span style="--0:#809191;--1:#616671"># of stdout logfile backups (default 10)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_capture_maxbytes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">MB</span><span style="--0:#D6DEEB;--1:#403F53">                                              ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">bytes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">capturemode</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_events_enabled</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">                                              ; </span><span style="--0:#82AAFF;--1:#3C63B3">emit</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">events</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">on</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stdout</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">writes</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">supervisorctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">update</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cd /etc/kubernetes/TLS/k8svim kube-scheduler-csr.json{  &#x22;CN&#x22;: &#x22;system:kube-scheduler&#x22;,  &#x22;hosts&#x22;: [],  &#x22;key&#x22;: {    &#x22;algo&#x22;: &#x22;rsa&#x22;,    &#x22;size&#x22;: 2048  },  &#x22;names&#x22;: [        {            &#x22;C&#x22;: &#x22;CN&#x22;,            &#x22;L&#x22;: &#x22;HangZhou&#x22;,            &#x22;ST&#x22;: &#x22;ZheJiang&#x22;,      &#x22;O&#x22;: &#x22;system:kube-scheduler&#x22;,      &#x22;OU&#x22;: &#x22;System&#x22;        }  ]}cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-scheduler-csr.json | cfssl-json -bare kube-schedulerkubectl config set-cluster kubernetes \  --certificate-authority=/etc/kubernetes/TLS/k8s/ca.pem \  --embed-certs=true \  --server=&#x22;https://172.19.82.157:6443&#x22; \  --kubeconfig=/etc/kubernetes/config/kube-scheduler.kubeconfigkubectl config set-credentials system:kube-scheduler \  --client-certificate=/etc/kubernetes/TLS/k8s/kube-scheduler.pem \  --client-key=/etc/kubernetes/TLS/k8s/kube-scheduler-key.pem \  --embed-certs=true \  --kubeconfig=/etc/kubernetes/config/kube-scheduler.kubeconfigkubectl config set-context default \  --cluster=kubernetes \  --user=system:kube-scheduler \  --kubeconfig=/etc/kubernetes/config/kube-scheduler.kubeconfigkubectl config use-context default --kubeconfig=/etc/kubernetes/config/kube-scheduler.kubeconfigvim /usr/local/kubernetes/server/bin/kube-scheduler-startup.sh./kube-scheduler \  --v=2 \  --leader-elect=true \  --kubeconfig=/etc/kubernetes/config/kube-scheduler.kubeconfigchmod +x /usr/local/kubernetes/server/bin/kube-scheduler-startup.shmkdir -pv /data/logs/kubernetes/kube-scheduler/vim /etc/supervisor/conf.d/scheduler.conf[program:kube-scheduler-157]command=/usr/local/kubernetes/server/bin/kube-scheduler-startup.sh                   ; the program (relative uses PATH, can take args)numprocs=1                                                               ; number of processes copies to start (def 1)directory=/usr/local/kubernetes/server/bin                                  ; directory to cwd to before exec (def no cwd)autostart=true                                                           ; start at supervisord start (default: true)autorestart=true                                                         ; retstart at unexpected quit (default: true)startsecs=0                                                             ; number of secs prog must stay running (def. 1)startretries=3                                                           ; max # of serial start failures (default 3)exitcodes=0,2                                                            ; &#x27;expected&#x27; exit codes for process (default 0,2)stopsignal=QUIT                                                          ; signal used to kill process (default TERM)stopwaitsecs=10                                                          ; max num secs to wait b4 SIGKILL (default 10)user=root                                                                ; setuid to this UNIX account to run the programredirect_stderr=true                                                     ; redirect proc stderr to stdout (default false)stdout_logfile=/data/logs/kubernetes/kube-scheduler/scheduler.stdout.log ; stderr log path, NONE for none; default AUTOstdout_logfile_maxbytes=64MB                                             ; max # logfile bytes b4 rotation (default 50MB)stdout_logfile_backups=4                                                 ; # of stdout logfile backups (default 10)stdout_capture_maxbytes=1MB                                              ; number of bytes in &#x27;capturemode&#x27; (default 0)stdout_events_enabled=false                                              ; emit events on stdout writes (default false)supervisorctl update"><div></div></button></div></figure></div>
<p>Ëá≥Ê≠§ÔºåmasterËäÇÁÇπÁöÑÊ†∏ÂøÉÁªÑ‰ª∂Âü∫Êú¨ÂÆâË£ÖÂÆåÊàê‰∫ÜÔºå‰ΩøÁî®ssÂëΩ‰ª§Êü•ÁúãÊúçÂä°ÁõëÂê¨Áä∂ÊÄÅÔºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">></span><span style="--0:#D6DEEB;--1:#403F53"> ss -tnulp </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">grep</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tcp</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">LISTEN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#F78C6C;--1:#AA0982">16384</span><span style="--0:#D6DEEB;--1:#403F53">                        </span><span style="--0:#F78C6C;--1:#AA0982">127.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.1:10259</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#F78C6C;--1:#AA0982">0.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.0:</span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">users:</span><span style="--0:#D6DEEB;--1:#403F53">(("kube</span><span style="--0:#C792EA;--1:#8D46B4">-</span><span style="--0:#D6DEEB;--1:#403F53">scheduler"</span><span style="--0:#C792EA;--1:#8D46B4">,</span><span style="--0:#D6DEEB;--1:#403F53">pid</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">9385</span><span style="--0:#C792EA;--1:#8D46B4">,</span><span style="--0:#D6DEEB;--1:#403F53">fd</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">7</span><span style="--0:#D6DEEB;--1:#403F53">))</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tcp</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">LISTEN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#F78C6C;--1:#AA0982">16384</span><span style="--0:#D6DEEB;--1:#403F53">                        </span><span style="--0:#F78C6C;--1:#AA0982">127.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.1:10257</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#F78C6C;--1:#AA0982">0.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.0:</span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">users:</span><span style="--0:#D6DEEB;--1:#403F53">(("kube</span><span style="--0:#C792EA;--1:#8D46B4">-</span><span style="--0:#D6DEEB;--1:#403F53">controller"</span><span style="--0:#C792EA;--1:#8D46B4">,</span><span style="--0:#D6DEEB;--1:#403F53">pid</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">9370</span><span style="--0:#C792EA;--1:#8D46B4">,</span><span style="--0:#D6DEEB;--1:#403F53">fd</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">7</span><span style="--0:#D6DEEB;--1:#403F53">))</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tcp</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">LISTEN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#F78C6C;--1:#AA0982">16384</span><span style="--0:#D6DEEB;--1:#403F53">                                </span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#ECC48D;--1:#3C63B3">:6443</span><span style="--0:#D6DEEB;--1:#403F53">             </span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#ECC48D;--1:#3C63B3">:</span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">users:</span><span style="--0:#D6DEEB;--1:#403F53">(("kube</span><span style="--0:#C792EA;--1:#8D46B4">-</span><span style="--0:#D6DEEB;--1:#403F53">apiserver"</span><span style="--0:#C792EA;--1:#8D46B4">,</span><span style="--0:#D6DEEB;--1:#403F53">pid</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">5989</span><span style="--0:#C792EA;--1:#8D46B4">,</span><span style="--0:#D6DEEB;--1:#403F53">fd</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">7</span><span style="--0:#D6DEEB;--1:#403F53">))</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="> ss -tnulp | grep kubetcp   LISTEN 0      16384                        127.0.0.1:10259      0.0.0.0:*    users:((&#x22;kube-scheduler&#x22;,pid=9385,fd=7))tcp   LISTEN 0      16384                        127.0.0.1:10257      0.0.0.0:*    users:((&#x22;kube-controller&#x22;,pid=9370,fd=7))tcp   LISTEN 0      16384                                *:6443             *:*    users:((&#x22;kube-apiserver&#x22;,pid=5989,fd=7))"><div></div></button></div></figure></div>
<h3 id="45-ÈÖçÁΩÆkubectlÊâÄÈúÄË¶ÅÁöÑkubeconfig">4.5 ÈÖçÁΩÆkubectlÊâÄÈúÄË¶ÅÁöÑkubeconfig</h3>
<p>Ê≠•È™§Â§ß‰ΩìÂíå‰∏äÈù¢ÈÉΩÊòØ‰∏ÄËá¥ÁöÑ„ÄÇ</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/k8s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubectl-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"CN"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">kubectl</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"hosts"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [],</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"key"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"algo"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">rsa</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">"size"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2048</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"names"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"C"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">CN</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"L"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">HangZhou</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#82AAFF;--1:#3C63B3">"ST"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">ZheJiang</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">"O"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">system:masters</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">"OU"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">System</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cfssl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">gencert</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-ca=ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-ca-key=ca-key.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-config=ca-config.json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-profile=kubernetes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubectl-csr.json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">cfssl-json</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-bare</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubectl</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ëøô‰∏™‰Ω†ÊîæÂà∞Âíå‰∏äÈù¢ÂêåÊ†∑ÁöÑ‰ΩçÁΩÆÔºåÁÑ∂ÂêéÂ§çÂà∂Âà∞~/.kubeÈáåÈù¢‰πüË°åÔºåËøôÈáåÊàëÂõæ‰∏™Êñπ‰æø</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†ÈõÜÁæ§apiserver‰ø°ÊÅØ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-cluster</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--certificate-authority=/etc/kubernetes/TLS/k8s/ca.pem </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--embed-certs=true </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--server=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">https://172.19.82.157:6443</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--kubeconfig=/root/.kube/config</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†ËØÅ‰π¶Êñá‰ª∂‰ø°ÊÅØ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-credentials</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cluster-admin</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--client-certificate=/etc/kubernetes/TLS/k8s/kubectl.pem </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--client-key=/etc/kubernetes/TLS/k8s/kubectl-key.pem </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--embed-certs=true </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--kubeconfig=/root/.kube/config</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†Áî®Êà∑</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--cluster=kubernetes </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--user=cluster-admin </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--kubeconfig=/root/.kube/config</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÊåáÂÆöÈªòËÆ§ÁöÑÈõÜÁæ§</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">use-context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/root/.kube/config</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cd /etc/kubernetes/TLS/k8svim kubectl-csr.json{  &#x22;CN&#x22;: &#x22;kubectl&#x22;,  &#x22;hosts&#x22;: [],  &#x22;key&#x22;: {    &#x22;algo&#x22;: &#x22;rsa&#x22;,    &#x22;size&#x22;: 2048  },  &#x22;names&#x22;: [        {            &#x22;C&#x22;: &#x22;CN&#x22;,            &#x22;L&#x22;: &#x22;HangZhou&#x22;,            &#x22;ST&#x22;: &#x22;ZheJiang&#x22;,      &#x22;O&#x22;: &#x22;system:masters&#x22;,      &#x22;OU&#x22;: &#x22;System&#x22;        }  ]}cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kubectl-csr.json | cfssl-json -bare kubectlkubectl config set-cluster kubernetes \--certificate-authority=/etc/kubernetes/TLS/k8s/ca.pem \--embed-certs=true \--server=&#x22;https://172.19.82.157:6443&#x22; \--kubeconfig=/root/.kube/configkubectl config set-credentials cluster-admin \--client-certificate=/etc/kubernetes/TLS/k8s/kubectl.pem \--client-key=/etc/kubernetes/TLS/k8s/kubectl-key.pem \--embed-certs=true \--kubeconfig=/root/.kube/configkubectl config set-context default \--cluster=kubernetes \--user=cluster-admin \--kubeconfig=/root/.kube/configkubectl config use-context default --kubeconfig=/root/.kube/config"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230823163202.png" alt="image.png"></p>
<h3 id="46-ÈÉ®ÁΩ≤nodeÁõ∏ÂÖ≥ÁªÑ‰ª∂kube-proxykubelet">4.6 ÈÉ®ÁΩ≤nodeÁõ∏ÂÖ≥ÁªÑ‰ª∂kube-proxy„ÄÅkubelet</h3>
<h4 id="461-bootstrapËá™Âä®ËÆ§ËØÅkubelet">4.6.1 bootstrapËá™Âä®ËÆ§ËØÅkubelet</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÁîüÊàêÈöèÊú∫ËÆ§ËØÅtokenidÂíåsecretÔºåÂπ∂Ëµã‰∫àÊùÉÈôêÔºå‰∏ãÈù¢Áõ¥Âà∞EOF‰∏ÄÂùóÊâßË°å„ÄÇ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">TOKEN_ID</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--1:#3C63B3"><span style="--0:#ECC48D">`</span><span style="--0:#82AAFF">head</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-c</span><span style="--0:#ECC48D"> </span></span><span style="--0:#F78C6C;--1:#AA0982">16</span><span style="--0:#ECC48D;--1:#3C63B3"> /dev/urandom </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">od</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-An</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-t</span><span style="--0:#ECC48D"> x </span></span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">tr</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-d</span><span style="--0:#ECC48D"> </span></span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#3C63B3"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">head</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-c6</span><span style="--0:#ECC48D">`</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">TOKEN_SECRET</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--1:#3C63B3"><span style="--0:#ECC48D">`</span><span style="--0:#82AAFF">head</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-c</span><span style="--0:#ECC48D"> </span></span><span style="--0:#F78C6C;--1:#AA0982">16</span><span style="--0:#ECC48D;--1:#3C63B3"> /dev/urandom </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">od</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-An</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-t</span><span style="--0:#ECC48D"> x </span></span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">tr</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-d</span><span style="--0:#ECC48D"> </span></span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#3C63B3"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">head</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-c16</span><span style="--0:#ECC48D">`</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">bootstrap.secret.yaml</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x3C;&#x3C;</span><span style="--0:#D9F5DD;--1:#111111">EOF</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">apiVersion: v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">kind: Secret</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: bootstrap-token-</span><span style="--0:#C5E478;--1:#3C63B3">$a</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">namespace: kube-system</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">type: bootstrap.kubernetes.io/token</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">stringData:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">description: "The default bootstrap token generated by 'kubelet '."</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">token-id: "</span><span style="--0:#C5E478;--1:#3C63B3">$TOKEN_ID</span><span style="--0:#ECC48D;--1:#3C63B3">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">token-secret: "</span><span style="--0:#C5E478;--1:#3C63B3">$TOKEN_SECRET</span><span style="--0:#ECC48D;--1:#3C63B3">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">usage-bootstrap-authentication: "true"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">usage-bootstrap-signing: "true"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">auth-extra-groups:  system:bootstrappers:default-node-token,system:bootstrappers:worker,system:bootstrappers:ingress</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">apiVersion: rbac.authorization.k8s.io/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">kind: ClusterRoleBinding</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: kubelet-bootstrap</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">roleRef:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">apiGroup: rbac.authorization.k8s.io</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">kind: ClusterRole</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: system:node-bootstrapper</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">subjects:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">- apiGroup: rbac.authorization.k8s.io</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">kind: Group</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: system:bootstrappers:default-node-token</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">apiVersion: rbac.authorization.k8s.io/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">kind: ClusterRoleBinding</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: node-autoapprove-bootstrap</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">roleRef:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">apiGroup: rbac.authorization.k8s.io</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">kind: ClusterRole</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: system:certificates.k8s.io:certificatesigningrequests:nodeclient</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">subjects:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">- apiGroup: rbac.authorization.k8s.io</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">kind: Group</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: system:bootstrappers:default-node-token</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">apiVersion: rbac.authorization.k8s.io/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">kind: ClusterRoleBinding</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: node-autoapprove-certificate-rotation</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">roleRef:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">apiGroup: rbac.authorization.k8s.io</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">kind: ClusterRole</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: system:certificates.k8s.io:certificatesigningrequests:selfnodeclient</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">subjects:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">- apiGroup: rbac.authorization.k8s.io</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">kind: Group</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: system:nodes</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">apiVersion: rbac.authorization.k8s.io/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">kind: ClusterRole</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">annotations:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">    </span></span><span style="--0:#ECC48D;--1:#3C63B3">rbac.authorization.kubernetes.io/autoupdate: "true"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">labels:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">    </span></span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes.io/bootstrapping: rbac-defaults</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: system:kube-apiserver-to-kubelet</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">rules:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">- apiGroups:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">      </span></span><span style="--0:#ECC48D;--1:#3C63B3">- ""</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">    </span></span><span style="--0:#ECC48D;--1:#3C63B3">resources:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">      </span></span><span style="--0:#ECC48D;--1:#3C63B3">- nodes/proxy</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">      </span></span><span style="--0:#ECC48D;--1:#3C63B3">- nodes/stats</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">      </span></span><span style="--0:#ECC48D;--1:#3C63B3">- nodes/log</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">      </span></span><span style="--0:#ECC48D;--1:#3C63B3">- nodes/spec</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">      </span></span><span style="--0:#ECC48D;--1:#3C63B3">- nodes/metrics</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">    </span></span><span style="--0:#ECC48D;--1:#3C63B3">verbs:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">      </span></span><span style="--0:#ECC48D;--1:#3C63B3">- "*"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">apiVersion: rbac.authorization.k8s.io/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">kind: ClusterRoleBinding</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: system:kube-apiserver</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">namespace: ""</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">roleRef:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">apiGroup: rbac.authorization.k8s.io</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">kind: ClusterRole</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: system:kube-apiserver-to-kubelet</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">subjects:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">- apiGroup: rbac.authorization.k8s.io</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">    </span></span><span style="--0:#ECC48D;--1:#3C63B3">kind: User</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">    </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: kube-apiserver</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">EOF</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†ÈõÜÁæ§apiserver‰ø°ÊÅØ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-cluster</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--certificate-authority=/etc/kubernetes/TLS/k8s/ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--embed-certs=true</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--server=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">https://172.19.82.157:6443</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†ËØÅ‰π¶Êñá‰ª∂‰ø°ÊÅØ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-credentials</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet-bootstrap-user</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--1:#3C63B3"><span style="--0:#82AAFF">--token=</span><span style="--0:#C5E478">$TOKEN_ID</span><span style="--0:#82AAFF">.</span><span style="--0:#C5E478">$TOKEN_SECRET</span></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†Áî®Êà∑</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet-bootstrap-user@kubernetes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--cluster=kubernetes</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--user=kubelet-bootstrap-user</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÊåáÂÆöÈªòËÆ§ÁöÑÈõÜÁæ§</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">use-context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet-bootstrap-user@kubernetes</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfig</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cd /etc/kubernetes/configTOKEN_ID=&#x60;head -c 16 /dev/urandom | od -An -t x | tr -d &#x27; &#x27; | head -c6&#x60;TOKEN_SECRET=&#x60;head -c 16 /dev/urandom | od -An -t x | tr -d &#x27; &#x27; | head -c16&#x60;cat > bootstrap.secret.yaml <<EOFapiVersion: v1kind: Secretmetadata:  name: bootstrap-token-$a  namespace: kube-systemtype: bootstrap.kubernetes.io/tokenstringData:  description: &#x22;The default bootstrap token generated by &#x27;kubelet &#x27;.&#x22;  token-id: &#x22;$TOKEN_ID&#x22;  token-secret: &#x22;$TOKEN_SECRET&#x22;  usage-bootstrap-authentication: &#x22;true&#x22;  usage-bootstrap-signing: &#x22;true&#x22;  auth-extra-groups:  system:bootstrappers:default-node-token,system:bootstrappers:worker,system:bootstrappers:ingress---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata:  name: kubelet-bootstraproleRef:  apiGroup: rbac.authorization.k8s.io  kind: ClusterRole  name: system:node-bootstrappersubjects:- apiGroup: rbac.authorization.k8s.io  kind: Group  name: system:bootstrappers:default-node-token---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata:  name: node-autoapprove-bootstraproleRef:  apiGroup: rbac.authorization.k8s.io  kind: ClusterRole  name: system:certificates.k8s.io:certificatesigningrequests:nodeclientsubjects:- apiGroup: rbac.authorization.k8s.io  kind: Group  name: system:bootstrappers:default-node-token---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata:  name: node-autoapprove-certificate-rotationroleRef:  apiGroup: rbac.authorization.k8s.io  kind: ClusterRole  name: system:certificates.k8s.io:certificatesigningrequests:selfnodeclientsubjects:- apiGroup: rbac.authorization.k8s.io  kind: Group  name: system:nodes---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRolemetadata:  annotations:    rbac.authorization.kubernetes.io/autoupdate: &#x22;true&#x22;  labels:    kubernetes.io/bootstrapping: rbac-defaults  name: system:kube-apiserver-to-kubeletrules:  - apiGroups:      - &#x22;&#x22;    resources:      - nodes/proxy      - nodes/stats      - nodes/log      - nodes/spec      - nodes/metrics    verbs:      - &#x22;*&#x22;---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata:  name: system:kube-apiserver  namespace: &#x22;&#x22;roleRef:  apiGroup: rbac.authorization.k8s.io  kind: ClusterRole  name: system:kube-apiserver-to-kubeletsubjects:  - apiGroup: rbac.authorization.k8s.io    kind: User    name: kube-apiserverEOFkubectl config set-cluster kubernetes  \  --certificate-authority=/etc/kubernetes/TLS/k8s/ca.pem \  --embed-certs=true   \  --server=&#x22;https://172.19.82.157:6443&#x22; \  --kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfigkubectl config set-credentials kubelet-bootstrap-user  \  --token=$TOKEN_ID.$TOKEN_SECRET \  --kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfigkubectl config set-context kubelet-bootstrap-user@kubernetes \  --cluster=kubernetes   \  --user=kubelet-bootstrap-user \  --kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfigkubectl config use-context kubelet-bootstrap-user@kubernetes  \  --kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfig"><div></div></button></div></figure></div>
<h4 id="462-ÈÉ®ÁΩ≤kubelet">4.6.2 ÈÉ®ÁΩ≤kubelet</h4>
<p>‚ö† Áî±‰∫émasterËäÇÁÇπÂêåÊ†∑Ë¶ÅËøêË°å‰∏Ä‰∫õpodÔºåÊØîÂ¶Çflannel„ÄÅcalicoÁΩëÁªúÁªÑ‰ª∂Á≠âÔºåÊâÄ‰ª•Âú®masterËäÇÁÇπ‰πüÈúÄË¶ÅÂÆâË£ÖKubeletÂíåKube-proxyÁªÑ‰ª∂„ÄÇ</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÂèÇËÄÉÔºöhttps://kubernetes.io/zh-cn/docs/reference/config-api/kubelet-config.v1beta1/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config/kubelet-conf.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">apiVersion:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet.config.k8s.io/v1beta1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kind:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">KubeletConfiguration</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">address:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">172.19</span><span style="--0:#ECC48D;--1:#3C63B3">.82.157</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">port:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10250</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">readOnlyPort:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10255</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">authentication:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">anonymous:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">enabled:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">false</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">webhook:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">cacheTTL:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">m0s</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">enabled:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">x509:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">clientCAFile:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/k8s/ca.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">authorization:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">Webhook</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">webhook:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">cacheAuthorizedTTL:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#ECC48D;--1:#3C63B3">m0s</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">cacheUnauthorizedTTL:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">30</span><span style="--0:#ECC48D;--1:#3C63B3">s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cgroupDriver:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">systemd</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cgroupsPerQOS:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">clusterDNS:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10.100</span><span style="--0:#ECC48D;--1:#3C63B3">.0.2</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">clusterDomain:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cluster.local</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">containerLogMaxFiles:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">5</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">containerLogMaxSize:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#ECC48D;--1:#3C63B3">Mi</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">contentType:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">application/vnd.kubernetes.protobuf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cpuCFSQuota:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cpuManagerPolicy:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">none</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cpuManagerReconcilePeriod:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#ECC48D;--1:#3C63B3">s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">enableControllerAttachDetach:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">enableDebuggingHandlers:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">enforceNodeAllocatable:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">pods</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eventBurst:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eventRecordQPS:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">5</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">evictionHard:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">imagefs.available:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">15</span><span style="--0:#ECC48D;--1:#3C63B3">%</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">memory.available:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">100</span><span style="--0:#ECC48D;--1:#3C63B3">Mi</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">nodefs.available:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#ECC48D;--1:#3C63B3">%</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">nodefs.inodesFree:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#ECC48D;--1:#3C63B3">%</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">evictionPressureTransitionPeriod:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#ECC48D;--1:#3C63B3">m0s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">failSwapOn:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">fileCheckFrequency:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">20</span><span style="--0:#ECC48D;--1:#3C63B3">s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">hairpinMode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">promiscuous-bridge</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">healthzBindAddress:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">127.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">healthzPort:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10248</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">httpCheckFrequency:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">20</span><span style="--0:#ECC48D;--1:#3C63B3">s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">imageGCHighThresholdPercent:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">85</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">imageGCLowThresholdPercent:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">80</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">imageMinimumGCAge:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">m0s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">iptablesDropBit:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">15</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">iptablesMasqueradeBit:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">14</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubeAPIBurst:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubeAPIQPS:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">5</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">makeIPTablesUtilChains:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">maxOpenFiles:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1000000</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">maxPods:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">110</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">nodeStatusUpdateFrequency:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#ECC48D;--1:#3C63B3">s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">oomScoreAdj:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-999</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">podPidsLimit:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">registryBurst:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">registryPullQPS:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">5</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">resolvConf:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/resolv.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">rotateCertificates:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">runtimeRequestTimeout:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">m0s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">serializeImagePulls:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">staticPodPath:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/manifests</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">streamingConnectionIdleTimeout:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#ECC48D;--1:#3C63B3">h0m0s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">syncFrequency:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">m0s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">volumeStatsAggPeriod:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">m0s</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kubelet-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#!/usr/bin/env sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./kubelet</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--bootstrap-kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfig</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kubelet.kubeconfig</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--config=/etc/kubernetes/config/kubelet-conf.yml</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--hostname-override=master0</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--node-labels=node.kubernetes.io/node=</span><span style="--0:#D9F5DD;--1:#111111">''</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--container-runtime-endpoint=unix:///var/run/containerd/containerd.sock</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†ÈõÜÁæ§apiserver‰ø°ÊÅØ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-cluster</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--certificate-authority=/etc/kubernetes/TLS/k8s/ca.pem </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--embed-certs=true </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--server=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">https://172.19.82.157:6443</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†ËØÅ‰π¶Êñá‰ª∂‰ø°ÊÅØÔºå‰∏ãÈù¢Ëøô‰∏™tokenÊòØ‰πãÂâçÁîüÊàêÁöÑÔºå‰πüÂ∞±ÊòØ/etc/kubernetes/config/token.csv</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-credentials</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet-bootstrap</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--token=8d435b925863119020c4da4d16e064c8 </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†Áî®Êà∑</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--cluster=kubernetes </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--user=kubelet-bootstrap </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">--kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÊåáÂÆöÈªòËÆ§ÁöÑÈõÜÁæ§</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">use-context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfig</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">chmod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">+x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kubelet-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-pv</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/logs/kubernetes/kubelet/</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/manifests/</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/supervisor/conf.d/kubelet.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[program:kubelet-157]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">command</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kubelet-startup.sh</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">                  </span></span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#82AAFF;--1:#3C63B3">the</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">program</span><span style="--0:#D6DEEB;--1:#403F53"> (relative </span><span style="--0:#ECC48D;--1:#3C63B3">uses</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">PATH,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">can</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">take</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">args</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">numprocs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">                                                               ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">processes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">copies</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> (def </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">directory</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin</span><span style="--0:#D6DEEB;--1:#403F53">                                  ; </span><span style="--0:#82AAFF;--1:#3C63B3">directory</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cwd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">before</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">exec</span><span style="--0:#D6DEEB;--1:#403F53"> (def </span><span style="--0:#ECC48D;--1:#3C63B3">no</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cwd</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">autostart</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                           ; </span><span style="--0:#82AAFF;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">at</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">supervisord</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> (default: </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">autorestart</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                         ; </span><span style="--0:#82AAFF;--1:#3C63B3">retstart</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">at</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">unexpected</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">quit</span><span style="--0:#D6DEEB;--1:#403F53"> (default: </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">startsecs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">                                                             ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">secs</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">prog</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">must</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stay</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">running</span><span style="--0:#D6DEEB;--1:#403F53"> (def. </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">startretries</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">                                                           ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#809191;--1:#616671"># of serial start failures (default 3)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">exitcodes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#ECC48D;--1:#3C63B3">,2</span><span style="--0:#D6DEEB;--1:#403F53">                                                            ; </span><span style="--0:#82AAFF;--1:#3C63B3">'expected'</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">exit</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">codes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">process</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#ECC48D;--1:#3C63B3">,2</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stopsignal</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">QUIT</span><span style="--0:#D6DEEB;--1:#403F53">                                                          ; </span><span style="--0:#82AAFF;--1:#3C63B3">signal</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">used</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kill</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">process</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#ECC48D;--1:#3C63B3">TERM</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stopwaitsecs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">                                                          ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">num</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">secs</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">wait</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">b4</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">SIGKILL</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">user</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">root</span><span style="--0:#D6DEEB;--1:#403F53">                                                                ; </span><span style="--0:#82AAFF;--1:#3C63B3">setuid</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">this</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">UNIX</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">account</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">the</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">program</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">redirect_stderr</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                     ; </span><span style="--0:#82AAFF;--1:#3C63B3">redirect</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">proc</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stderr</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stdout</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/data/logs/kubernetes/kubelet/kubelet.stdout.log</span><span style="--0:#D6DEEB;--1:#403F53"> ; </span><span style="--0:#82AAFF;--1:#3C63B3">stderr</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">log</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">path,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">NONE</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">none</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#82AAFF;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">AUTO</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile_maxbytes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">64</span><span style="--0:#ECC48D;--1:#3C63B3">MB</span><span style="--0:#D6DEEB;--1:#403F53">                                             ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#809191;--1:#616671"># logfile bytes b4 rotation (default 50MB)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile_backups</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#D6DEEB;--1:#403F53">                                                 ; </span><span style="--0:#809191;--1:#616671"># of stdout logfile backups (default 10)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_capture_maxbytes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">MB</span><span style="--0:#D6DEEB;--1:#403F53">                                              ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">bytes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">capturemode</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_events_enabled</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">                                              ; </span><span style="--0:#82AAFF;--1:#3C63B3">emit</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">events</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">on</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stdout</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">writes</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">supervisorctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">update</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="vim /etc/kubernetes/config/kubelet-conf.ymlapiVersion: kubelet.config.k8s.io/v1beta1kind: KubeletConfigurationaddress: 172.19.82.157port: 10250readOnlyPort: 10255authentication:  anonymous:    enabled: false  webhook:    cacheTTL: 2m0s    enabled: true  x509:    clientCAFile: /etc/kubernetes/TLS/k8s/ca.pemauthorization:  mode: Webhook  webhook:    cacheAuthorizedTTL: 5m0s    cacheUnauthorizedTTL: 30scgroupDriver: systemdcgroupsPerQOS: trueclusterDNS:- 10.100.0.2clusterDomain: cluster.localcontainerLogMaxFiles: 5containerLogMaxSize: 10MicontentType: application/vnd.kubernetes.protobufcpuCFSQuota: truecpuManagerPolicy: nonecpuManagerReconcilePeriod: 10senableControllerAttachDetach: trueenableDebuggingHandlers: trueenforceNodeAllocatable:- podseventBurst: 10eventRecordQPS: 5evictionHard:  imagefs.available: 15%  memory.available: 100Mi  nodefs.available: 10%  nodefs.inodesFree: 5%evictionPressureTransitionPeriod: 5m0sfailSwapOn: truefileCheckFrequency: 20shairpinMode: promiscuous-bridgehealthzBindAddress: 127.0.0.1healthzPort: 10248httpCheckFrequency: 20simageGCHighThresholdPercent: 85imageGCLowThresholdPercent: 80imageMinimumGCAge: 2m0siptablesDropBit: 15iptablesMasqueradeBit: 14kubeAPIBurst: 10kubeAPIQPS: 5makeIPTablesUtilChains: truemaxOpenFiles: 1000000maxPods: 110nodeStatusUpdateFrequency: 10soomScoreAdj: -999podPidsLimit: -1registryBurst: 10registryPullQPS: 5resolvConf: /etc/resolv.confrotateCertificates: trueruntimeRequestTimeout: 2m0sserializeImagePulls: truestaticPodPath: /etc/kubernetes/manifestsstreamingConnectionIdleTimeout: 4h0m0ssyncFrequency: 1m0svolumeStatsAggPeriod: 1m0svim /usr/local/kubernetes/server/bin/kubelet-startup.sh./kubelet \  --bootstrap-kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfig \  --kubeconfig=/etc/kubernetes/config/kubelet.kubeconfig \  --config=/etc/kubernetes/config/kubelet-conf.yml \  --hostname-override=master0 \  --node-labels=node.kubernetes.io/node=&#x27;&#x27; \  --container-runtime-endpoint=unix:///var/run/containerd/containerd.sockkubectl config set-cluster kubernetes \--certificate-authority=/etc/kubernetes/TLS/k8s/ca.pem \--embed-certs=true \--server=&#x22;https://172.19.82.157:6443&#x22; \--kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfigkubectl config set-credentials kubelet-bootstrap \--token=8d435b925863119020c4da4d16e064c8 \--kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfigkubectl config set-context default \--cluster=kubernetes \--user=kubelet-bootstrap \--kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfigkubectl config use-context default --kubeconfig=/etc/kubernetes/config/kubelet-bootstrap.kubeconfigchmod +x /usr/local/kubernetes/server/bin/kubelet-startup.shmkdir -pv /data/logs/kubernetes/kubelet/ /etc/kubernetes/manifests/vim /etc/supervisor/conf.d/kubelet.conf[program:kubelet-157]command=/usr/local/kubernetes/server/bin/kubelet-startup.sh                  ; the program (relative uses PATH, can take args)numprocs=1                                                               ; number of processes copies to start (def 1)directory=/usr/local/kubernetes/server/bin                                  ; directory to cwd to before exec (def no cwd)autostart=true                                                           ; start at supervisord start (default: true)autorestart=true                                                         ; retstart at unexpected quit (default: true)startsecs=0                                                             ; number of secs prog must stay running (def. 1)startretries=3                                                           ; max # of serial start failures (default 3)exitcodes=0,2                                                            ; &#x27;expected&#x27; exit codes for process (default 0,2)stopsignal=QUIT                                                          ; signal used to kill process (default TERM)stopwaitsecs=10                                                          ; max num secs to wait b4 SIGKILL (default 10)user=root                                                                ; setuid to this UNIX account to run the programredirect_stderr=true                                                     ; redirect proc stderr to stdout (default false)stdout_logfile=/data/logs/kubernetes/kubelet/kubelet.stdout.log ; stderr log path, NONE for none; default AUTOstdout_logfile_maxbytes=64MB                                             ; max # logfile bytes b4 rotation (default 50MB)stdout_logfile_backups=4                                                 ; # of stdout logfile backups (default 10)stdout_capture_maxbytes=1MB                                              ; number of bytes in &#x27;capturemode&#x27; (default 0)stdout_events_enabled=false                                              ; emit events on stdout writes (default false)supervisorctl update"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230824111121.png" alt="image.png"></p>
<h4 id="463-Â∞ÜmasterËäÇÁÇπ‰Ωú‰∏∫nodeÂä†ÂÖ•Âà∞ÈõÜÁæ§ÂÜÖÈÉ®">4.6.3 Â∞ÜmasterËäÇÁÇπ‰Ωú‰∏∫nodeÂä†ÂÖ•Âà∞ÈõÜÁæ§ÂÜÖÈÉ®</h4>
<p><strong>‚ö† Ê≥®ÊÑèÔºöËøô‰∏™Ê≠•È™§Â¶ÇÊûúÂÅö‰∫Übootstrap kubeletÔºåÂàô‰∏çÈúÄË¶ÅÊâãÂä®ÊéàÊùÉÔºåÂèØÁõ¥Êé•ÂøΩÁï•ÊîπÊ≠•È™§„ÄÇ</strong></p>
<blockquote>
<p>‰ª•‰∏ãÊù•Ê∫ê‰∫éÁΩëÁªúÔºö
ÂΩìkubeletÁªÑ‰ª∂ÂêØÂä®ÊàêÂäüÂêéÔºåÂ∞±‰ºöÊÉ≥apiserverÂèëÈÄÅ‰∏Ä‰∏™ËØ∑Ê±ÇÂä†ÂÖ•ÈõÜÁæ§ÁöÑ‰ø°ÊÅØÔºåÂè™ÊúâÂΩìmasterËäÇÁÇπÊéàÊùÉÂêåÊÑèÂêéÔºåÊâçÂèØ‰ª•Ê≠£Â∏∏Âä†ÂÖ•ÔºåËôΩÁÑ∂ÊòØmasterËäÇÁÇπÈÉ®ÁΩ≤ÁöÑnodeÁªÑ‰ª∂Ôºå> ‰ΩÜÊòØ‰πü‰ºöÂèëÁîü‰∏Ä‰∏™Âä†ÂÖ•ÈõÜÁæ§ÁöÑ‰ø°ÊÅØÔºåÈúÄË¶ÅmasterÂêåÊÑè„ÄÇ</p>
<p>ÂΩìkubeletÂêØÂä®‰πãÂêéÔºåÈ¶ñÂÖà‰ºöÂú®ËØÅ‰π¶ÁõÆÂΩïÁîüÊàê‰∏Ä‰∏™kubelet-client.key.tmpËøô‰∏™Êñá‰ª∂ÔºåÂΩì‰ΩøÁî®kubectl certificate approveÂëΩ‰ª§ÊéàÊùÉÊàêÂäünodeÁöÑËØ∑Ê±Ç‰πãÂêéÔºåkubele> t-client.key.tmpÂ∞èÊó∂ÔºåÈöè‰πã‰ºöÁîüÊàê‰∏Ä‰∏™kubelet-client-current.pemÁöÑËØÅ‰π¶Êñá‰ª∂ÔºåÁî®‰∫é‰∏éapiserverÂª∫Á´ãËøûÊé•ÔºåÊ≠§Êó∂ÂÜç‰ΩøÁî®kubectl get > nodeÂ∞±‰ºöÁúãÂà∞ËäÇÁÇπ‰ø°ÊÅØ‰∫Ü„ÄÇ</p>
<p>Êâ©Â±ïÔºöÂ¶ÇÊûúÂêéÊúüÊÉ≥Ë¶Å‰øÆÊîπnodeÁöÑÂêçÁß∞ÔºåÈÇ£‰πàÂ∞±ÊääÁîüÊàêÁöÑkubeletËØÅ‰π¶Êñá‰ª∂ÂÖ®ÈÉ®Âà†Èô§ÔºåÁÑ∂Âêé‰ΩøÁî®kubectl delete > nodeÂà†Èô§ËØ•ËäÇÁÇπÔºåÂú®‰øÆÊîπkubeletÈÖçÁΩÆÊñá‰ª∂‰∏≠ËØ•ËäÇÁÇπÁöÑÂêçÁß∞ÔºåÁÑ∂Âêé‰ΩøÁî®kubectl delete > csrÂà†Èô§ÊéàÊùÉ‰ø°ÊÅØÔºåÂÜçÈáçÂêØkubeletÁîüÊàêÊñ∞ÁöÑÊéàÊùÉ‰ø°ÊÅØÔºåÁÑ∂ÂêéÊéàÊùÉÈÄöËøáÂç≥ÂèØÁúãÂà∞Êñ∞ÁöÑÂêçÂ≠óÁöÑnodeËäÇÁÇπ„ÄÇ</p>
<p>Âè™ÊúâÂΩìÊéàÊùÉÈÄöËøáÂêéÔºåkubeletÁîüÊàê‰∫ÜËØÅ‰π¶Êñá‰ª∂ÔºåkubeletÁöÑÁ´ØÂè£Êâç‰ºöË¢´ÂêØÂä®</p>
<p>Ê≥®ÊÑèÔºöÂΩìkubeletÁöÑÊéàÊùÉË¢´masterËØ∑Ê±ÇÈÄöÂêéÔºåkube-proxyÂêØÂä®ÊàêÂäüÂêéÔºåËäÇÁÇπÊâç‰ºöÊ≠£ÁúüÁöÑÂä†ÂÖ•ÈõÜÁæ§ÔºåÂç≥‰Ωøkubectl get > nodeÁúãÂà∞ÁöÑËäÇÁÇπÊòØReadyÔºåËØ•ËäÇÁÇπ‰πüÊòØ‰∏çÂèØÁî®ÁöÑÔºåÂøÖÈ°ªÂΩìkube-proxyÂêØÂä®ÂÆåÊØïÂêéÔºåËøô‰∏™ËäÇÁÇπÊâçÁÆóÊ≠£ÁúüÁöÑÂêØÂä®ÂÆåÊØï.</p>
</blockquote>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># masterËäÇÁÇπ‰∏äÔºåËé∑ÂèñËØ∑Ê±ÇÂàóË°®</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">></span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get csr</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># output</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                                                   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">SIGNERNAME</span><span style="--0:#D6DEEB;--1:#403F53">                                    </span><span style="--0:#ECC48D;--1:#3C63B3">REQUESTOR</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#ECC48D;--1:#3C63B3">REQUESTEDDURATION</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">CONDITION</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">node-csr-VVgl1LpQ91JlbJLifEJIy_0KlbQ1mih6GPaGfaykQ-I</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">m46s</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes.io/kube-apiserver-client-kubelet</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet-bootstrap</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">              </span><span style="--0:#ECC48D;--1:#3C63B3">Pending</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÂáÜËÆ∏ËØ•ËäÇÁÇπÂä†ÂÖ•ÈõÜÁæ§</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">></span><span style="--0:#D6DEEB;--1:#403F53"> kubectl certificate approve node-csr-VVgl1LpQ91JlbJLifEJIy_0KlbQ1mih6GPaGfaykQ-I</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># output</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">certificatesigningrequest.certificates.k8s.io/node-csr-VVgl1LpQ91JlbJLifEJIy_0KlbQ1mih6GPaGfaykQ-I</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">approved</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="> kubectl get csrNAME                                                   AGE     SIGNERNAME                                    REQUESTOR           REQUESTEDDURATION   CONDITIONnode-csr-VVgl1LpQ91JlbJLifEJIy_0KlbQ1mih6GPaGfaykQ-I   2m46s   kubernetes.io/kube-apiserver-client-kubelet   kubelet-bootstrap   <none>              Pending> kubectl certificate approve node-csr-VVgl1LpQ91JlbJLifEJIy_0KlbQ1mih6GPaGfaykQ-Icertificatesigningrequest.certificates.k8s.io/node-csr-VVgl1LpQ91JlbJLifEJIy_0KlbQ1mih6GPaGfaykQ-I approved"><div></div></button></div></figure></div>
<p>ËäÇÁÇπÂä†ÂÖ•ÁªìÊûú<code dir="auto">kubectl get nodes</code>Ôºö
<img src="https://cdn.agou-ops.cn/others/20230824113851.png" alt="image.png"></p>
<h4 id="463-ÈÉ®ÁΩ≤kube-proxy">4.6.3 ÈÉ®ÁΩ≤kube-proxy</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">cat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-proxy.yml</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">&#x3C;&#x3C;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">EOF</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">apiVersion: v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">kind: ServiceAccount</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: kube-proxy</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">namespace: kube-system</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">apiVersion: rbac.authorization.k8s.io/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">kind: ClusterRoleBinding</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: system:kube-proxy</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">roleRef:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">apiGroup: rbac.authorization.k8s.io</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">kind: ClusterRole</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: system:node-proxier</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">subjects:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">- kind: ServiceAccount</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: kube-proxy</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">namespace: kube-system</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">apiVersion: v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">kind: Secret</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">name: kube-proxy</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">namespace: kube-system</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">  </span></span><span style="--0:#ECC48D;--1:#3C63B3">annotations:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3C63B3">    </span></span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes.io/service-account.name: "kube-proxy"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">type: kubernetes.io/service-account-token</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">EOF</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apply</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-f</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-proxy.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ëé∑Âèñtoken</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">JWT_TOKEN</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--1:#3C63B3"><span style="--0:#ECC48D">$(</span><span style="--0:#82AAFF">kubectl</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-n</span><span style="--0:#ECC48D"> kube-system get secret/kube-proxy </span></span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">--output=jsonpath=</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">{.data.token}</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#3C63B3"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">base64</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-d</span><span style="--0:#ECC48D">)</span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†ÈõÜÁæ§apiserver‰ø°ÊÅØ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-cluster</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--certificate-authority=/etc/kubernetes/TLS/k8s/ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--embed-certs=true</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--server=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">https://172.19.82.157:6443</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kube-proxy.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†token</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-credentials</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">system:kube-proxy</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--1:#3C63B3"><span style="--0:#82AAFF">--token=${</span><span style="--0:#C5E478">JWT_TOKEN</span><span style="--0:#82AAFF">}</span></span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kube-proxy.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê∑ªÂä†Áî®Êà∑</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">set-context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--cluster=kubernetes</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--user=system:kube-proxy</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kube-proxy.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÊåáÂÆöÈªòËÆ§ÁöÑÈõÜÁæ§</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">use-context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--kubeconfig=/etc/kubernetes/config/kube-proxy.kubeconfig</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÂèÇËÄÉÔºöhttps://kubernetes.io/zh-cn/docs/reference/config-api/kube-proxy-config.v1alpha1/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config/kube-proxy-conf.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">apiVersion:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubeproxy.config.k8s.io/v1alpha1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">bindAddress:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">172.19</span><span style="--0:#ECC48D;--1:#3C63B3">.82.157</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">clientConnection:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">acceptContentTypes:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">""</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">burst:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">contentType:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">application/vnd.kubernetes.protobuf</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">kubeconfig:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config/kube-proxy.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">qps:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">5</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">clusterCIDR:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10.244</span><span style="--0:#ECC48D;--1:#3C63B3">.0.0/16</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">configSyncPeriod:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">15</span><span style="--0:#ECC48D;--1:#3C63B3">m0s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">conntrack:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">max:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">null</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">maxPerCore:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">32768</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">min:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">131072</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">tcpCloseWaitTimeout:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">h0m0s</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">tcpEstablishedTimeout:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">24</span><span style="--0:#ECC48D;--1:#3C63B3">h0m0s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">enableProfiling:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">false</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">healthzBindAddress:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.0:10256</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">hostnameOverride:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#C5E478;--1:#3C63B3">$a</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">iptables:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">masqueradeAll:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">false</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">masqueradeBit:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">14</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">minSyncPeriod:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#ECC48D;--1:#3C63B3">s</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">syncPeriod:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">30</span><span style="--0:#ECC48D;--1:#3C63B3">s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">ipvs:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">masqueradeAll:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">minSyncPeriod:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#ECC48D;--1:#3C63B3">s</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">scheduler:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">rr</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">syncPeriod:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">30</span><span style="--0:#ECC48D;--1:#3C63B3">s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kind:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">KubeProxyConfiguration</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">metricsBindAddress:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">127.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.1:10249</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">ipvs</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">nodePortAddresses:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">null</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">oomScoreAdj:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-999</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">portRange:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">""</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">udpIdleTimeout:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">250</span><span style="--0:#ECC48D;--1:#3C63B3">ms</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kube-proxy-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#!/usr/bin/env sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./kube-proxy</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--config=/etc/kubernetes/config/kube-proxy-conf.yml</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">--v=2</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">chmod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">+x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kube-proxy-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-pv</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/logs/kubernetes/kube-proxy/</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/supervisor/conf.d/kube-proxy.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[program:kube-proxy-157]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">command</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kube-proxy-startup.sh</span><span style="--0:#D6DEEB;--1:#403F53">     ; </span><span style="--0:#82AAFF;--1:#3C63B3">the</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">program</span><span style="--0:#D6DEEB;--1:#403F53"> (relative </span><span style="--0:#ECC48D;--1:#3C63B3">uses</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">PATH,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">can</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">take</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">args</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">numprocs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">                                                               ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">processes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">copies</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> (def </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">directory</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin</span><span style="--0:#D6DEEB;--1:#403F53">                                  ; </span><span style="--0:#82AAFF;--1:#3C63B3">directory</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cwd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">before</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">exec</span><span style="--0:#D6DEEB;--1:#403F53"> (def </span><span style="--0:#ECC48D;--1:#3C63B3">no</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cwd</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">autostart</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                           ; </span><span style="--0:#82AAFF;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">at</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">supervisord</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53"> (default: </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">autorestart</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                         ; </span><span style="--0:#82AAFF;--1:#3C63B3">retstart</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">at</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">unexpected</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">quit</span><span style="--0:#D6DEEB;--1:#403F53"> (default: </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">startsecs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">                                                             ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">secs</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">prog</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">must</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stay</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">running</span><span style="--0:#D6DEEB;--1:#403F53"> (def. </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">startretries</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">                                                           ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#809191;--1:#616671"># of serial start failures (default 3)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">exitcodes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#ECC48D;--1:#3C63B3">,2</span><span style="--0:#D6DEEB;--1:#403F53">                                                            ; </span><span style="--0:#82AAFF;--1:#3C63B3">'expected'</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">exit</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">codes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">process</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#ECC48D;--1:#3C63B3">,2</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stopsignal</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">QUIT</span><span style="--0:#D6DEEB;--1:#403F53">                                                          ; </span><span style="--0:#82AAFF;--1:#3C63B3">signal</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">used</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kill</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">process</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#ECC48D;--1:#3C63B3">TERM</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stopwaitsecs</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">                                                          ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">num</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">secs</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">wait</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">b4</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">SIGKILL</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">user</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">root</span><span style="--0:#D6DEEB;--1:#403F53">                                                                ; </span><span style="--0:#82AAFF;--1:#3C63B3">setuid</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">this</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">UNIX</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">account</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">the</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">program</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">redirect_stderr</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">                                                     ; </span><span style="--0:#82AAFF;--1:#3C63B3">redirect</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">proc</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stderr</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stdout</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/data/logs/kubernetes/kube-proxy/kube-proxy.stdout.log</span><span style="--0:#D6DEEB;--1:#403F53"> ; </span><span style="--0:#82AAFF;--1:#3C63B3">stderr</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">log</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">path,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">NONE</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">none</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#82AAFF;--1:#3C63B3">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">AUTO</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile_maxbytes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">64</span><span style="--0:#ECC48D;--1:#3C63B3">MB</span><span style="--0:#D6DEEB;--1:#403F53">                                             ; </span><span style="--0:#82AAFF;--1:#3C63B3">max</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#809191;--1:#616671"># logfile bytes b4 rotation (default 50MB)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_logfile_backups</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#D6DEEB;--1:#403F53">                                                 ; </span><span style="--0:#809191;--1:#616671"># of stdout logfile backups (default 10)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_capture_maxbytes</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">MB</span><span style="--0:#D6DEEB;--1:#403F53">                                              ; </span><span style="--0:#82AAFF;--1:#3C63B3">number</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">bytes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">capturemode</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">stdout_events_enabled</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">                                              ; </span><span style="--0:#82AAFF;--1:#3C63B3">emit</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">events</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">on</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stdout</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">writes</span><span style="--0:#D6DEEB;--1:#403F53"> (default </span><span style="--0:#82AAFF;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">supervisorctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">update</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cat > kube-proxy.yml << EOFapiVersion: v1kind: ServiceAccountmetadata:  name: kube-proxy  namespace: kube-system---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata:  name: system:kube-proxyroleRef:  apiGroup: rbac.authorization.k8s.io  kind: ClusterRole  name: system:node-proxiersubjects:- kind: ServiceAccount  name: kube-proxy  namespace: kube-system---apiVersion: v1kind: Secretmetadata:  name: kube-proxy  namespace: kube-system  annotations:    kubernetes.io/service-account.name: &#x22;kube-proxy&#x22;type: kubernetes.io/service-account-tokenEOFkubectl apply -f kube-proxy.ymlJWT_TOKEN=$(kubectl -n kube-system get secret/kube-proxy \--output=jsonpath=&#x27;{.data.token}&#x27; | base64 -d)kubectl config set-cluster kubernetes   \  --certificate-authority=/etc/kubernetes/TLS/k8s/ca.pem \  --embed-certs=true    \  --server=&#x22;https://172.19.82.157:6443&#x22; \  --kubeconfig=/etc/kubernetes/config/kube-proxy.kubeconfigkubectl config set-credentials system:kube-proxy    \  --token=${JWT_TOKEN}   \  --kubeconfig=/etc/kubernetes/config/kube-proxy.kubeconfigkubectl config set-context default    \  --cluster=kubernetes   \  --user=system:kube-proxy   \  --kubeconfig=/etc/kubernetes/config/kube-proxy.kubeconfigkubectl config use-context default   \  --kubeconfig=/etc/kubernetes/config/kube-proxy.kubeconfigvim /etc/kubernetes/config/kube-proxy-conf.ymlapiVersion: kubeproxy.config.k8s.io/v1alpha1bindAddress: 172.19.82.157clientConnection:  acceptContentTypes: &#x22;&#x22;  burst: 10  contentType: application/vnd.kubernetes.protobuf  kubeconfig: /etc/kubernetes/config/kube-proxy.kubeconfig  qps: 5clusterCIDR: 10.244.0.0/16configSyncPeriod: 15m0sconntrack:  max: null  maxPerCore: 32768  min: 131072  tcpCloseWaitTimeout: 1h0m0s  tcpEstablishedTimeout: 24h0m0senableProfiling: falsehealthzBindAddress: 0.0.0.0:10256hostnameOverride: &#x22;$a&#x22;iptables:  masqueradeAll: false  masqueradeBit: 14  minSyncPeriod: 0s  syncPeriod: 30sipvs:  masqueradeAll: true  minSyncPeriod: 5s  scheduler: &#x22;rr&#x22;  syncPeriod: 30skind: KubeProxyConfigurationmetricsBindAddress: 127.0.0.1:10249mode: &#x22;ipvs&#x22;nodePortAddresses: nulloomScoreAdj: -999portRange: &#x22;&#x22;udpIdleTimeout: 250msvim /usr/local/kubernetes/server/bin/kube-proxy-startup.sh./kube-proxy \  --config=/etc/kubernetes/config/kube-proxy-conf.yml \  --v=2chmod +x /usr/local/kubernetes/server/bin/kube-proxy-startup.shmkdir -pv /data/logs/kubernetes/kube-proxy/vim /etc/supervisor/conf.d/kube-proxy.conf[program:kube-proxy-157]command=/usr/local/kubernetes/server/bin/kube-proxy-startup.sh     ; the program (relative uses PATH, can take args)numprocs=1                                                               ; number of processes copies to start (def 1)directory=/usr/local/kubernetes/server/bin                                  ; directory to cwd to before exec (def no cwd)autostart=true                                                           ; start at supervisord start (default: true)autorestart=true                                                         ; retstart at unexpected quit (default: true)startsecs=0                                                             ; number of secs prog must stay running (def. 1)startretries=3                                                           ; max # of serial start failures (default 3)exitcodes=0,2                                                            ; &#x27;expected&#x27; exit codes for process (default 0,2)stopsignal=QUIT                                                          ; signal used to kill process (default TERM)stopwaitsecs=10                                                          ; max num secs to wait b4 SIGKILL (default 10)user=root                                                                ; setuid to this UNIX account to run the programredirect_stderr=true                                                     ; redirect proc stderr to stdout (default false)stdout_logfile=/data/logs/kubernetes/kube-proxy/kube-proxy.stdout.log ; stderr log path, NONE for none; default AUTOstdout_logfile_maxbytes=64MB                                             ; max # logfile bytes b4 rotation (default 50MB)stdout_logfile_backups=4                                                 ; # of stdout logfile backups (default 10)stdout_capture_maxbytes=1MB                                              ; number of bytes in &#x27;capturemode&#x27; (default 0)stdout_events_enabled=false                                              ; emit events on stdout writes (default false)supervisorctl update"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230824115519.png" alt="image.png"></p>
<h4 id="464-ÊéàÊùÉapiserverËÆøÈóÆkubelet">4.6.4 ÊéàÊùÉapiserverËÆøÈóÆkubelet</h4>
<p>Â¶ÇÊûú‰∏çÂÅöËØ•ÊéàÊùÉÁöÑËØùÔºå‰ºöÂØºËá¥kubectlÊó†Ê≥ïËé∑ÂèñÂà∞ÈõÜÁæ§ÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØÔºåÊØîÂ¶Çlogs.
ÂàõÂª∫‰∏Ä‰∏™RBACËµÑÊ∫ê‰ΩøÂæóapiserverËÉΩÂ§üËÆøÈóÆkubeletÔºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apiserver2kubelet-rbac.yaml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">apiVersion:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">rbac.authorization.k8s.io/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kind:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ClusterRole</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">annotations:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">rbac.authorization.kubernetes.io/autoupdate:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">true</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">labels:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">kubernetes.io/bootstrapping:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">rbac-defaults</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">system:kube-apiserver-to-kubelet</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">rules:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apiGroups:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">""</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">resources:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">nodes/proxy</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">nodes/stats</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">nodes/log</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">nodes/spec</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">nodes/metrics</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">pods/log</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">verbs:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">*</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">apiVersion:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">rbac.authorization.k8s.io/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kind:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ClusterRoleBinding</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">system:kube-apiserver</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">namespace:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">""</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">roleRef:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">apiGroup:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">rbac.authorization.k8s.io</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">kind:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ClusterRole</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">system:kube-apiserver-to-kubelet</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">subjects:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apiGroup:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">rbac.authorization.k8s.io</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">kind:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">User</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apply</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-f</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apiserver2kubelet-rbac.yaml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># output</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">clusterrole.rbac.authorization.k8s.io/system:apiserver2kubelet</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">created</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">clusterrolebinding.rbac.authorization.k8s.io/system:kube-apiserver</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">created</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cd /etc/kubernetes/configvim apiserver2kubelet-rbac.yamlapiVersion: rbac.authorization.k8s.io/v1kind: ClusterRolemetadata:  annotations:    rbac.authorization.kubernetes.io/autoupdate: &#x22;true&#x22;  labels:    kubernetes.io/bootstrapping: rbac-defaults  name: system:kube-apiserver-to-kubeletrules:  - apiGroups:      - &#x22;&#x22;    resources:      - nodes/proxy      - nodes/stats      - nodes/log      - nodes/spec      - nodes/metrics      - pods/log    verbs:      - &#x22;*&#x22;---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata:  name: system:kube-apiserver  namespace: &#x22;&#x22;roleRef:  apiGroup: rbac.authorization.k8s.io  kind: ClusterRole  name: system:kube-apiserver-to-kubeletsubjects:  - apiGroup: rbac.authorization.k8s.io    kind: User    name: kuberneteskubectl apply -f apiserver2kubelet-rbac.yamlclusterrole.rbac.authorization.k8s.io/system:apiserver2kubelet createdclusterrolebinding.rbac.authorization.k8s.io/system:kube-apiserver created"><div></div></button></div></figure></div>
<h4 id="465-ÈÉ®ÁΩ≤flannelÁΩëÁªúÁªÑ‰ª∂">4.6.5 ÈÉ®ÁΩ≤flannelÁΩëÁªúÁªÑ‰ª∂</h4>
<p>ÈÉ®ÁΩ≤ÂÆå‰ª•‰∏äÁªÑ‰ª∂‰πãÂêéÔºå‰ΩøÁî®<code dir="auto">kubectl get nodes</code>ÂèëÁé∞Êñ∞Âä†ËøõÊù•ÁöÑmasterËäÇÁÇπÂ§Ñ‰∫é<code dir="auto">NotReady</code>Áä∂ÊÄÅÔºåÂéüÂõ†ÊòØÊ≤°ÊúâÁΩëÁªúÁªÑ‰ª∂Ôºå‰∏ÄÊó¶ÂÆâË£ÖÂ•ΩÁΩëÁªúÁªÑ‰ª∂‰ºöÁ´ãÂç≥Âèò‰∏∫<code dir="auto">Ready</code>Áä∂ÊÄÅ„ÄÇ</p>
<p>ÈÖçÁΩÆcontainerd‰ΩøÁî®‰ª£ÁêÜÂíåÁßÅÊúâ‰ªìÔºà‰∏çÁÑ∂ÈïúÂÉèÊãâ‰∏ç‰∏ãÊù•ÂñîÔºâÔºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÈÖçÁΩÆ‰ª£ÁêÜ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/lib/systemd/system/containerd.service</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Âú®ServicesÈÖçÁΩÆÊÆµÊ∑ªÂä†</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[Service]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">...</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">Environment</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">HTTP_PROXY=172.19.82.100:7891</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">Environment</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">HTTPS_PROXY=172.19.82.100:7891</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">...</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">systemctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">daemon-reload</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ÈÖçÁΩÆÁßÅÊúâ‰ªì</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/containerd/config.toml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Â§ßÊ¶ÇÁ¨¨149Ë°åÂºÄÂßã</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">...</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">[plugins.</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">io.containerd.grpc.v1.cri</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">.registry.configs]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">[plugins.</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">io.containerd.grpc.v1.cri</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">.registry.configs.</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">harbor.xxx.local</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">.auth]</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">username</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">al-admin</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">password</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">52PXZ2IDNWzk</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">[plugins.</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">io.containerd.grpc.v1.cri</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">.registry.configs.</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">harbor.xxx.local</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">.tls]</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">insecure_skip_verify</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">[plugins.</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">io.containerd.grpc.v1.cri</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">.registry.mirrors]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">[plugins.</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">io.containerd.grpc.v1.cri</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">.registry.mirrors.</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">harbor.xxx.local</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span class="indent">         </span><span style="--0:#82AAFF;--1:#3C63B3">endpoint</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">=</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">https://harbor.xxx.local</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">...</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">systemctl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">restart</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">containerd</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="vim /lib/systemd/system/containerd.service[Service]...Environment=&#x22;HTTP_PROXY=172.19.82.100:7891&#x22;Environment=&#x22;HTTPS_PROXY=172.19.82.100:7891&#x22;...systemctl daemon-reloadvim /etc/containerd/config.toml...      [plugins.&#x22;io.containerd.grpc.v1.cri&#x22;.registry.configs]        [plugins.&#x22;io.containerd.grpc.v1.cri&#x22;.registry.configs.&#x22;harbor.xxx.local&#x22;.auth]        username = &#x22;al-admin&#x22;        password = &#x22;52PXZ2IDNWzk&#x22;        [plugins.&#x22;io.containerd.grpc.v1.cri&#x22;.registry.configs.&#x22;harbor.xxx.local&#x22;.tls]        insecure_skip_verify = true      [plugins.&#x22;io.containerd.grpc.v1.cri&#x22;.registry.mirrors]        [plugins.&#x22;io.containerd.grpc.v1.cri&#x22;.registry.mirrors.&#x22;harbor.xxx.local&#x22;]         endpoint = [&#x22;https://harbor.xxx.local&#x22;]...systemctl restart containerd"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230824134826.png" alt="image.png"></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">wget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Â¶ÇÊûú‰Ω†Áî®ÁöÑ‰∏çÊòØ10.244.0.0/16Ëøô‰∏™ÁΩëÊÆµÔºåÂàôÈúÄË¶ÅÊâãÂä®‰øÆÊîπkube-flannel.ymlËµÑÊ∫êÈÖçÁΩÆÊñá‰ª∂„ÄÇ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Â¶Ç</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-flannel.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">...</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">net-conf.json:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">|</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">"Network"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">10.96.0.0/16</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#3C63B3">,</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#809191;--1:#616671"># ÊîπËøôÈáå</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">"Backend"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">"Type"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">vxlan</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">...</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apply</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-f</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-flannel.yml</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cd /etc/kubernetes/configwget https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.ymlvim kube-flannel.yml...  net-conf.json: |    {      &#x22;Network&#x22;: &#x22;10.96.0.0/16&#x22;,   # ÊîπËøôÈáå      &#x22;Backend&#x22;: {        &#x22;Type&#x22;: &#x22;vxlan&#x22;      }    }...kubectl apply -f kube-flannel.yml"><div></div></button></div></figure></div>
<p>Ê£ÄÊü•flannelËøêË°åÁä∂ÊÄÅ<code dir="auto">kubectl get po -n kube-flannel</code>
<img src="https://cdn.agou-ops.cn/others/20230825141026.png" alt="image.png"></p>
<h3 id="47-Ê£ÄÊü•masterËäÇÁÇπÈÉ®ÁΩ≤ÁªìÊûú">4.7 Ê£ÄÊü•masterËäÇÁÇπÈÉ®ÁΩ≤ÁªìÊûú</h3>
<h4 id="471-Ê£ÄÊü•ÊúçÂä°ËøêË°åÁä∂ÊÄÅ">4.7.1 Ê£ÄÊü•ÊúçÂä°ËøêË°åÁä∂ÊÄÅ</h4>
<ul>
<li>ÊúçÂä°ËøêË°åÁä∂ÊÄÅÔºà<code dir="auto">supervisorctl status</code>ÔºâÔºö
<img src="https://cdn.agou-ops.cn/others/20230825141505.png" alt="image.png"></li>
<li>ÁªÑ‰ª∂Áä∂ÊÄÅÔºà<code dir="auto">kubectl get cs</code>ÔºâÔºö
<img src="https://cdn.agou-ops.cn/others/20230825141536.png" alt="image.png"></li>
<li>masterËäÇÁÇπÁä∂ÊÄÅ(<code dir="auto">kubectl get node -owide</code>)
<img src="https://cdn.agou-ops.cn/others/20230825141605.png" alt="image.png">
Â¶ÇÊûú‰ª•‰∏äÊúâÊä•ÈîôÔºåÂ∞±ÂõûÂ§¥Ê£ÄÊü•ÊàñËÄÖÈáçÊñ∞ÈÉ®ÁΩ≤‰∏Ä‰∏ãÊúâÈóÆÈ¢òÁöÑÊúçÂä°Âç≥ÂèØ„ÄÇ</li>
</ul>
<h4 id="472-ÈôÑÊñá‰ª∂ÂàóË°®ÂèäÁÆÄ‰ªã">4.7.2 ÈôÑÔºöÊñá‰ª∂ÂàóË°®ÂèäÁÆÄ‰ªã</h4>
<ul>
<li>ËØÅ‰π¶ÂèäÈÖçÁΩÆÊñá‰ª∂‰∏ÄËßàÔºö</li>
</ul>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span class="indent"> </span><span style="--0:#82AAFF;--1:#3C63B3">tree</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">/etc/kubernetes/</span><span style="--0:#D6DEEB;--1:#403F53">             </span><span style="--0:#809191;--1:#616671"># ËØ•ÁõÆÂΩï‰∏∫k8sÈõÜÁæ§ÁöÑÊâÄÊúâËØÅ‰π¶ÂíåÈÖçÁΩÆÊñá‰ª∂Â≠òÊîæÁõÆÂΩï</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">TLS</span><span style="--0:#D6DEEB;--1:#403F53">                      </span><span style="--0:#809191;--1:#616671"># ËØÅ‰π¶Â≠òÊîæÁõÆÂΩï</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd</span><span style="--0:#D6DEEB;--1:#403F53">                 </span><span style="--0:#809191;--1:#616671"># etcdËØÅ‰π¶Â≠òÊîæÁõÆÂΩïÔºåÂçïÁã¨ÁöÑ‰∏Ä‰∏™CA</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca-config.json</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#809191;--1:#616671"># caÈÖçÁΩÆÊñá‰ª∂</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca-csr.json</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#809191;--1:#616671"># caËØ∑Ê±ÇÈÖçÁΩÆÊñá‰ª∂</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca-key.pem</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#809191;--1:#616671"># caÁßÅÈí•</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca.csr</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd-server-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd-server-key.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd-server.csr</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îî‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd-server.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îî‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">k8s</span><span style="--0:#D6DEEB;--1:#403F53">                  </span><span style="--0:#809191;--1:#616671"># k8sÈõÜÁæ§ÁªÑ‰ª∂ËØÅ‰π¶ÁõÆÂΩï</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca-config.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca-key.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca.csr</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-apiserver-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-apiserver-key.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-apiserver.csr</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-apiserver.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-controller-manager-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-controller-manager-key.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-controller-manager.csr</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-controller-manager.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-scheduler-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-scheduler-key.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-scheduler.csr</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-scheduler.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubectl-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubectl-key.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubectl.csr</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubectl.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">proxy-client</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">front-proxy-ca-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">front-proxy-ca-key.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">front-proxy-ca.csr</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">front-proxy-ca.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">front-proxy-client-csr.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">front-proxy-client-key.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">front-proxy-client.csr</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îî‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">front-proxy-client.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">sa.key</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îî‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">sa.pub</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span><span style="--0:#D6DEEB;--1:#403F53">               </span><span style="--0:#809191;--1:#616671"># ÊâÄÊúâÈÖçÁΩÆÔºåÂåÖÊã¨ËÆ§ËØÅÂíåÂêÑÁßçkubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apiserver2kubelet-rbac.yaml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">bootstrap.secret.yaml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-controller-manager.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-flannel.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-proxy-config.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-proxy-scret.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-proxy.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-scheduler.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet-bootstrap.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet-conf.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îî‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îî‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">manifests</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">7</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">directories,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">51</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">files</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="tree /etc/kubernetes//etc/kubernetes/             # ËØ•ÁõÆÂΩï‰∏∫k8sÈõÜÁæ§ÁöÑÊâÄÊúâËØÅ‰π¶ÂíåÈÖçÁΩÆÊñá‰ª∂Â≠òÊîæÁõÆÂΩï‚îú‚îÄ‚îÄ TLS                      # ËØÅ‰π¶Â≠òÊîæÁõÆÂΩï‚îÇ¬†¬† ‚îú‚îÄ‚îÄ etcd                 # etcdËØÅ‰π¶Â≠òÊîæÁõÆÂΩïÔºåÂçïÁã¨ÁöÑ‰∏Ä‰∏™CA‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ca-config.json   # caÈÖçÁΩÆÊñá‰ª∂‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ca-csr.json      # caËØ∑Ê±ÇÈÖçÁΩÆÊñá‰ª∂‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ca-key.pem       # caÁßÅÈí•‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ca.csr‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ca.pem‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ etcd-server-csr.json‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ etcd-server-key.pem‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ etcd-server.csr‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ etcd-server.pem‚îÇ¬†¬† ‚îî‚îÄ‚îÄ k8s                  # k8sÈõÜÁæ§ÁªÑ‰ª∂ËØÅ‰π¶ÁõÆÂΩï‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ ca-config.json‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ ca-csr.json‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ ca-key.pem‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ ca.csr‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ ca.pem‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kube-apiserver-csr.json‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kube-apiserver-key.pem‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kube-apiserver.csr‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kube-apiserver.pem‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kube-controller-manager-csr.json‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kube-controller-manager-key.pem‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kube-controller-manager.csr‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kube-controller-manager.pem‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kube-scheduler-csr.json‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kube-scheduler-key.pem‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kube-scheduler.csr‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kube-scheduler.pem‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kubectl-csr.json‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kubectl-key.pem‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kubectl.csr‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ kubectl.pem‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ proxy-client‚îÇ¬†¬†     ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ front-proxy-ca-csr.json‚îÇ¬†¬†     ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ front-proxy-ca-key.pem‚îÇ¬†¬†     ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ front-proxy-ca.csr‚îÇ¬†¬†     ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ front-proxy-ca.pem‚îÇ¬†¬†     ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ front-proxy-client-csr.json‚îÇ¬†¬†     ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ front-proxy-client-key.pem‚îÇ¬†¬†     ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ front-proxy-client.csr‚îÇ¬†¬†     ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ front-proxy-client.pem‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ sa.key‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ sa.pub‚îú‚îÄ‚îÄ config               # ÊâÄÊúâÈÖçÁΩÆÔºåÂåÖÊã¨ËÆ§ËØÅÂíåÂêÑÁßçkubeconfig‚îÇ¬†¬† ‚îú‚îÄ‚îÄ apiserver2kubelet-rbac.yaml‚îÇ¬†¬† ‚îú‚îÄ‚îÄ bootstrap.secret.yaml‚îÇ¬†¬† ‚îú‚îÄ‚îÄ kube-controller-manager.kubeconfig‚îÇ¬†¬† ‚îú‚îÄ‚îÄ kube-flannel.yml‚îÇ¬†¬† ‚îú‚îÄ‚îÄ kube-proxy-config.yml‚îÇ¬†¬† ‚îú‚îÄ‚îÄ kube-proxy-scret.yml‚îÇ¬†¬† ‚îú‚îÄ‚îÄ kube-proxy.kubeconfig‚îÇ¬†¬† ‚îú‚îÄ‚îÄ kube-scheduler.kubeconfig‚îÇ¬†¬† ‚îú‚îÄ‚îÄ kubelet-bootstrap.kubeconfig‚îÇ¬†¬† ‚îú‚îÄ‚îÄ kubelet-conf.yml‚îÇ¬†¬† ‚îî‚îÄ‚îÄ kubelet.kubeconfig‚îî‚îÄ‚îÄ manifests7 directories, 51 files"><div></div></button></div></figure></div>
<ul>
<li>k8s‰∫åËøõÂà∂Á®ãÂ∫è‰ª•ÂèäÂêØÂä®ËÑöÊú¨‰∏ÄËßàÔºö</li>
</ul>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ‰ª•.shÁªìÂ∞æÁöÑÂ∞±ÊòØÂØπÂ∫îÊúçÂä°ÁöÑÂêØÂä®ËÑöÊú¨</span></div></div><div class="ec-line"><div class="code"><span class="indent"> </span><span style="--0:#82AAFF;--1:#3C63B3">tree</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">/usr/local/kubernetes/server/bin/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apiextensions-apiserver</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-aggregator</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-apiserver</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-apiserver-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-controller-manager</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-controller-manager-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-log-runner</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-proxy</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-proxy-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-scheduler</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-scheduler-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubeadm</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubectl</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubectl-convert</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îî‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">mounter</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">directory,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">17</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">files</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="tree /usr/local/kubernetes/server/bin//usr/local/kubernetes/server/bin/‚îú‚îÄ‚îÄ apiextensions-apiserver‚îú‚îÄ‚îÄ kube-aggregator‚îú‚îÄ‚îÄ kube-apiserver‚îú‚îÄ‚îÄ kube-apiserver-startup.sh‚îú‚îÄ‚îÄ kube-controller-manager‚îú‚îÄ‚îÄ kube-controller-manager-startup.sh‚îú‚îÄ‚îÄ kube-log-runner‚îú‚îÄ‚îÄ kube-proxy‚îú‚îÄ‚îÄ kube-proxy-startup.sh‚îú‚îÄ‚îÄ kube-scheduler‚îú‚îÄ‚îÄ kube-scheduler-startup.sh‚îú‚îÄ‚îÄ kubeadm‚îú‚îÄ‚îÄ kubectl‚îú‚îÄ‚îÄ kubectl-convert‚îú‚îÄ‚îÄ kubelet‚îú‚îÄ‚îÄ kubelet-startup.sh‚îî‚îÄ‚îÄ mounter1 directory, 17 files"><div></div></button></div></figure></div>
<ul>
<li>supervisorÈÖçÁΩÆÊñá‰ª∂‰∏ÄËßàÔºö</li>
</ul>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># k8sÂêÑÁªÑ‰ª∂ÁöÑsupervisorÈÖçÁΩÆ</span></div></div><div class="ec-line"><div class="code"><span class="indent"> </span><span style="--0:#82AAFF;--1:#3C63B3">tree</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/supervisor/conf.d/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">/etc/supervisor/conf.d/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apiserver.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">controller-manager.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd-server.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-proxy.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îî‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">scheduler.conf</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">directory,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">6</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">files</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="tree /etc/supervisor/conf.d//etc/supervisor/conf.d/‚îú‚îÄ‚îÄ apiserver.conf‚îú‚îÄ‚îÄ controller-manager.conf‚îú‚îÄ‚îÄ etcd-server.conf‚îú‚îÄ‚îÄ kube-proxy.conf‚îú‚îÄ‚îÄ kubelet.conf‚îî‚îÄ‚îÄ scheduler.conf1 directory, 6 files"><div></div></button></div></figure></div>
<h2 id="‰∫îÈÉ®ÁΩ≤nodeËäÇÁÇπ">‰∫î„ÄÅÈÉ®ÁΩ≤nodeËäÇÁÇπ</h2>
<p><strong>ÂÖ∂ÂÆûÂÆåÂÖ®ÂèØ‰ª•ÂêàÂπ∂Êàê‰∏Ä‰∏™Ôºå‰ΩÜÊòØ‰∏∫‰∫ÜÊù°ÁêÜÊ∏ÖÊô∞ÔºåÊâÄ‰ª•ÊãÜÂºÄÂçïÁã¨ÂºÑ„ÄÇ</strong>
Âú®master‰∏äÂ∞ÜkubeletÂíåkube-proxy‰∫åËøõÂà∂Êñá‰ª∂ÂàÜÂèë‰∏ãÂéªÔºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">in</span><span style="--0:#D6DEEB;--1:#403F53"> node01 node02; </span><span style="--0:#C792EA;--1:#8D46B4">do</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#616671"># ÂàõÂª∫Á®ãÂ∫èÁõÆÂΩï</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">ssh</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">mkdir -pv /usr/local/kubernetes/server/bin</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#616671"># ÂàÜÂèëbootstrapËÆ§ËØÅÊñá‰ª∂</span></div></div><div class="ec-line"><div class="code"><span class="indent"> </span><span style="--0:#82AAFF;--1:#3C63B3">scp</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-r</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kubelet</span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kube-proxy</span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$i</span><span style="--0:#ECC48D;--1:#3C63B3">:/usr/local/kubernetes/server/bin</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#616671"># Â¢ûÂä†ÂèØÊâßË°åÊùÉÈôê</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">ssh</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">chmod +x /usr/local/kubernetes/server/bin/*</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">done</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="for i in node01 node02; do  ssh $i &#x22;mkdir -pv /usr/local/kubernetes/server/bin&#x22; scp -r /usr/local/kubernetes/server/bin/kubelet* /usr/local/kubernetes/server/bin/kube-proxy* $i:/usr/local/kubernetes/server/bin  ssh $i &#x22;chmod +x /usr/local/kubernetes/server/bin/*&#x22;done"><div></div></button></div></figure></div>
<h3 id="51-ÈÉ®ÁΩ≤kubelet">5.1 ÈÉ®ÁΩ≤kubelet</h3>
<p>Âú®masterËäÇÁÇπ‰∏äÂàÜÂèëËÆ§ËØÅÊñá‰ª∂ÂèäkubeletÈÖçÁΩÆÊñá‰ª∂Ôºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">in</span><span style="--0:#D6DEEB;--1:#403F53"> node01 node02; </span><span style="--0:#C792EA;--1:#8D46B4">do</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#616671"># ÈÖçÁΩÆËØÅ‰π¶ÂèäÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩï</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">ssh</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">mkdir -pv /etc/kubernetes/{TLS,config,manifests}</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#616671"># ÂàÜÂèëbootstrapËÆ§ËØÅÊñá‰ª∂</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">scp</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config/kubelet-bootstrap.kubeconfig</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$i</span><span style="--0:#ECC48D;--1:#3C63B3">:/etc/kubernetes/config/kubelet-bootstrap.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#616671"># Â§çÂà∂ÈÖçÁΩÆÊñá‰ª∂</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">scp</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config/kubelet-conf.yml</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$i</span><span style="--0:#ECC48D;--1:#3C63B3">:/etc/kubernetes/config/kubelet-conf.yml</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">scp</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/TLS/k8s/ca.pem</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$i</span><span style="--0:#ECC48D;--1:#3C63B3">:/etc/kubernetes/TLS/k8s/ca.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">done</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="for i in node01 node02; do  ssh $i &#x22;mkdir -pv /etc/kubernetes/{TLS,config,manifests}&#x22;  scp /etc/kubernetes/config/kubelet-bootstrap.kubeconfig $i:/etc/kubernetes/config/kubelet-bootstrap.kubeconfig  scp /etc/kubernetes/config/kubelet-conf.yml $i:/etc/kubernetes/config/kubelet-conf.yml  scp /etc/kubernetes/TLS/k8s/ca.pem $i:/etc/kubernetes/TLS/k8s/ca.pemdone"><div></div></button></div></figure></div>
<p>ÈÖçÁΩÆsupervisorÔºàÂíåmasterËäÇÁÇπÁ±ª‰ººÔºåÊâÄ‰ª•Áõ¥Êé•Â§çÂà∂ËøáÂéªÂ•Ω‰∫ÜÔºâÔºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">in</span><span style="--0:#D6DEEB;--1:#403F53"> node01 node02; </span><span style="--0:#C792EA;--1:#8D46B4">do</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#616671"># ÂàõÂª∫Êó•ÂøóÁõÆÂΩï</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">ssh</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">mkdir -pv /data/logs/kubernetes/kubelet</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#616671"># Â§çÂà∂kubeletÁöÑsupervisorÈÖçÁΩÆÊñá‰ª∂</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">scp</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/supervisor/conf.d/kubelet.conf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$i</span><span style="--0:#ECC48D;--1:#3C63B3">:/etc/supervisor/conf.d/kubelet.conf</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#616671"># ‰øÆÊîπidÔºåÊñπ‰æøÂå∫ÂàÜÔºåËøôÈáå‰∏çÁü•‰∏∫‰Ωï‰∏ãÈù¢ÂëΩ‰ª§‰∏çËÉΩÁî®„ÄÇ„ÄÇÔºàÊâãÂä®Êîπ‰∏Ä‰∏ãÂêß</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#616671"># ssh $i "id=`ip a show dev eth0 | grep -w inet | awk '{print $2}' | sed -e 's/.*\.\([0-9]\+\)\/.*/\1/'` ; sed -i "s/157/$id/" /etc/supervisor/conf.d/kubelet.conf"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">done</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="for i in node01 node02; do  ssh $i &#x22;mkdir -pv /data/logs/kubernetes/kubelet&#x22;  scp /etc/supervisor/conf.d/kubelet.conf $i:/etc/supervisor/conf.d/kubelet.confdone"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230825150503.png" alt="image.png">
ÊîπÂÆå‰πãÂêéÂú®node01Âíånode02ÂàÜÂà´ÊâßË°åÔºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># node01</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">IP</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--1:#3C63B3"><span style="--0:#ECC48D">`</span><span style="--0:#82AAFF">ip</span><span style="--0:#ECC48D"> a show dev eth0 </span></span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">grep</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-w</span><span style="--0:#ECC48D"> inet </span></span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">awk</span><span style="--0:#ECC48D"> </span></span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">{print $2}</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#3C63B3"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">cut</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-d</span><span style="--0:#ECC48D"> </span></span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">/</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-f</span><span style="--0:#ECC48D"> </span></span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">`</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">sed</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">s/172.19.82.157/</span><span style="--0:#C5E478;--1:#3C63B3">$IP</span><span style="--0:#ECC48D;--1:#9B504E">/</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config/kubelet-conf.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">sed</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">s/master0/node01/</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kubelet-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">supervisor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">update</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># node02</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">IP</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--1:#3C63B3"><span style="--0:#ECC48D">`</span><span style="--0:#82AAFF">ip</span><span style="--0:#ECC48D"> a show dev eth0 </span></span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">grep</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-w</span><span style="--0:#ECC48D"> inet </span></span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">awk</span><span style="--0:#ECC48D"> </span></span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">{print $2}</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#3C63B3"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">cut</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-d</span><span style="--0:#ECC48D"> </span></span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">/</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-f</span><span style="--0:#ECC48D"> </span></span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">`</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">sed</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">s/172.19.82.157/</span><span style="--0:#C5E478;--1:#3C63B3">$IP</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config/kubelet-conf.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">sed</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">s/master0/node02/</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/kubelet-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">supervisor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">update</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="IP=&#x60;ip a show dev eth0 | grep -w inet | awk &#x27;{print $2}&#x27; | cut -d &#x27;/&#x27; -f 1&#x60;sed -i &#x22;s/172.19.82.157/$IP/&#x22; /etc/kubernetes/config/kubelet-conf.ymlsed -i &#x22;s/master0/node01/&#x22; /usr/local/kubernetes/server/bin/kubelet-startup.shsupervisor updateIP=&#x60;ip a show dev eth0 | grep -w inet | awk &#x27;{print $2}&#x27; | cut -d &#x27;/&#x27; -f 1&#x60;sed -i &#x22;s/172.19.82.157/$IP&#x22; /etc/kubernetes/config/kubelet-conf.ymlsed -i &#x22;s/master0/node02/&#x22; /usr/local/kubernetes/server/bin/kubelet-startup.shsupervisor update"><div></div></button></div></figure></div>
<p>ÂêØÂä®ÂÆåÊàê‰πãÂêéÂú®masterËäÇÁÇπ‰∏äÂèØ‰ª•ÁúãÂà∞Ôºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">get</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">nodes</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># output</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">STATUS</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">ROLES</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">VERSION</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">master0</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">Ready</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">125</span><span style="--0:#ECC48D;--1:#3C63B3">m</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">v1.25.12</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">node01</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">NotReady</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">12</span><span style="--0:#ECC48D;--1:#3C63B3">s</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">v1.25.12</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">node02</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">NotReady</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#ECC48D;--1:#3C63B3">m27s</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">v1.25.12</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="kubectl get nodesNAME      STATUS     ROLES    AGE     VERSIONmaster0   Ready      <none>   125m    v1.25.12node01    NotReady   <none>   12s     v1.25.12node02    NotReady   <none>   3m27s   v1.25.12"><div></div></button></div></figure></div>
<h3 id="52-ÈÉ®ÁΩ≤kube-proxy">5.2 ÈÉ®ÁΩ≤kube-proxy</h3>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Âú®masterËäÇÁÇπ‰∏äÊâßË°å</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">in</span><span style="--0:#D6DEEB;--1:#403F53"> node01 node02; </span><span style="--0:#C792EA;--1:#8D46B4">do</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">ssh</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">mkdir -pv /data/logs/kubernetes/kube-proxy/</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#616671"># Êã∑Ë¥ùkube-proxyÈÖçÁΩÆÂà∞nodeËäÇÁÇπ</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">scp</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config/kube-proxy.kubeconfig</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$i</span><span style="--0:#ECC48D;--1:#3C63B3">:/etc/kubernetes/config/kube-proxy.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">scp</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config/kube-proxy-conf.yml</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$i</span><span style="--0:#ECC48D;--1:#3C63B3">:/etc/kubernetes/config/kube-proxy-conf.yml</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">scp</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/supervisor/conf.d/kube-proxy.conf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$i</span><span style="--0:#ECC48D;--1:#3C63B3">:/etc/supervisor/conf.d/kube-proxy.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">done</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Âú®node01ËäÇÁÇπ‰∏äÊâßË°å</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">IP</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--1:#3C63B3"><span style="--0:#ECC48D">`</span><span style="--0:#82AAFF">ip</span><span style="--0:#ECC48D"> a show dev eth0 </span></span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">grep</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-w</span><span style="--0:#ECC48D"> inet </span></span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">awk</span><span style="--0:#ECC48D"> </span></span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">{print $2}</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#3C63B3"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">cut</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-d</span><span style="--0:#ECC48D"> </span></span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">/</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-f</span><span style="--0:#ECC48D"> </span></span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">`</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">sed</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">s/172.19.82.157/</span><span style="--0:#C5E478;--1:#3C63B3">$IP</span><span style="--0:#ECC48D;--1:#9B504E">/</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config/kube-proxy-conf.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">supervisor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">update</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Âú®node02ËäÇÁÇπ‰∏äÊâßË°å</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">IP</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--1:#3C63B3"><span style="--0:#ECC48D">`</span><span style="--0:#82AAFF">ip</span><span style="--0:#ECC48D"> a show dev eth0 </span></span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">grep</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-w</span><span style="--0:#ECC48D"> inet </span></span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">awk</span><span style="--0:#ECC48D"> </span></span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">{print $2}</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#3C63B3"> </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">cut</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-d</span><span style="--0:#ECC48D"> </span></span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">/</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-f</span><span style="--0:#ECC48D"> </span></span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">`</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">sed</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">s/172.19.82.157/</span><span style="--0:#C5E478;--1:#3C63B3">$IP</span><span style="--0:#ECC48D;--1:#9B504E">/</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config/kube-proxy-conf.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">supervisor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">update</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="for i in node01 node02; do  ssh $i &#x22;mkdir -pv /data/logs/kubernetes/kube-proxy/&#x22;  scp /etc/kubernetes/config/kube-proxy.kubeconfig $i:/etc/kubernetes/config/kube-proxy.kubeconfig  scp /etc/kubernetes/config/kube-proxy-conf.yml $i:/etc/kubernetes/config/kube-proxy-conf.yml  scp /etc/supervisor/conf.d/kube-proxy.conf $i:/etc/supervisor/conf.d/kube-proxy.confdoneIP=&#x60;ip a show dev eth0 | grep -w inet | awk &#x27;{print $2}&#x27; | cut -d &#x27;/&#x27; -f 1&#x60;sed -i &#x22;s/172.19.82.157/$IP/&#x22; /etc/kubernetes/config/kube-proxy-conf.ymlsupervisor updateIP=&#x60;ip a show dev eth0 | grep -w inet | awk &#x27;{print $2}&#x27; | cut -d &#x27;/&#x27; -f 1&#x60;sed -i &#x22;s/172.19.82.157/$IP/&#x22; /etc/kubernetes/config/kube-proxy-conf.ymlsupervisor update"><div></div></button></div></figure></div>
<h3 id="53-Ê£ÄÊü•nodeËäÇÁÇπÈÉ®ÁΩ≤ÁªìÊûú">5.3 Ê£ÄÊü•nodeËäÇÁÇπÈÉ®ÁΩ≤ÁªìÊûú</h3>
<h4 id="531-Ê£ÄÊü•ÊúçÂä°ËøêË°åÁä∂ÊÄÅ">5.3.1 Ê£ÄÊü•ÊúçÂä°ËøêË°åÁä∂ÊÄÅ</h4>
<ul>
<li>supervisorÊúçÂä°ËøêË°åÁä∂ÊÄÅÔºà<code dir="auto">sueprvisorctl status</code>ÔºâÔºö
<img src="https://cdn.agou-ops.cn/others/20230825154847.png" alt="image.png"></li>
<li>ÁΩëÁªúÁªÑ‰ª∂‰ª•ÂèäËäÇÁÇπÁä∂ÊÄÅÔºö(<code dir="auto">kubectl get node -owide/kubectl get po -A -owide</code>)Ôºö
<img src="https://cdn.agou-ops.cn/others/20230825155014.png" alt="image.png"></li>
</ul>
<h4 id="532-ÈôÑÊñá‰ª∂ÂàóË°®ÂèäÁÆÄ‰ªã">5.3.2 ÈôÑÔºöÊñá‰ª∂ÂàóË°®ÂèäÁÆÄ‰ªã</h4>
<p>‰ª•node01ËäÇÁÇπ‰∏∫‰æãÔºåÂÖ∂‰ªñnodeËäÇÁÇπÈÉΩ‰∏ÄÊ†∑„ÄÇ</p>
<ul>
<li>ËØÅ‰π¶ÂèäÈÖçÁΩÆÊñá‰ª∂‰∏ÄËßàÔºö</li>
</ul>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span class="indent"> </span><span style="--0:#82AAFF;--1:#3C63B3">tree</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">/etc/kubernetes/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">TLS</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca-key.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd-server-key.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îî‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd-server.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îî‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">k8s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">‚îî‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ca.pem</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">config</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-proxy-conf.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-proxy-config.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-proxy.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet-bootstrap.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet-conf.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îÇ¬†¬†</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">‚îî‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet.kubeconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îî‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">manifests</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">6</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">directories,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">11</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">files</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="tree /etc/kubernetes//etc/kubernetes/‚îú‚îÄ‚îÄ TLS‚îÇ¬†¬† ‚îú‚îÄ‚îÄ etcd‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ca-key.pem‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ca.pem‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ etcd-server-key.pem‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ etcd-server.pem‚îÇ¬†¬† ‚îî‚îÄ‚îÄ k8s‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ ca.pem‚îú‚îÄ‚îÄ config‚îÇ¬†¬† ‚îú‚îÄ‚îÄ kube-proxy-conf.yml‚îÇ¬†¬† ‚îú‚îÄ‚îÄ kube-proxy-config.yml‚îÇ¬†¬† ‚îú‚îÄ‚îÄ kube-proxy.kubeconfig‚îÇ¬†¬† ‚îú‚îÄ‚îÄ kubelet-bootstrap.kubeconfig‚îÇ¬†¬† ‚îú‚îÄ‚îÄ kubelet-conf.yml‚îÇ¬†¬† ‚îî‚îÄ‚îÄ kubelet.kubeconfig‚îî‚îÄ‚îÄ manifests6 directories, 11 files"><div></div></button></div></figure></div>
<ul>
<li>supervisorÈÖçÁΩÆÊñá‰ª∂‰∏ÄËßàÔºö</li>
</ul>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tree</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/supervisor/conf.d/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">/etc/supervisor/conf.d/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">etcd-server.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-proxy.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îî‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet.conf</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">directory,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">files</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="tree /etc/supervisor/conf.d//etc/supervisor/conf.d/‚îú‚îÄ‚îÄ etcd-server.conf‚îú‚îÄ‚îÄ kube-proxy.conf‚îî‚îÄ‚îÄ kubelet.conf1 directory, 3 files"><div></div></button></div></figure></div>
<ul>
<li>k8sÁªÑ‰ª∂‰∫åËøõÂà∂Á®ãÂ∫èÂèäÂØπÂ∫îÂêØÂä®ËÑöÊú¨‰∏ÄËßàÔºö</li>
</ul>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tree</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/usr/local/kubernetes/server/bin/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">/usr/local/kubernetes/server/bin/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-proxy</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kube-proxy-startup.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îú‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">‚îî‚îÄ‚îÄ</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubelet-startup.sh</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">directory,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">files</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="tree /usr/local/kubernetes/server/bin//usr/local/kubernetes/server/bin/‚îú‚îÄ‚îÄ kube-proxy‚îú‚îÄ‚îÄ kube-proxy-startup.sh‚îú‚îÄ‚îÄ kubelet‚îî‚îÄ‚îÄ kubelet-startup.sh1 directory, 4 files"><div></div></button></div></figure></div>
<h2 id="ÂÖ≠ÂÖ∂‰ªñÂèØÈÄâÁªÑ‰ª∂ÂÆâË£Ö">ÂÖ≠„ÄÅÂÖ∂‰ªñÂèØÈÄâÁªÑ‰ª∂ÂÆâË£Ö</h2>
<h3 id="61-coredns">6.1 coredns</h3>
<h4 id="611-ÈÉ®ÁΩ≤coredns">6.1.1 ÈÉ®ÁΩ≤coredns</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Âú®masterËäÇÁÇπ‰∏äÊâßË°å</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/etc/kubernetes/config</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">wget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://raw.githubusercontent.com/coredns/deployment/master/kubernetes/coredns.yaml.sed</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-O</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">coredns.yaml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ‰øÆÊîπËµÑÊ∫êÊ∏ÖÂçïÈáåÈù¢ÁöÑCorefileÂíåclusterIP</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">coredns.yaml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Á¨¨‰∏ÄÂ§Ñ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">...</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">Corefile:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">|</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C5E478;--1:#3C63B3">.</span><span style="--0:#D6DEEB;--1:#403F53">:53 </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">errors</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">health</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#82AAFF;--1:#3C63B3">lameduck</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#ECC48D;--1:#3C63B3">s</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">ready</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">kubernetes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cluster.local</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">in-addr.arpa</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ip6.arpa</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#809191;--1:#616671"># ‰øÆÊîπÂèçÂêëËß£Êûê</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#82AAFF;--1:#3C63B3">fallthrough</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">in-addr.arpa</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ip6.arpa</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">prometheus</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">:9153</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">forward</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">.</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8.8</span><span style="--0:#ECC48D;--1:#3C63B3">.8.8</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">{</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#809191;--1:#616671"># ‰øÆÊîπ‰∏∫Â§ñÈÉ®dnsËß£ÊûêÂú∞ÂùÄÔºåÂΩìcorednsËß£Êûê‰∏çÂà∞Êó∂‰ºö‰º†ÁªôËØ•dns</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#82AAFF;--1:#3C63B3">max_concurrent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1000</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">cache</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">30</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">loop</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">reload</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">loadbalance</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}                           </span><span style="--0:#809191;--1:#616671"># ËøôÂêéÈù¢Êúâ‰∏™STUBDOMAINSÂéªÊéâ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">...</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Á¨¨‰∫åÂ§ÑÔºåÂ§ßÊ¶Ç191Ë°å</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">...</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">clusterIP:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10.100</span><span style="--0:#ECC48D;--1:#3C63B3">.0.2</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">...</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ‰øÆÊîπÂÆåÊàê‰πãÂêé</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apply</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-f</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">coredns.yaml</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cd /etc/kubernetes/configwget https://raw.githubusercontent.com/coredns/deployment/master/kubernetes/coredns.yaml.sed -O coredns.yamlvim coredns.yaml...  Corefile: |    .:53 {        errors        health {          lameduck 5s        }        ready        kubernetes cluster.local in-addr.arpa ip6.arpa {  # ‰øÆÊîπÂèçÂêëËß£Êûê          fallthrough in-addr.arpa ip6.arpa        }        prometheus :9153        forward . 8.8.8.8 {          # ‰øÆÊîπ‰∏∫Â§ñÈÉ®dnsËß£ÊûêÂú∞ÂùÄÔºåÂΩìcorednsËß£Êûê‰∏çÂà∞Êó∂‰ºö‰º†ÁªôËØ•dns          max_concurrent 1000        }        cache 30        loop        reload        loadbalance    }                           # ËøôÂêéÈù¢Êúâ‰∏™STUBDOMAINSÂéªÊéâ......  clusterIP: 10.100.0.2...kubectl apply -f coredns.yaml"><div></div></button></div></figure></div>
<p>Ê£ÄÊü•corednsËøêË°åÁä∂ÊÄÅÔºö
<img src="https://cdn.agou-ops.cn/others/20230825162329.png" alt="image.png"></p>
<h4 id="ÊµãËØïcoredns">ÊµãËØïcoredns</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">helloworld.yaml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">apiVersion:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apps/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kind:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">Deployment</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">helloworld</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">spec:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">selector:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">matchLabels:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">app:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">helloworld</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">replicas:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">template:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">labels:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">app:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">helloworld</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">spec:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">containers:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">helloworld</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">image:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">karthequian/helloworld:latest</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">ports:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">containerPort:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">80</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">apiVersion:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kind:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">Service</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">helloworld-service</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">spec:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">selector:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">app:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">helloworld</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">ports:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">protocol:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">TCP</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">port:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">80</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">targetPort:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">80</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3C63B3">type</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">ClusterIP</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apply</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-f</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">helloworld.yaml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ËøêË°åÁΩëÁªúÊµãËØïÂÆπÂô®</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">tmp-shell</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--rm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--tty</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--image</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">nicolaka/netshoot</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tmp-shell</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ÓÇ∞</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">~</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ÓÇ∞</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">dig</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes.default.svc.cluster.local</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">+short</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">10.96.0.1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tmp-shell2</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ÓÇ∞</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">~</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ÓÇ∞</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">dig</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">helloworld-service.default.svc.cluster.local</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">+short</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">10.105.77.246</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="vim helloworld.yamlapiVersion: apps/v1kind: Deploymentmetadata:  name: helloworldspec:  selector:    matchLabels:      app: helloworld  replicas: 1  template:    metadata:      labels:        app: helloworld    spec:      containers:      - name: helloworld        image: karthequian/helloworld:latest        ports:        - containerPort: 80---apiVersion: v1kind: Servicemetadata:  name: helloworld-servicespec:  selector:    app: helloworld  ports:    - protocol: TCP      port: 80      targetPort: 80  type: ClusterIPkubectl apply -f helloworld.yamlkubectl run tmp-shell --rm -i --tty --image nicolaka/netshoottmp-shell ÓÇ∞ ~ ÓÇ∞ dig kubernetes.default.svc.cluster.local +short10.96.0.1tmp-shell2 ÓÇ∞ ~ ÓÇ∞ dig helloworld-service.default.svc.cluster.local +short10.105.77.246"><div></div></button></div></figure></div>
<h3 id="62-nginx-ingress">6.2 nginx ingress</h3>
<p>ÂèÇËÄÉÈìæÊé•Ôºö<a href="https://kubernetes.github.io/ingress-nginx/">https://kubernetes.github.io/ingress-nginx/</a></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">wget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.8.1/deploy/static/provider/baremetal/deploy.yaml</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-O</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">nginx-ingress.yaml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apply</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-f</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">nginx-ingress.yaml</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="wget https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.8.1/deploy/static/provider/baremetal/deploy.yaml -O nginx-ingress.yamlkubectl apply -f nginx-ingress.yaml"><div></div></button></div></figure></div>
<h3 id="63-Èù¢Êùø">6.3 Èù¢Êùø</h3>
<h4 id="631-dashboard">6.3.1 dashboard</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">wget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://raw.githubusercontent.com/kubernetes/dashboard/v3.0.0-alpha0/charts/kubernetes-dashboard.yaml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apply</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-f</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes-dashboard.yaml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># ‰øÆÊîπdashboardÁöÑServicesÁ±ªÂûã‰∏∫nodeportÔºåÊñπ‰æøËÆøÈóÆ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">--namespace</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes-dashboard</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">patch</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">svc</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes-dashboard</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-p</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">{"spec": {"type": "NodePort"}}</span><span style="--0:#D9F5DD;--1:#111111">'</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="wget https://raw.githubusercontent.com/kubernetes/dashboard/v3.0.0-alpha0/charts/kubernetes-dashboard.yamlkubectl apply -f kubernetes-dashboard.yamlkubectl --namespace kubernetes-dashboard patch svc kubernetes-dashboard -p &#x27;{&#x22;spec&#x22;: {&#x22;type&#x22;: &#x22;NodePort&#x22;}}&#x27;"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/20230825180332.png" alt="image.png">
ÂÆâË£ÖÂÆåÊàê‰πãÂêéÔºå‰ΩøÁî®‰∏Ä‰∏ãÂëΩ‰ª§Ëé∑ÂèñËá™Âä®ÂàÜÈÖçÁöÑnodeportÔºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">get</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">svc/kubernetes-dashboard</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-n</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes-dashboard</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-owide</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># output</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#ECC48D;--1:#3C63B3">TYPE</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#ECC48D;--1:#3C63B3">CLUSTER-IP</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">EXTERNAL-IP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">PORT</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">S</span><span style="--0:#D6DEEB;--1:#403F53">)         </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">SELECTOR</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubernetes-dashboard</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">NodePort</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">10.99</span><span style="--0:#ECC48D;--1:#3C63B3">.165.217</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#F78C6C;--1:#AA0982">443</span><span style="--0:#ECC48D;--1:#3C63B3">:36046/TCP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#ECC48D;--1:#3C63B3">m54s</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">k8s-app=kubernetes-dashboard</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="kubectl get svc/kubernetes-dashboard -n kubernetes-dashboard -owideNAME                   TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)         AGE     SELECTORkubernetes-dashboard   NodePort   10.99.165.217   <none>        443:36046/TCP   3m54s   k8s-app=kubernetes-dashboard"><div></div></button></div></figure></div>
<p>ËÆøÈóÆ‰ªª‰∏ÄËäÇÁÇπÁöÑIPÂä†‰∏äÈù¢ÁöÑnodeportÂç≥ÂèØÔºåÊØîÂ¶ÇÔºö<a href="https://172.19.82.157:36046/#/login">https://172.19.82.157:36046/#/login</a>
<img src="https://cdn.agou-ops.cn/others/20230827094647.png" alt="image.png">
ÂàõÂª∫sa‰ΩøÁî®tokenÁôªÂΩïdashboardÔºö</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">dashboard-sa.yaml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">apiVersion:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kind:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ServiceAccount</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">dashboard-admin</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">namespace:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes-dashboard</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">apiVersion:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">rbac.authorization.k8s.io/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kind:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ClusterRoleBinding</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">dashboard-admin-rolebinding</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">roleRef:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">apiGroup:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">rbac.authorization.k8s.io</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">kind:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ClusterRole</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">cluster-admin</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">subjects:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kind:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ServiceAccount</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">dashboard-admin</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">namespace:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes-dashboard</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ê≥®ÊÑèËæÉÊñ∞ÁâàÊú¨ÁöÑk8s‰∏ç‰ºöËá™Âä®ÂàõÂª∫secret</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">apiVersion:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kind:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">Secret</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">metadata:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">dashboard-admin-secret</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">namespace:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes-dashboard</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">annotations:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">kubernetes.io/service-account.name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">dashboard-admin</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">type</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes.io/service-account-token</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apply</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-f</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">dashboard-sa.yaml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Ëé∑Âèñtoken</span></div></div><div class="ec-line"><div class="code"><span class="indent"> </span><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">describe</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">secret</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">dashboard-admin-secret</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-n</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes-dashboard</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># output</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Name:</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#ECC48D;--1:#3C63B3">dashboard-admin-secret</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Namespace:</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes-dashboard</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Labels:</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Annotations:</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes.io/service-account.name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">dashboard-admin</span></div></div><div class="ec-line"><div class="code"><span class="indent">              </span><span style="--0:#82AAFF;--1:#3C63B3">kubernetes.io/service-account.uid:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">80</span><span style="--0:#ECC48D;--1:#3C63B3">bf284e-06e7-4ea4-b747-0a2e77f0ed1f</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Type:</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3C63B3">kubernetes.io/service-account-token</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Data</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">====</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">ca.crt:</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1314</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">bytes</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">namespace:</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#F78C6C;--1:#AA0982">20</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">bytes</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">token:</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">eyJhbGciOiJSUzI1NiIsImtpZCI6IlhYRkQ2bmRNc0s2WktiWHYxT044M1ZfWTQ2UWRxZk81U3Q4TFJnRFo2QncifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkYXNoYm9hcmQtYWRtaW4tc2VjcmV0Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImRhc2hib2FyZC1hZG1pbiIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6IjgwYmYyODRlLTA2ZTctNGVhNC1iNzQ3LTBhMmU3N2YwZWQxZiIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlcm5ldGVzLWRhc2hib2FyZDpkYXNoYm9hcmQtYWRtaW4ifQ.RN82A652pjg5PSoIfVCrzj6b6irTQAaHP4Sr-ROf2LCA3A-GttYaH3Tq0pNQx3x2lfhEK2wqWjmKUtcP7yCfoemkXNdAHV_XOnM1qJ86crv-DHkbaqc8JikwyPOucwex8pZ-EeblDpNUyD-QKbImWRmE3XF09g3tBgRrqANFBKbJd82ABKg_BZyQV1iLEz0wN1Int3uk4f8nm19_YoPfjJPE1UcmKcI0m44aqqANSYNU4e6gej4d-YkBHvaIUZ0-9j9r7t_dKS1qVQiqcAwxdFlt0Tjxbi2KurOIAtazQriHaSbe7VhDJa_v-WYfzcZuHgoWpAELyAR9rbcyScgMbw</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="vim dashboard-sa.yamlapiVersion: v1kind: ServiceAccountmetadata:  name: dashboard-admin  namespace: kubernetes-dashboard---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata:  name: dashboard-admin-rolebindingroleRef:  apiGroup: rbac.authorization.k8s.io  kind: ClusterRole  name: cluster-adminsubjects:- kind: ServiceAccount  name: dashboard-admin  namespace: kubernetes-dashboard---apiVersion: v1kind: Secretmetadata:  name: dashboard-admin-secret  namespace: kubernetes-dashboard  annotations:    kubernetes.io/service-account.name: dashboard-admintype: kubernetes.io/service-account-tokenkubectl apply -f dashboard-sa.yaml kubectl describe secret dashboard-admin-secret -n kubernetes-dashboardName:         dashboard-admin-secretNamespace:    kubernetes-dashboardLabels:       <none>Annotations:  kubernetes.io/service-account.name: dashboard-admin              kubernetes.io/service-account.uid: 80bf284e-06e7-4ea4-b747-0a2e77f0ed1fType:  kubernetes.io/service-account-tokenData====ca.crt:     1314 bytesnamespace:  20 bytestoken:      eyJhbGciOiJSUzI1NiIsImtpZCI6IlhYRkQ2bmRNc0s2WktiWHYxT044M1ZfWTQ2UWRxZk81U3Q4TFJnRFo2QncifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkYXNoYm9hcmQtYWRtaW4tc2VjcmV0Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImRhc2hib2FyZC1hZG1pbiIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6IjgwYmYyODRlLTA2ZTctNGVhNC1iNzQ3LTBhMmU3N2YwZWQxZiIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlcm5ldGVzLWRhc2hib2FyZDpkYXNoYm9hcmQtYWRtaW4ifQ.RN82A652pjg5PSoIfVCrzj6b6irTQAaHP4Sr-ROf2LCA3A-GttYaH3Tq0pNQx3x2lfhEK2wqWjmKUtcP7yCfoemkXNdAHV_XOnM1qJ86crv-DHkbaqc8JikwyPOucwex8pZ-EeblDpNUyD-QKbImWRmE3XF09g3tBgRrqANFBKbJd82ABKg_BZyQV1iLEz0wN1Int3uk4f8nm19_YoPfjJPE1UcmKcI0m44aqqANSYNU4e6gej4d-YkBHvaIUZ0-9j9r7t_dKS1qVQiqcAwxdFlt0Tjxbi2KurOIAtazQriHaSbe7VhDJa_v-WYfzcZuHgoWpAELyAR9rbcyScgMbw"><div></div></button></div></figure></div>
<p>‰ΩøÁî®‰∏äÈù¢ËæìÂá∫ÁöÑtokenÂç≥ÂèØÁôªÂΩïdashboard.
<img src="https://cdn.agou-ops.cn/others/20230827100314.png" alt="image.png"></p>
<h4 id="632-rancher">6.3.2 rancher</h4>
<p>Áï•ÔºåÂèÇËÄÉÔºö<a href="https://ranchermanager.docs.rancher.com/pages-for-subheaders/install-upgrade-on-a-kubernetes-cluster#install-the-rancher-helm-chart">‰ΩøÁî®helmÂø´ÈÄüÂÆâË£Örancher</a></p>
<h2 id="‰∏ÉÊú™ÂÆåÂæÖÁª≠">‰∏É„ÄÅÊú™ÂÆåÂæÖÁª≠</h2>
<p>To Be Continued‚Ä¶</p> </div> <footer class="astro-3yyafb3n"> <div class="meta sl-flex astro-3yyafb3n">   </div> <div class="pagination-links astro-u2l5gyhi" dir="ltr"> <a href="/cloudnative/k8s/helm/helmgotemplate/" rel="prev" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg>  <span class="astro-u2l5gyhi"> Previous <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">HelmÔºàGoÔºâtemplate</span> </span> </a> <a href="/cloudnative/k8s/installation/kubeadm-Âø´ÈÄüÈÉ®ÁΩ≤ÊâãÂÜå/" rel="next" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg>  <span class="astro-u2l5gyhi"> Next <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">Kubeadm Âø´ÈÄüÈÉ®ÁΩ≤ÊâãÂÜå</span> </span> </a> </div>  </footer>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>