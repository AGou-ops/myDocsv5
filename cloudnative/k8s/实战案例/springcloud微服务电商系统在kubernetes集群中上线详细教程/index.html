<!DOCTYPE html><html lang="en" dir="ltr" data-has-toc data-has-sidebar data-theme="dark" class="astro-bguv2lll"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>SpringCloudå¾®æœåŠ¡ç”µå•†ç³»ç»Ÿåœ¨Kubernetesé›†ç¾¤ä¸­ä¸Šçº¿è¯¦ç»†æ•™ç¨‹ | AGou's Docsv5</title><link rel="canonical"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><meta name="generator" content="Astro v4.4.15"/><meta name="generator" content="Starlight v0.21.1"/><meta property="og:title" content="SpringCloudå¾®æœåŠ¡ç”µå•†ç³»ç»Ÿåœ¨Kubernetesé›†ç¾¤ä¸­ä¸Šçº¿è¯¦ç»†æ•™ç¨‹"/><meta property="og:type" content="article"/><meta property="og:url"/><meta property="og:locale" content="en"/><meta property="og:description" content="This is a document about SpringCloudå¾®æœåŠ¡ç”µå•†ç³»ç»Ÿåœ¨Kubernetesé›†ç¾¤ä¸­ä¸Šçº¿è¯¦ç»†æ•™ç¨‹."/><meta property="og:site_name" content="AGou's Docsv5"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="SpringCloudå¾®æœåŠ¡ç”µå•†ç³»ç»Ÿåœ¨Kubernetesé›†ç¾¤ä¸­ä¸Šçº¿è¯¦ç»†æ•™ç¨‹"/><meta name="twitter:description" content="This is a document about SpringCloudå¾®æœåŠ¡ç”µå•†ç³»ç»Ÿåœ¨Kubernetesé›†ç¾¤ä¸­ä¸Šçº¿è¯¦ç»†æ•™ç¨‹."/><meta name="description" content="This is a document about SpringCloudå¾®æœåŠ¡ç”µå•†ç³»ç»Ÿåœ¨Kubernetesé›†ç¾¤ä¸­ä¸Šçº¿è¯¦ç»†æ•™ç¨‹."/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg> <svg aria-hidden="true" class="dark astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg> <svg aria-hidden="true" class="auto astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> </template><link rel="stylesheet" href="/_astro/index.BsC2KTtW.css" /><script type="module" src="/_astro/hoisted.bf4k8FkQ.js"></script>
<script type="module" src="/_astro/page.CZ0TFQCk.js"></script></head> <body class="astro-bguv2lll"> <a href="#_top" class="astro-7q3lir66">Skip to content</a>  <div class="page sl-flex astro-vrdttmbt"> <header class="header astro-vrdttmbt"><div class="header sl-flex astro-kmkmnagf"> <div class="title-wrapper sl-flex astro-kmkmnagf"> <a href="/" class="site-title sl-flex astro-m46x6ez3">  <img class="astro-m46x6ez3" alt="" src="/_astro/logo.BdruG-BK.png" width="200" height="200">  <span class="astro-m46x6ez3"> AGou&#39;s Docsv5 </span> </a>  </div> <div class="sl-flex astro-kmkmnagf"> <site-search data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}" class="astro-v37mnknz"> <button data-open-modal disabled class="astro-v37mnknz">  <svg aria-label="Search" class="astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg>  <span class="sl-hidden md:sl-block astro-v37mnknz" aria-hidden="true">Search</span> <svg aria-label="(Press / to Search)" class="sl-hidden md:sl-block astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 2H7a5 5 0 0 0-5 5v10a5 5 0 0 0 5 5h10a5 5 0 0 0 5-5V7a5 5 0 0 0-5-5Zm3 15a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v10Z"/><path d="M15.293 6.707a1 1 0 1 1 1.414 1.414l-8.485 8.486a1 1 0 0 1-1.414-1.415l8.485-8.485Z"/></svg>  </button> <dialog style="padding:0" aria-label="Search" class="astro-v37mnknz"> <div class="dialog-frame sl-flex astro-v37mnknz">  <button data-close-modal class="sl-flex md:sl-hidden astro-v37mnknz"> Cancel </button> <div class="search-container astro-v37mnknz"> <div id="starlight__search" class="astro-v37mnknz"></div> </div> </div> </dialog> </site-search>    </div> <div class="sl-hidden md:sl-flex right-group astro-kmkmnagf"> <div class="sl-flex social-icons astro-kmkmnagf"> <a href="https://github.com/AGou-ops" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected="true" class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div> </div> </header> <nav class="sidebar astro-vrdttmbt" aria-label="Main"> <starlight-menu-button class="astro-jif73yzw"> <button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-jif73yzw"> <svg aria-hidden="true" class="astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg>  </button> </starlight-menu-button>    <div id="starlight__sidebar" class="sidebar-pane astro-vrdttmbt"> <div class="sidebar-content sl-flex astro-vrdttmbt"> <ul class="top-level astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">ğŸ”— Links</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="https://agou-ops.cn" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">â­ï¸ Go to myBlog</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">guide</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/guide/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">index</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">CloudNative</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">index</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">CICD</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/argocd-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ArgoCD Basic</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">GitLab</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/gitlab/gitlab-backup-move/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">GitLab Backup-Move</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/gitlab/gitlab-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">GitLab Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/gitlab/gitlab-reset-passwd/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">GitLab reset passwd</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/gogs-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Gogs Basic</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Jenkins</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/docker-jenkins-æ‰§è¡Œå®¿ä¸»æœºå‘½ä»¤/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Jenkins æ‰§è¡Œå®¿ä¸»æœºå‘½ä»¤</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/generic-webhook-trigger/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Generic Webhook Trigger</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-backup-restore/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins Backup Restore</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-issues/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins issues</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-plugins/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins Plugins</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-å…±äº«åº“/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins å…±äº«åº“</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-åˆ é™¤æ„å»ºå†å²/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins åˆ é™¤æ„å»ºå†å²</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-æµæ°´çº¿å®ä¾‹/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins æµæ°´çº¿å®ä¾‹</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkins-é•œåƒåŠ é€Ÿ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkins é•œåƒåŠ é€Ÿ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkinsfile-sample/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkinsfile Sample</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/jenkinsfile-è‡ªå®šä¹‰å‡½æ•°/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jenkinsfile è‡ªå®šä¹‰å‡½æ•°</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/pipeline-build-parameters/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Pipeline build parameters</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jenkins/é‚®ä»¶é€šçŸ¥æ¨¡æ¿/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">é‚®ä»¶é€šçŸ¥æ¨¡æ¿</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/jira-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jira Basic</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Sonarqube</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/sonarqube/sonarqube-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Sonarqube Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/sonarqube/sonarqube-with-jenkins/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Sonarqube with Jenkins</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cicd/å‘å¸ƒæ–¹å¼/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">å‘å¸ƒæ–¹å¼</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">CloudComptering</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Aliyun</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/cloudcomptering/aliyun/untitled/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Untitled</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cloudcomptering/amazon-eks-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Amazon EKS Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cloudcomptering/amazon-web-services/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Amazon Web Services</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/cloudcomptering/microsoft-azure/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Microsoft Azure</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/consul-å…¥é—¨/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Consul å…¥é—¨</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Docker</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-compose/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Compose</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-network/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Network</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-openvswitch/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker openvswitch</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-portainer/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Portainer</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-private-registry/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Private Registry</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-remote-access/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Remote Access</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-volume/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Volume</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-å›ºå®šipåŠè·¨ä¸»æœºäº’é€š/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker å›ºå®šIPåŠè·¨ä¸»æœºäº’é€š</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-å®¹å™¨é—´é€šè¿‡ä¸»æœºåäº’ç›¸è®¿é—®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker å®¹å™¨é—´é€šè¿‡ä¸»æœºåäº’ç›¸è®¿é—®</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-æ¸…ç†/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker æ¸…ç†</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/docker-ç¤ºä¾‹åŠå¤šæ¶æ„æ„å»º/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker ç¤ºä¾‹åŠå¤šæ¶æ„æ„å»º</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/dockerfile/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DockerFile</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/docker/ssh-docker-container/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SSH Docker container</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/dubbo-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Dubbo Basic</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">ELFK</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/elastic-stack-beats/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Elastic Stack Beats</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/elk-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ELK basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/elk-kafka-filebeat/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ELK-Kafka-Filebeat</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/elk-redisç¼“å­˜ä»¥åŠæ—¥å¿—åˆ†æµ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ELK-Redisç¼“å­˜ä»¥åŠæ—¥å¿—åˆ†æµ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/es-3rd-part-plugins/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ES 3rd part Plugins</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/es-dockerä¸‰èŠ‚ç‚¹éƒ¨ç½²/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ES Dockerä¸‰èŠ‚ç‚¹éƒ¨ç½²</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/es-é…ç½®æ–‡ä»¶è¯¦è§£/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ES é…ç½®æ–‡ä»¶è¯¦è§£</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/filebeat-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Filebeat basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/kafka-elfkåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kafka-ELFKåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/kafka-redis-elfkåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kafka-Redis-ELFKåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/logstash-basic-plugins/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Logstash Basic - Plugins</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/logstash-æ—¥å¿—åˆ†æµ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Logstash æ—¥å¿—åˆ†æµ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/syslog-elkæ—¥å¿—æ”¶é›†/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">syslog-ELKæ—¥å¿—æ”¶é›†</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/tcp-elkæ—¥å¿—æ”¶é›†/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">TCP-ELKæ—¥å¿—æ”¶é›†</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/ä½¿ç”¨-docker-compose-éƒ¨ç½²-elk/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ä½¿ç”¨ docker-compose éƒ¨ç½² ELK</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/æ”¶é›†javatomcatæ—¥å¿—/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">æ”¶é›†Javaã€Tomcatæ—¥å¿—</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/elfk/éƒ¨ç½²elk-kafka-filebeatæ—¥å¿—æ”¶é›†åˆ†æç³»ç»Ÿ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">éƒ¨ç½²ELK-Kafka-Filebeatæ—¥å¿—æ”¶é›†åˆ†æç³»ç»Ÿ</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/grafana-loki-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Grafana Loki Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/istio-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Istio Basic</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">k8s</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/cilium-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">cilium Basic</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Helm</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/helm/charts/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">charts</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/helm/helm-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Helm Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/helm/helmgotemplate/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Helmï¼ˆGoï¼‰template</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Installation</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/installation/k8s-debian12äºŒè¿›åˆ¶å®‰è£…/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8s Debian12äºŒè¿›åˆ¶å®‰è£…</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/installation/kubeadm-å¿«é€Ÿéƒ¨ç½²æ‰‹å†Œ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kubeadm å¿«é€Ÿéƒ¨ç½²æ‰‹å†Œ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/installation/kubernetes-äºŒè¿›åˆ¶å®‰è£…/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kubernetes äºŒè¿›åˆ¶å®‰è£…</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/installation/ä½¿ç”¨-kubeadm-éƒ¨ç½²å•master/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ä½¿ç”¨ Kubeadm éƒ¨ç½²ï¼ˆå•masterï¼‰</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/installation/ä½¿ç”¨-kubespray-éƒ¨ç½²/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ä½¿ç”¨ Kubespray éƒ¨ç½²</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/installation/ä½¿ç”¨å›½å†…æºåŠç›¸å…³å°å·¥å…·/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ä½¿ç”¨å›½å†…æºåŠç›¸å…³å°å·¥å…·</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/installation/å¸¸ç”¨ç»„ä»¶å®‰è£…/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">å¸¸ç”¨ç»„ä»¶å®‰è£…</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/k3d/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k3d</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/k8s-command/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8s command</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/k8s-å›¾è§£å¤§å…¨/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8s å›¾è§£å¤§å…¨</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/k8s-ç½‘ç»œç›¸å…³/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8s ç½‘ç»œç›¸å…³</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/k8sæ¦‚å¿µåŠåŸç†ç›¸å…³/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8sæ¦‚å¿µåŠåŸç†ç›¸å…³</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/kompose-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">kompose Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/kubeadm-å¿«é€Ÿéƒ¨ç½²k8sé›†ç¾¤/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kubeadm å¿«é€Ÿéƒ¨ç½²k8sé›†ç¾¤</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/kubenetesè¿œç¨‹è°ƒè¯•å·¥å…·/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">kubenetesè¿œç¨‹è°ƒè¯•å·¥å…·</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/kubernetes-rest-api/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kubernetes REST API</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/kubernetes-with-jenkins-cicd/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kubernetes with Jenkins CICD</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/kubernetes-yaml-quicklystart/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kubernetes Yaml quicklystart</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/kustmoize-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">kustmoize Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/metalb-éƒ¨ç½²ä¸ç®€å•æµ‹è¯•/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MetaLB éƒ¨ç½²ä¸ç®€å•æµ‹è¯•</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/minikube-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Minikube Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/prometheus-grafanaå…¨æ–¹ä½ç›‘æ§kubernetesé›†ç¾¤/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Prometheus-Grafanaå…¨æ–¹ä½ç›‘æ§Kubernetesé›†ç¾¤</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Quicklystart</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ä¸€-kubernetesæ¦‚è¿°/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ä¸€ Kubernetesæ¦‚è¿°</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ä¸ƒ-æ§åˆ¶å™¨é…ç½®æ¸…å•/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ä¸ƒ æ§åˆ¶å™¨é…ç½®æ¸…å•</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ä¸‰-é›†ç¾¤éƒ¨ç½²/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ä¸‰ é›†ç¾¤éƒ¨ç½²</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/ä¹-ingress-æ§åˆ¶å™¨/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ä¹ ingress æ§åˆ¶å™¨</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/äºŒ-æ ¸å¿ƒç»„ä»¶åŠé™„ä»¶/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">äºŒ æ ¸å¿ƒç»„ä»¶åŠé™„ä»¶</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/äº”-é…ç½®æ¸…å•ä½¿ç”¨/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">äº” é…ç½®æ¸…å•ä½¿ç”¨</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/å…«-service-é…ç½®æ¸…å•/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">å…« Service é…ç½®æ¸…å•</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/å…­-pod-é…ç½®æ¸…å•/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">å…­ POD é…ç½®æ¸…å•</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/å-pod-å­˜å‚¨å·/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">å POD å­˜å‚¨å·</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/åä¸€-é…ç½®ä¿¡æ¯å®¹å™¨åŒ–/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">åä¸€ é…ç½®ä¿¡æ¯å®¹å™¨åŒ–</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/åä¸ƒ-è°ƒåº¦ç­–ç•¥/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">åä¸ƒ è°ƒåº¦ç­–ç•¥</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/åä¸‰-ç”¨æˆ·è®¤è¯ç³»ç»Ÿ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">åä¸‰ ç”¨æˆ·è®¤è¯ç³»ç»Ÿ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/åä¹-å®¹å™¨èµ„æºé™åˆ¶/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">åä¹ å®¹å™¨èµ„æºé™åˆ¶</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/åäºŒ-statefulset-æ§åˆ¶å™¨/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">åäºŒ StatefulSet æ§åˆ¶å™¨</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/åäº”-dashboard/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">åäº” dashboard</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/åå…«-é«˜çº§è°ƒåº¦è®¾ç½®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">åå…« é«˜çº§è°ƒåº¦è®¾ç½®</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/åå…­-ç½‘ç»œé€šä¿¡/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">åå…­ ç½‘ç»œé€šä¿¡</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/åå››-ç”¨æˆ·æƒé™ç³»ç»Ÿ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">åå›› ç”¨æˆ·æƒé™ç³»ç»Ÿ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/quicklystart/å››-å…¥é—¨å‘½ä»¤/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">å›› å…¥é—¨å‘½ä»¤</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/remote-access-k8s/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Remote access k8s</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/xfs-recovery/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">xfs recovery</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">å®æˆ˜æ¡ˆä¾‹</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/å®æˆ˜æ¡ˆä¾‹/cert-managerè‡ªåŠ¨é¢å‘è¯ä¹¦/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">cert-managerè‡ªåŠ¨é¢å‘è¯ä¹¦</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/å®æˆ˜æ¡ˆä¾‹/helmå®‰è£…zookeeperé›†ç¾¤/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">helmå®‰è£…zookeeperé›†ç¾¤</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/å®æˆ˜æ¡ˆä¾‹/jenkinsç»“åˆ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">jenkinsç»“åˆ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/å®æˆ˜æ¡ˆä¾‹/k8sä¸­ä½¿ç”¨traefikåŸºç¡€/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8sä¸­ä½¿ç”¨traefikï¼ˆåŸºç¡€ï¼‰</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/å®æˆ˜æ¡ˆä¾‹/k8så®‰è£…apolloé…ç½®ä¸­å¿ƒ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8så®‰è£…Apolloé…ç½®ä¸­å¿ƒ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/å®æˆ˜æ¡ˆä¾‹/k8så®‰è£…minioå¯¹è±¡å­˜å‚¨/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k8så®‰è£…MinIOå¯¹è±¡å­˜å‚¨</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/å®æˆ˜æ¡ˆä¾‹/rbac-å®æˆ˜æ¡ˆä¾‹/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">RBAC å®æˆ˜æ¡ˆä¾‹</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/å®æˆ˜æ¡ˆä¾‹/springcloudå¾®æœåŠ¡ç”µå•†ç³»ç»Ÿåœ¨kubernetesé›†ç¾¤ä¸­ä¸Šçº¿è¯¦ç»†æ•™ç¨‹/" aria-current="page" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SpringCloudå¾®æœåŠ¡ç”µå•†ç³»ç»Ÿåœ¨Kubernetesé›†ç¾¤ä¸­ä¸Šçº¿è¯¦ç»†æ•™ç¨‹</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/å®æˆ˜æ¡ˆä¾‹/ä½¿ç”¨csr-apiåˆ›å»ºç”¨æˆ·/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ä½¿ç”¨CSR APIåˆ›å»ºç”¨æˆ·</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/å®æˆ˜æ¡ˆä¾‹/å…¶ä»–å®æˆ˜æ¡ˆä¾‹/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">å…¶ä»–å®æˆ˜æ¡ˆä¾‹</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">å°æŠ€å·§</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/å°æŠ€å·§/ä½¿ç”¨curlè®¿é—®k8sçš„rest-api/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ä½¿ç”¨curlè®¿é—®k8sçš„REST API</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/k8s/å°æŠ€å·§/å¼ºåˆ¶åˆ é™¤namespace/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">å¼ºåˆ¶åˆ é™¤namespace</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Prometheus</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/cloudnative/prometheus/influxdbtelegraf-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">influxDBã€Telegraf Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/prometheus/prometheus-alertmanager/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Prometheus-AlertManager</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/prometheus/prometheus-consulæœåŠ¡å‘ç°/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Prometheus-Consulï¼ˆæœåŠ¡å‘ç°ï¼‰</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/prometheus/prometheus-in-docker/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Prometheus in Docker</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/prometheus/prometheus-å®‰è£…ä¸éƒ¨ç½²grafana/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Prometheus å®‰è£…ä¸éƒ¨ç½²ã€Grafana</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/cloudnative/prometheus/prometheus-è¿›é˜¶/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Prometheus è¿›é˜¶</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">LinuxBasics</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">index</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Ansible</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/ansible/ansible-ad-hoc-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ansible Ad-hoc Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/ansible/ansible-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ansible Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/ansible/ansible-best-practices/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ansible Best Practices</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/ansible/ansible-inventory/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ansible inventory</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/ansible/ansible-modules/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ansible modules</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/ansible/ansible-playbook-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ansible Playbook Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/ansible/ansible-tower/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ansible Tower</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Cache</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Nuster</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/cache/nuster/nuster-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nuster Basic</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Varnish</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/cache/varnish/varnish-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">varnish Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/cache/varnish/varnish-å‚è€ƒç¤ºä¾‹/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">varnish å‚è€ƒç¤ºä¾‹</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/cache/varnish/varnish-æ¶æ„å·¥ä½œåŸç†åŠç®€å•é…ç½®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">varnish æ¶æ„ã€å·¥ä½œåŸç†åŠç®€å•é…ç½®</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/certbot-nginx-ssl/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">CertBot Nginx SSL</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">DataBases</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Etcd</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/etcd/etcd-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">etcd Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/etcd/etcd-å¤‡ä»½ä¸æ¢å¤/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">etcd å¤‡ä»½ä¸æ¢å¤</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/etcd/etcd-æ·»åŠ leanerèŠ‚ç‚¹/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">etcd æ·»åŠ leanerèŠ‚ç‚¹</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/etcd/etcdctl-å¿«é€Ÿæ‰‹å†Œ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">etcdctl å¿«é€Ÿæ‰‹å†Œ</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">MongoDB</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mongodb/mongodb-backup/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MongoDB Backup</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mongodb/mongodb-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MongoDB Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mongodb/mongodb-cluster/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MongoDB Cluster</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mongodb/mongodb-installation/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MongoDB Installation</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mongodb/mongodb-sharded-cluster/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MongoDB Sharded-Cluster</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mongodb/mongodb-å¼‚æ„æ•°æ®å¹³å°è¿ç§»/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MongoDB å¼‚æ„æ•°æ®å¹³å°è¿ç§»</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mongodb/mongodumprestoreoplogé«˜çº§å¤‡ä»½/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">mongodumpï¼ˆrestoreï¼‰oplogé«˜çº§å¤‡ä»½</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">MySQL</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mariadb-log/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MariaDB Log</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-auth-cli/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Auth CLI</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-backup-client-tools/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL BackUP - Client Tools</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-cluster/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Cluster</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-configuration/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Configuration</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-cursor/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Cursor</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-data_type/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Data_Type</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-explain/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL EXPLAIN</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-function/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Function</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-internal_function/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Internal_function</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-stored-procedure/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Stored Procedure</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-transaction/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL Transaction</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-å°æŠ€å·§/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL å°æŠ€å·§</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-å¿«é€Ÿæ‰‹å†Œ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL å¿«é€Ÿæ‰‹å†Œ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/mysql/mysql-çº¦æŸ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MySQL çº¦æŸ</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Redis</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-backup/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis Backup</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-cluster/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis Cluster</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-codis/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis Codis</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-ha/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis  HA</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-installation/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis Installation</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-sentinel/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis Sentinel</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/redis-è¿›é˜¶/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis è¿›é˜¶</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/databases/redis/ç¼“å­˜ç©¿é€ç¼“å­˜å‡»ç©¿ç¼“å­˜é›ªå´©/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">DHCP-PXE-Cobbler</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/dhcp-pxe-cobbler/cobbler-centos/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Cobbler CentOS</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/dhcp-pxe-cobbler/dhcp-ç®€å•ä½¿ç”¨/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DHCP ç®€å•ä½¿ç”¨</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/dhcp-pxe-cobbler/pxe-centos/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PXE CentOS</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/dnsmasq/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">dnsmasq</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/fail2ban-ç®€å•ä½¿ç”¨/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Fail2ban ç®€å•ä½¿ç”¨</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">FileSystem</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Ceph</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/ceph-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ceph Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/ceph-cluster-ç§»é™¤/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ceph Cluster ç§»é™¤</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/ceph-deploy-é›†ç¾¤å¿«é€Ÿéƒ¨ç½²/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ceph-deploy é›†ç¾¤å¿«é€Ÿéƒ¨ç½²</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/ceph-manager-dashboard/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ceph Manager Dashboard</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/ceph-rgw/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ceph RGW</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/ceph-éƒ¨ç½²é—®é¢˜æ±‡æ€»/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ceph éƒ¨ç½²é—®é¢˜æ±‡æ€»</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/cephadm-éƒ¨ç½²octopus/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Cephadm éƒ¨ç½²octopus</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/ceph/cephfs/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">CephFS</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">FastDFS</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/fastdfs/fastdfs-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">FastDFS Basic</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">GlusterFS</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/glusterfs/ä¸´æ—¶/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ä¸´æ—¶</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">MinIO</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/minio/minio-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MinIO Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/minio/minio-in-docker/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MinIO in Docker</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/nfs-åŸºç¡€åŠå®æˆ˜/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">NFS åŸºç¡€åŠå®æˆ˜</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/samba-åŸºç¡€åŠå®æˆ˜/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SAMBA åŸºç¡€åŠå®æˆ˜</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/smbconfè¯¦è§£/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">smb.confè¯¦è§£</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/tftp/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">TFTP</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/filesystem/vsftp-åŸºç¡€åŠå®æˆ˜/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">vsFTP åŸºç¡€åŠå®æˆ˜</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/firewalld-iptableså¿«é€Ÿæ‰‹å†Œ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Firewalld IPtableså¿«é€Ÿæ‰‹å†Œ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/inotifywait-æ–‡ä»¶ç›‘æ§/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">inotifywait æ–‡ä»¶ç›‘æ§</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/jumpserver/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">JumpServer</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/k3s-k3d-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">k3s - k3d Basic</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Kafka</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/kafka/cmak/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">CMAK</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/kafka/kafka-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kafka Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/kafka/ä½¿ç”¨-docker-compose-éƒ¨ç½²-kafka/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ä½¿ç”¨ docker-compose éƒ¨ç½² Kafka</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/keepalived/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">keepalived</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">KVM</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/kvm/kvm_installsh/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">kvm_install.sh</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/kvm/kvm-2-vmware-station/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">KVM 2 VMware Station</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/kvm/kvm-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">KVM Basic</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/linux-å‹æµ‹å¤§å…¨/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Linux å‹æµ‹å¤§å…¨</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/linuxè¯Šæ–­/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Linuxè¯Šæ–­</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">LoadBalancer</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">HAProxy</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/haproxy/haproxy-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">HAProxy Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/haproxy/haproxy-in-docker/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">HAProxy in Docker</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/haproxy/haproxy-å‚è€ƒç¤ºä¾‹/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">HAProxy å‚è€ƒç¤ºä¾‹</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/haproxy/haproxy-é…ç½®è¯¦è§£/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">HAProxy é…ç½®è¯¦è§£</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/haproxy/keepalived-haproxy/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Keepalived - HAProxy</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Keepalived-Nginx</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/keepalived-nginx/nginx-keepalivedå®ç°é«˜å¯ç”¨é›†ç¾¤/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx - keepalivedå®ç°é«˜å¯ç”¨é›†ç¾¤</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/keepalived-nginx/nginx-keepalivedå¿«é€Ÿé…ç½®åŠè„šæœ¬/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx - keepalivedå¿«é€Ÿé…ç½®åŠè„šæœ¬</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">LVS</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/lvs/ipvsadm-å‚æ•°/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ipvsadm å‚æ•°</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/lvs/lvs-keepalived/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LVS - keepalived</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/lvs/lvs-å››ç§æ¨¡å‹è¯¦è§£/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LVS å››ç§æ¨¡å‹è¯¦è§£</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/lvs/lvs-ç®€å•åº”ç”¨/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LVS ç®€å•åº”ç”¨</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/lvs/lvs-è°ƒåº¦ç®—æ³•/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LVS è°ƒåº¦ç®—æ³•</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/loadbalancer/lvs/lvs-è¿›é˜¶é…ç½®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LVS è¿›é˜¶é…ç½®</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/lsyncd/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">lsyncd</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/lvm-è®²è§£/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">lvm è®²è§£</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Makefile</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/makefile/makefile-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Makefile Basic</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Nexus</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/nexus/nexus-basic-maven-ç§æœ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nexus Basic - Maven ç§æœ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/nexus/nexus-yum-ç§æœ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nexus - yum ç§æœ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/nexus/nexus-æ‰¹é‡ä¸Šä¼ è„šæœ¬/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">nexus æ‰¹é‡ä¸Šä¼ è„šæœ¬</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/openvpn-for-centos/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">OpenVPN for CentOS</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/powerdns/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PowerDNS</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">PVE</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/pve/pve-issues/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PVE issues</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/pve/pve-åˆå§‹åŒ–ç›¸å…³/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PVE åˆå§‹åŒ–ç›¸å…³</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/pve/pve-åˆ¶ä½œé•œåƒæ¨¡æ¿/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PVE åˆ¶ä½œé•œåƒæ¨¡æ¿</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">RabbitMQ</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/rabbitmq/rabbitmq-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">RabbitMQ Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/rabbitmq/rabbitmq-mirror-queue/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">RabbitMQ Mirror Queue</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/rabbitmq/rabbitmq-on-docker/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">RabbitMQ on Docker</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/rsync-inotifysersync/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">rsync - inotifyï¼ˆsersyncï¼‰</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Shell</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/shell/command/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">command</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/shell/linux-shell-å®ç”¨å‘½ä»¤åŠä½¿ç”¨åœºæ™¯/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Linux Shell å®ç”¨å‘½ä»¤åŠä½¿ç”¨åœºæ™¯</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/shell/shell-getopts-æ ·ä¾‹/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Shell getopts æ ·ä¾‹</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/shell/userful-shell/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">userful-shell</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/snmpé…ç½®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">snmpé…ç½®</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/split-logrotate/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Split - Logrotate</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">SpringBoot</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/springboot/springboot-in-docker/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SpringBoot in Docker</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/springboot/springboot-quicklystart/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SpringBoot Quicklystart</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/sql-review/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SQL review</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/ssh-tunnel/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SSH Tunnel</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/tcpdump-wireshark/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tcpdump - Wireshark</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Terraform</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/terraform/terraform-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Terraform Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/terraform/terraform-examples/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Terraform Examples</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/terraform/terraform-variable/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Terraform Variable</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/useful-command/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Useful Command</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/vagrant/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Vagrant</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/vim-tricks/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">vim tricks</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/vps-èŠ‚ç‚¹æ­å»º/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">VPS èŠ‚ç‚¹æ­å»º</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Web-Servers</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Apache</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/apache/lamp-å¿«é€Ÿéƒ¨ç½²/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LAMP å¿«é€Ÿéƒ¨ç½²</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Jvm-Tomcat</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/jvm-tomcat/jvm-monitor-tools/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Jvm Monitor Tools</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/jvm-tomcat/tomcat-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tomcat Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/jvm-tomcat/tomcat-clusternginx/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tomcat Clusterï¼ˆnginxï¼‰</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/jvm-tomcat/tomcat-sessionmemcached/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tomcat Sessionï¼ˆmemcachedï¼‰</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/jvm-tomcat/tomcat-sessionredis-with-nginx/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tomcat Sessionï¼ˆRedis with Nginxï¼‰</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/jvm-tomcat/tomcat-è°ƒä¼˜/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tomcat è°ƒä¼˜</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/jvm-tomcat/tomcatä¸­é—´ä»¶æ–¹æ–¹é¢é¢å‚¨å¤‡çŸ¥è¯†/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tomcatä¸­é—´ä»¶æ–¹æ–¹é¢é¢å‚¨å¤‡çŸ¥è¯†</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Nginx</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/https-é…ç½®åŠä¼˜åŒ–/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">HTTPS  é…ç½®åŠä¼˜åŒ–</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-cache/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx Cache</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-php-fpm/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx php-fpm</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-rewrite/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx Rewrite</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-try_files/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx try_files</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-uwsgi-éƒ¨ç½²django/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx - uWSGI éƒ¨ç½²Django</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-å†…ç½®å˜é‡/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx å†…ç½®å˜é‡</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-åå‘ä»£ç†/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx åå‘ä»£ç†</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-å¹³æ»‘å‡çº§ä¸å›æ»š/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx å¹³æ»‘å‡çº§ä¸å›æ»š</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-å¿«é€Ÿé…ç½®æ‰‹å†Œ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx å¿«é€Ÿé…ç½®æ‰‹å†Œ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-æ€§èƒ½ä¼˜åŒ–ä¸å®‰å…¨/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx æ€§èƒ½ä¼˜åŒ–ä¸å®‰å…¨</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-çˆ¬è™«é™åˆ¶/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx çˆ¬è™«é™åˆ¶</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-ç¼–è¯‘åŠåˆ¶ä½œåŒ…/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx ç¼–è¯‘åŠåˆ¶ä½œåŒ…</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-è´Ÿè½½å‡è¡¡/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx è´Ÿè½½å‡è¡¡</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/nginx-é«˜çº§æ¨¡å—/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx é«˜çº§æ¨¡å—</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Others</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/others/nodejs-with-ssl-nginx/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Node.js with ssl - nginx</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/others/ä½¿ç”¨logrotateåˆ‡å‰²nginxæ—¥å¿—/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ä½¿ç”¨logrotateåˆ‡å‰²nginxæ—¥å¿—</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/others/æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ”¯æŒgzip/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ”¯æŒgzip</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Problems</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/nginx/problems/rewriteå‚æ•°å¤„ç†é—®é¢˜/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">rewriteå‚æ•°å¤„ç†é—®é¢˜</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">PHP</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/php/php-ä¼˜åŒ–åŠå®‰å…¨é…ç½®/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PHP ä¼˜åŒ–åŠå®‰å…¨é…ç½®</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Python-Django</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/python-django/access-to-database/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Access to Database</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/web-servers/python-django/django-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Django Basic</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/windows-useful-cmd/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Windows useful cmd</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/wireguard-vpn-for-ubuntu/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">WireGuard VPN for Ubuntu</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Zabbix</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/zabbix/zabbix-agentæ‰§è¡Œè¿œç¨‹å‘½ä»¤/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Zabbix agentæ‰§è¡Œè¿œç¨‹å‘½ä»¤</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/zabbix/zabbix-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Zabbix Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/zabbix/zabbix-å®‰è£…ä¸­æ–‡åŒ…/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Zabbix å®‰è£…ä¸­æ–‡åŒ…</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/zabbix/zabbix-è¯¦ç»†ä»‹ç»/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Zabbix è¯¦ç»†ä»‹ç»</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/zabbix/zabbix-é’‰é’‰æŠ¥è­¦/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Zabbix é’‰é’‰æŠ¥è­¦</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Zookeeper</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/linuxbasics/zookeeper/zookeeper-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Zookeeper Basic</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/è‡ªå»ºdns/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">è‡ªå»ºdns</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/è‡ªå»ºé‚®ç®±æœåŠ¡å™¨/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">è‡ªå»ºé‚®ç®±æœåŠ¡å™¨</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/linuxbasics/è“é²¸è¿ç»´å¹³å°/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">è“é²¸è¿ç»´å¹³å°</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">ProgramLang</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/programlang/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">index</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Golang</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-basic/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Basic</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-errors-handler/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Errors - handler</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-file-operate/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang File Operate</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-fmtå ä½ç¬¦/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang fmtå ä½ç¬¦</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-function/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Function</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-interface/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Interface</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-json/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Json</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-package-manage/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Package manage</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-pkgs/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Pkgs</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-pointer/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Pointer</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-project-layout/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Project Layout</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-testing/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang Testing</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/golang-å¹¶å‘/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Golang å¹¶å‘</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/gormåŒ…/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">gormåŒ…</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/golang/string-operate/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">String Operate</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Lua</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/programlang/lua/lua-baisc/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Lua Baisc</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/programlang/lua/lua-continue-ex/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Lua continue Ex</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Scripts</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/scripts/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">index</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">shell</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/scripts/shell/centos-sys-information/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">CentOS sys information</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/scripts/shell/dokcer-é•œåƒå¤‡ä»½/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Dokcer é•œåƒå¤‡ä»½</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/scripts/shell/nginx-log-check/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx Log Check</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/scripts/shell/redis-tools/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redis tools</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">resort-file-from-csv</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/scripts/shell/resort-file-from-csv/resort-file/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">resort-file</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/scripts/shell/rsync/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Rsync</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/scripts/shell/shell-å¹¶å‘/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Shell å¹¶å‘</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/scripts/shell/æ—¥å¸¸å·¡æ£€shell/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">æ—¥å¸¸å·¡æ£€Shell</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">windows</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/scripts/windows/é€šç”¨ä¿®æ”¹dns/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">é€šç”¨ä¿®æ”¹dns</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Interview</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/interview/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">index</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/pdfé¢è¯•é¢˜é›†åˆ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PDFé¢è¯•é¢˜é›†åˆ</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">å·¥ä½œé¢è¯•é¢˜</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/dbaæ•°æ®åº“è¿ç»´å·¥ç¨‹å¸ˆ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DBAæ•°æ®åº“è¿ç»´å·¥ç¨‹å¸ˆ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/devopsé¢è¯•é¢˜/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Devopsé¢è¯•é¢˜</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/dockeré¢è¯•é¢˜/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">dockeré¢è¯•é¢˜</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/esé¢è¯•é¢˜/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">esé¢è¯•é¢˜</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/etcdé¢è¯•é¢˜/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">etcdé¢è¯•é¢˜</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/goè¯­è¨€ç›¸å…³/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Goè¯­è¨€ç›¸å…³</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/goè¯­è¨€ç›¸å…³ç»­-æ–‡ç« æ±‡æ€»/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Goè¯­è¨€ç›¸å…³ï¼ˆç»­-æ–‡ç« æ±‡æ€»ï¼‰</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/k8sé¢è¯•é¢˜æ•´ç†/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">K8sé¢è¯•é¢˜æ•´ç†</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/linuxç›¸å…³çš„æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">linuxç›¸å…³çš„æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/mysqlé¢è¯•é¢˜/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">mysqlé¢è¯•é¢˜</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/nginxé¢è¯•é¢˜/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">nginxé¢è¯•é¢˜</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/nginxé¢è¯•é¢˜å«ç­”æ¡ˆç»­/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">nginxé¢è¯•é¢˜å«ç­”æ¡ˆï¼ˆç»­ï¼‰</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/redisé¢è¯•é¢˜1/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redisé¢è¯•é¢˜1</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/redisé¢è¯•é¢˜1å«ç­”æ¡ˆç»­/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redisé¢è¯•é¢˜1å«ç­”æ¡ˆï¼ˆç»­ï¼‰</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/redisé¢è¯•é¢˜2/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Redisé¢è¯•é¢˜2</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/shellè„šæœ¬ç›¸å…³/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">shellè„šæœ¬ç›¸å…³</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/sreåŸºç¡€å¿…ä¼šæ ¸å¿ƒå®æˆ˜é¢è¯•é¢˜/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SREåŸºç¡€å¿…ä¼šæ ¸å¿ƒå®æˆ˜é¢è¯•é¢˜</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/sreé«˜çº§è¿ç»´é¢è¯•é¢˜/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SREé«˜çº§è¿ç»´é¢è¯•é¢˜</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/å…¬å¸äº§å“ä¸Šäº‘æµç¨‹è§„èŒƒ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">å…¬å¸äº§å“ä¸Šäº‘æµç¨‹è§„èŒƒ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/æ—¥å¿—æ”¶é›†efk/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">æ—¥å¿—æ”¶é›†EFK</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/æ¥è‡ªç½‘ç»œ-1/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">æ¥è‡ªç½‘ç»œ-1</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/æ¥è‡ªç¾¤å‹-1/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">æ¥è‡ªç¾¤å‹-1</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/ç³»ç»Ÿè¿ç»´æ•…éšœç›¸å…³/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ç³»ç»Ÿè¿ç»´æ•…éšœç›¸å…³</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/èµ„æ·±è¿ç»´æ¶æ„è®¾è®¡è§„åˆ’/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">èµ„æ·±è¿ç»´æ¶æ„è®¾è®¡è§„åˆ’</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/è¿ç»´å®‰å…¨ç›¸å…³/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">è¿ç»´å®‰å…¨ç›¸å…³</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/è¿ç»´å¿…ä¼šé¢è¯•é¢˜-å¿«é€Ÿçªå‡»/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">è¿ç»´å¿…ä¼šé¢è¯•é¢˜-å¿«é€Ÿçªå‡»</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/è¿ç»´ç›‘æ§ä½“ç³»/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">è¿ç»´ç›‘æ§ä½“ç³»</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/è¿ç»´ç½‘ç»œåŸºç¡€/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">è¿ç»´ç½‘ç»œåŸºç¡€</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/å·¥ä½œé¢è¯•é¢˜/è¿ç»´é¢è¯•è¯æœ¯è‡ªæˆ‘ä»‹ç»/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">è¿ç»´é¢è¯•è¯æœ¯è‡ªæˆ‘ä»‹ç»</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">æ‚é¡¹-è‡ªç”¨</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/interview/æ‚é¡¹-è‡ªç”¨/ä¸´æ—¶2/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ä¸´æ—¶2</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/æ‚é¡¹-è‡ªç”¨/ä¸´æ—¶å¤ä¹ ç”¨å¾ˆä¹±/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ä¸´æ—¶å¤ä¹ ç”¨ï¼ˆå¾ˆä¹±ï¼‰</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/interview/é€‰æ‹©å…¬å¸/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">é€‰æ‹©å…¬å¸</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/interview/é¢è¯•åšæ–‡é“¾æ¥é›†åˆ/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">é¢è¯•åšæ–‡é“¾æ¥é›†åˆ</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">WORK</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">AnHeng</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/work/anheng/telegraf/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">telegraf</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/work/anheng/æµæ°´çº¿-å·¥ä½œæµå¼•æ“/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">æµæ°´çº¿ å·¥ä½œæµå¼•æ“</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li> </ul>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-wu23bvmt"> <div class="sl-flex social-icons astro-wu23bvmt"> <a href="https://github.com/AGou-ops" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected="true" class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div>  </div> </div> </div> </nav> <div class="main-frame astro-vrdttmbt">  <div class="lg:sl-flex astro-67yu43on"> <aside class="right-sidebar-container astro-67yu43on"> <div class="right-sidebar astro-67yu43on"> <div class="lg:sl-hidden astro-pb3aqygn"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-doynk5tl"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-doynk5tl"><details id="starlight__mobile-toc" class="astro-doynk5tl"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-doynk5tl"><div class="toggle sl-flex astro-doynk5tl">On this page<svg aria-hidden="true" class="caret astro-doynk5tl astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </div><span class="display-current astro-doynk5tl"></span></summary><div class="dropdown astro-doynk5tl"><ul class="isMobile astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#1å¾®æœåŠ¡æ¶æ„åŠç†è®ºæ¦‚è¿°" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">1.å¾®æœåŠ¡æ¶æ„åŠç†è®ºæ¦‚è¿°</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#11å•ä½“æ¶æ„ä¸å¾®æœåŠ¡æ¶æ„çš„åŒºåˆ«" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.1.å•ä½“æ¶æ„ä¸å¾®æœåŠ¡æ¶æ„çš„åŒºåˆ«</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#12å¾®æœåŠ¡ç»„ä»¶æ¶æ„å›¾" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.2.å¾®æœåŠ¡ç»„ä»¶æ¶æ„å›¾</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#13å¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.3.å¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#14ä¸åŒçš„éƒ¨ç½²ç¯å¢ƒå¯¹äºç¨‹åºé…ç½®æ–‡ä»¶å¦‚ä½•ç®¡ç†" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.4.ä¸åŒçš„éƒ¨ç½²ç¯å¢ƒå¯¹äºç¨‹åºé…ç½®æ–‡ä»¶å¦‚ä½•ç®¡ç†</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#2å¾®æœåŠ¡è¿ç§»è‡³kuberneteså¹³å°æµç¨‹" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">2.å¾®æœåŠ¡è¿ç§»è‡³kuberneteså¹³å°æµç¨‹</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#21é¡¹ç›®è¿ç§»åˆ°k8så¹³å°æµç¨‹" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">2.1.é¡¹ç›®è¿ç§»åˆ°K8Så¹³å°æµç¨‹</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#22ä¼ ç»Ÿéƒ¨ç½²ä¸k8séƒ¨ç½²çš„åŒºåˆ«" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">2.2.ä¼ ç»Ÿéƒ¨ç½²ä¸K8Séƒ¨ç½²çš„åŒºåˆ«</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#3å¾®æœåŠ¡ç¨‹åºå‰æœŸç¯å¢ƒå‡†å¤‡é…ç½®ç¼–è¯‘åˆ¶ä½œé•œåƒ" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">3.å¾®æœåŠ¡ç¨‹åºå‰æœŸç¯å¢ƒå‡†å¤‡ï¼ˆé…ç½®ã€ç¼–è¯‘ã€åˆ¶ä½œé•œåƒï¼‰</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#31simple-microserviceå¾®æœåŠ¡é¡¹ç›®ä»‹ç»" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.1.simple-microserviceå¾®æœåŠ¡é¡¹ç›®ä»‹ç»</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#32simpleå¾®æœåŠ¡éƒ¨ç½²åˆ°k8sé€»è¾‘æ¶æ„" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.2.simpleå¾®æœåŠ¡éƒ¨ç½²åˆ°K8Sé€»è¾‘æ¶æ„</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#33å‡†å¤‡å¾®æœåŠ¡å„ç¨‹åºçš„é…ç½®æ–‡ä»¶" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.3.å‡†å¤‡å¾®æœåŠ¡å„ç¨‹åºçš„é…ç½®æ–‡ä»¶</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#34åˆ¶ä½œå¾®æœåŠ¡ç¨‹åºæ‰€ä½¿ç”¨çš„çš„åº•å±‚ç³»ç»Ÿé•œåƒ" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.4.åˆ¶ä½œå¾®æœåŠ¡ç¨‹åºæ‰€ä½¿ç”¨çš„çš„åº•å±‚ç³»ç»Ÿé•œåƒ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#35è°ƒæ•´protalå¾®æœåŠ¡ä¸­è¿æ¥gatewayç½‘å…³çš„åœ°å€" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.5.è°ƒæ•´Protalå¾®æœåŠ¡ä¸­è¿æ¥Gatewayç½‘å…³çš„åœ°å€</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#36éƒ¨ç½²ingressç”¨äºå°†å¾®æœåŠ¡ç¨‹åºå‘å¸ƒåˆ°äº’è”ç½‘" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.6.éƒ¨ç½²Ingressç”¨äºå°†å¾®æœåŠ¡ç¨‹åºå‘å¸ƒåˆ°äº’è”ç½‘</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#4åœ¨kubernetesé›†ç¾¤éƒ¨ç½²simpleå¾®æœåŠ¡é¡¹ç›®" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">4.åœ¨kubernetesé›†ç¾¤éƒ¨ç½²simpleå¾®æœåŠ¡é¡¹ç›®</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#41éƒ¨ç½²simpleå¾®æœåŠ¡ç¨‹åºçš„mysqlæ•°æ®åº“ç¯å¢ƒ" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.1.éƒ¨ç½²simpleå¾®æœåŠ¡ç¨‹åºçš„mysqlæ•°æ®åº“ç¯å¢ƒ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#42éƒ¨ç½²eurekaå¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.2.éƒ¨ç½²eurekaå¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#43é…ç½®å„ä¸ªå¾®æœåŠ¡ç¨‹åºè¿æ¥eurekaé›†ç¾¤çš„åœ°å€" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.3.é…ç½®å„ä¸ªå¾®æœåŠ¡ç¨‹åºè¿æ¥Eurekaé›†ç¾¤çš„åœ°å€</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#44å°†å„ä¸ªç¨‹åºä»£ç ç¼–è¯‘æˆå¯éƒ¨ç½²çš„ç¨‹åº" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.4.å°†å„ä¸ªç¨‹åºä»£ç ç¼–è¯‘æˆå¯éƒ¨ç½²çš„ç¨‹åº</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#43ä¸­éƒ¨ç½²gatewayç½‘å…³æœåŠ¡" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.3.ä¸­éƒ¨ç½²Gatewayç½‘å…³æœåŠ¡</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#44ç¼–å†™å¿«é€Ÿéƒ¨ç½²å¾®æœåŠ¡åˆ°k8sé›†ç¾¤çš„è„šæœ¬" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.4.ç¼–å†™å¿«é€Ÿéƒ¨ç½²å¾®æœåŠ¡åˆ°K8Sé›†ç¾¤çš„è„šæœ¬</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#45ä½¿ç”¨è„šæœ¬éƒ¨ç½²orderè®¢å•æœåŠ¡" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.5.ä½¿ç”¨è„šæœ¬éƒ¨ç½²Orderè®¢å•æœåŠ¡</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#46ä½¿ç”¨è„šæœ¬éƒ¨ç½²productå•†å“æœåŠ¡" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.6.ä½¿ç”¨è„šæœ¬éƒ¨ç½²Productå•†å“æœåŠ¡</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#47ä½¿ç”¨è„šæœ¬éƒ¨ç½²stockåº“å­˜æœåŠ¡" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.7.ä½¿ç”¨è„šæœ¬éƒ¨ç½²Stockåº“å­˜æœåŠ¡</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#48ä½¿ç”¨è„šæœ¬éƒ¨ç½²portalå‰ç«¯é¦–é¡µ" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.8.ä½¿ç”¨è„šæœ¬éƒ¨ç½²Portalå‰ç«¯é¦–é¡µ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#49æŸ¥çœ‹eurekaæ³¨å†Œä¸­å¿ƒä¸­å„ä¸ªå¾®æœåŠ¡çš„ä¿¡æ¯" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.9.æŸ¥çœ‹Eurekaæ³¨å†Œä¸­å¿ƒä¸­å„ä¸ªå¾®æœåŠ¡çš„ä¿¡æ¯</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#410ä½¿ç”¨simpleå¾®æœåŠ¡ç”µå•†å¹³å°" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.10.ä½¿ç”¨simpleå¾®æœåŠ¡ç”µå•†å¹³å°</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#5åŸºäºk8sé›†ç¾¤çš„å¾®æœåŠ¡çš„æ‰©å®¹ä¸å‡çº§" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">5.åŸºäºK8Sé›†ç¾¤çš„å¾®æœåŠ¡çš„æ‰©å®¹ä¸å‡çº§</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#51å¾®æœåŠ¡çš„æ‰©å®¹" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">5.1.å¾®æœåŠ¡çš„æ‰©å®¹</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#52å¾®æœåŠ¡çš„å‡çº§" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">5.2.å¾®æœåŠ¡çš„å‡çº§</span> </a>  </li> </ul>  </li> </ul> </div></details></nav></mobile-starlight-toc></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-pb3aqygn"><div class="sl-container astro-pb3aqygn"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#1å¾®æœåŠ¡æ¶æ„åŠç†è®ºæ¦‚è¿°" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">1.å¾®æœåŠ¡æ¶æ„åŠç†è®ºæ¦‚è¿°</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#11å•ä½“æ¶æ„ä¸å¾®æœåŠ¡æ¶æ„çš„åŒºåˆ«" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.1.å•ä½“æ¶æ„ä¸å¾®æœåŠ¡æ¶æ„çš„åŒºåˆ«</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#12å¾®æœåŠ¡ç»„ä»¶æ¶æ„å›¾" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.2.å¾®æœåŠ¡ç»„ä»¶æ¶æ„å›¾</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#13å¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.3.å¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#14ä¸åŒçš„éƒ¨ç½²ç¯å¢ƒå¯¹äºç¨‹åºé…ç½®æ–‡ä»¶å¦‚ä½•ç®¡ç†" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1.4.ä¸åŒçš„éƒ¨ç½²ç¯å¢ƒå¯¹äºç¨‹åºé…ç½®æ–‡ä»¶å¦‚ä½•ç®¡ç†</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#2å¾®æœåŠ¡è¿ç§»è‡³kuberneteså¹³å°æµç¨‹" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">2.å¾®æœåŠ¡è¿ç§»è‡³kuberneteså¹³å°æµç¨‹</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#21é¡¹ç›®è¿ç§»åˆ°k8så¹³å°æµç¨‹" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">2.1.é¡¹ç›®è¿ç§»åˆ°K8Så¹³å°æµç¨‹</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#22ä¼ ç»Ÿéƒ¨ç½²ä¸k8séƒ¨ç½²çš„åŒºåˆ«" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">2.2.ä¼ ç»Ÿéƒ¨ç½²ä¸K8Séƒ¨ç½²çš„åŒºåˆ«</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#3å¾®æœåŠ¡ç¨‹åºå‰æœŸç¯å¢ƒå‡†å¤‡é…ç½®ç¼–è¯‘åˆ¶ä½œé•œåƒ" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">3.å¾®æœåŠ¡ç¨‹åºå‰æœŸç¯å¢ƒå‡†å¤‡ï¼ˆé…ç½®ã€ç¼–è¯‘ã€åˆ¶ä½œé•œåƒï¼‰</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#31simple-microserviceå¾®æœåŠ¡é¡¹ç›®ä»‹ç»" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.1.simple-microserviceå¾®æœåŠ¡é¡¹ç›®ä»‹ç»</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#32simpleå¾®æœåŠ¡éƒ¨ç½²åˆ°k8sé€»è¾‘æ¶æ„" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.2.simpleå¾®æœåŠ¡éƒ¨ç½²åˆ°K8Sé€»è¾‘æ¶æ„</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#33å‡†å¤‡å¾®æœåŠ¡å„ç¨‹åºçš„é…ç½®æ–‡ä»¶" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.3.å‡†å¤‡å¾®æœåŠ¡å„ç¨‹åºçš„é…ç½®æ–‡ä»¶</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#34åˆ¶ä½œå¾®æœåŠ¡ç¨‹åºæ‰€ä½¿ç”¨çš„çš„åº•å±‚ç³»ç»Ÿé•œåƒ" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.4.åˆ¶ä½œå¾®æœåŠ¡ç¨‹åºæ‰€ä½¿ç”¨çš„çš„åº•å±‚ç³»ç»Ÿé•œåƒ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#35è°ƒæ•´protalå¾®æœåŠ¡ä¸­è¿æ¥gatewayç½‘å…³çš„åœ°å€" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.5.è°ƒæ•´Protalå¾®æœåŠ¡ä¸­è¿æ¥Gatewayç½‘å…³çš„åœ°å€</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#36éƒ¨ç½²ingressç”¨äºå°†å¾®æœåŠ¡ç¨‹åºå‘å¸ƒåˆ°äº’è”ç½‘" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3.6.éƒ¨ç½²Ingressç”¨äºå°†å¾®æœåŠ¡ç¨‹åºå‘å¸ƒåˆ°äº’è”ç½‘</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#4åœ¨kubernetesé›†ç¾¤éƒ¨ç½²simpleå¾®æœåŠ¡é¡¹ç›®" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">4.åœ¨kubernetesé›†ç¾¤éƒ¨ç½²simpleå¾®æœåŠ¡é¡¹ç›®</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#41éƒ¨ç½²simpleå¾®æœåŠ¡ç¨‹åºçš„mysqlæ•°æ®åº“ç¯å¢ƒ" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.1.éƒ¨ç½²simpleå¾®æœåŠ¡ç¨‹åºçš„mysqlæ•°æ®åº“ç¯å¢ƒ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#42éƒ¨ç½²eurekaå¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.2.éƒ¨ç½²eurekaå¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#43é…ç½®å„ä¸ªå¾®æœåŠ¡ç¨‹åºè¿æ¥eurekaé›†ç¾¤çš„åœ°å€" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.3.é…ç½®å„ä¸ªå¾®æœåŠ¡ç¨‹åºè¿æ¥Eurekaé›†ç¾¤çš„åœ°å€</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#44å°†å„ä¸ªç¨‹åºä»£ç ç¼–è¯‘æˆå¯éƒ¨ç½²çš„ç¨‹åº" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.4.å°†å„ä¸ªç¨‹åºä»£ç ç¼–è¯‘æˆå¯éƒ¨ç½²çš„ç¨‹åº</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#43ä¸­éƒ¨ç½²gatewayç½‘å…³æœåŠ¡" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.3.ä¸­éƒ¨ç½²Gatewayç½‘å…³æœåŠ¡</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#44ç¼–å†™å¿«é€Ÿéƒ¨ç½²å¾®æœåŠ¡åˆ°k8sé›†ç¾¤çš„è„šæœ¬" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.4.ç¼–å†™å¿«é€Ÿéƒ¨ç½²å¾®æœåŠ¡åˆ°K8Sé›†ç¾¤çš„è„šæœ¬</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#45ä½¿ç”¨è„šæœ¬éƒ¨ç½²orderè®¢å•æœåŠ¡" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.5.ä½¿ç”¨è„šæœ¬éƒ¨ç½²Orderè®¢å•æœåŠ¡</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#46ä½¿ç”¨è„šæœ¬éƒ¨ç½²productå•†å“æœåŠ¡" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.6.ä½¿ç”¨è„šæœ¬éƒ¨ç½²Productå•†å“æœåŠ¡</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#47ä½¿ç”¨è„šæœ¬éƒ¨ç½²stockåº“å­˜æœåŠ¡" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.7.ä½¿ç”¨è„šæœ¬éƒ¨ç½²Stockåº“å­˜æœåŠ¡</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#48ä½¿ç”¨è„šæœ¬éƒ¨ç½²portalå‰ç«¯é¦–é¡µ" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.8.ä½¿ç”¨è„šæœ¬éƒ¨ç½²Portalå‰ç«¯é¦–é¡µ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#49æŸ¥çœ‹eurekaæ³¨å†Œä¸­å¿ƒä¸­å„ä¸ªå¾®æœåŠ¡çš„ä¿¡æ¯" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.9.æŸ¥çœ‹Eurekaæ³¨å†Œä¸­å¿ƒä¸­å„ä¸ªå¾®æœåŠ¡çš„ä¿¡æ¯</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#410ä½¿ç”¨simpleå¾®æœåŠ¡ç”µå•†å¹³å°" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4.10.ä½¿ç”¨simpleå¾®æœåŠ¡ç”µå•†å¹³å°</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#5åŸºäºk8sé›†ç¾¤çš„å¾®æœåŠ¡çš„æ‰©å®¹ä¸å‡çº§" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">5.åŸºäºK8Sé›†ç¾¤çš„å¾®æœåŠ¡çš„æ‰©å®¹ä¸å‡çº§</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#51å¾®æœåŠ¡çš„æ‰©å®¹" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">5.1.å¾®æœåŠ¡çš„æ‰©å®¹</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#52å¾®æœåŠ¡çš„å‡çº§" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">5.2.å¾®æœåŠ¡çš„å‡çº§</span> </a>  </li> </ul>  </li> </ul> </nav></starlight-toc></div></div> </div> </aside> <div class="main-pane astro-67yu43on">  <main data-pagefind-body lang="en" dir="ltr" class="astro-bguv2lll">    <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <h1 id="_top" class="astro-j6tvhyss">SpringCloudå¾®æœåŠ¡ç”µå•†ç³»ç»Ÿåœ¨Kubernetesé›†ç¾¤ä¸­ä¸Šçº¿è¯¦ç»†æ•™ç¨‹</h1>  </div> </div>  <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <div class="sl-markdown-content"> <h1 id="springcloudå¾®æœåŠ¡ç”µå•†ç³»ç»Ÿåœ¨kubernetesé›†ç¾¤ä¸­ä¸Šçº¿è¯¦ç»†æ•™ç¨‹">SpringCloudå¾®æœåŠ¡ç”µå•†ç³»ç»Ÿåœ¨Kubernetesé›†ç¾¤ä¸­ä¸Šçº¿è¯¦ç»†æ•™ç¨‹</h1>
<blockquote>
<p>è¯¥æ–‡ç« æ¥è‡ªï¼š<a href="https://jiangxl.blog.csdn.net/article/details/121740024">https://jiangxl.blog.csdn.net/article/details/121740024</a></p>
<p>ä»…åšä¸ªäººå¤‡ä»½å­¦ä¹ ä½¿ç”¨ã€‚</p>
</blockquote>
<h2 id="1å¾®æœåŠ¡æ¶æ„åŠç†è®ºæ¦‚è¿°">1.<a href="https://so.csdn.net/so/search?q=%E5%BE%AE%E6%9C%8D%E5%8A%A1&#x26;spm=1001.2101.3001.7020">å¾®æœåŠ¡</a>æ¶æ„åŠç†è®ºæ¦‚è¿°</h2>
<p>ç¨‹åº<a href="https://so.csdn.net/so/search?q=%E6%9E%B6%E6%9E%84&#x26;spm=1001.2101.3001.7020">æ¶æ„</a>ä¸€å…±ç»å†äº†3ä¸ªé˜¶æ®µï¼šå•ä½“æ¶æ„ã€SOAæ¶æ„ã€å¾®æœåŠ¡æ¶æ„ã€‚</p>
<p>å¾®æœåŠ¡ç³»ç»Ÿåº”ç”¨ç”±åŸæ¥çš„å•ä½“å˜æˆå‡ ååˆ°å‡ ç™¾ä¸ªä¸åŒçš„å·¥ç¨‹ï¼Œä¼šäº§ç”Ÿä¾‹å¦‚åŒ…æ‹¬æœåŠ¡é—´çš„ä¾èµ–ï¼ŒæœåŠ¡å¦‚ä½•æ‹†å°ï¼Œå†…éƒ¨æ¥å£è§„èŒƒï¼Œæ•°æ®ä¼ é€’ç­‰ç­‰é—®é¢˜ï¼Œå°¤å…¶æ˜¯æœåŠ¡æ‹†åˆ†ï¼Œéœ€è¦å›¢é˜Ÿç†Ÿæ‚‰ä¸šåŠ¡æµç¨‹ï¼Œæ‡‚å¾—å–èˆï¼Œè¦ä¿è¯æ‹†åˆ†çš„ç²’åº¦æœåŠ¡æ—¢ç¬¦åˆâ€œé«˜å†…èšï¼Œä½è€¦åˆâ€çš„åŸºæœ¬åŸåˆ™ï¼Œè¿˜è¦å…¼é¡¾ä¸šåŠ¡çš„å‘å±•ä»¥åŠå…¬å¸çš„æ„¿æ™¯ï¼Œè¦è¿˜è¦è¯´æœå›¢é˜Ÿæˆå‘˜ä¸ºä¹‹åŠªåŠ›ï¼Œå¹¶ä¸”ç§¯ææŠ•å…¥ï¼Œåœ¨å¤šæ–¹ä¸­é—´å–å¾—å¹³è¡¡ã€‚</p>
<p>å¾®æœåŠ¡ä»æ¦‚å¿µä¸Šè®²å°±æ˜¯å°†ä¸€ä¸ªå¤§çš„å¹³å°æ‹†åˆ†æˆå‡ ä¸ªç‹¬ç«‹çš„å°æ¨¡å—ï¼Œè¿™äº›æ¨¡å—æœ‰è‡ªå·±ä¸“é—¨çš„æ•°æ®åº“æœåŠ¡ï¼Œå³ä½¿è¿™ä¸ªå•ç‹¬æ¨¡å—å‡ºç°äº†æ•…éšœï¼Œä¹Ÿä¸ä¼šå½±å“æ•´ä¸ªå¹³å°çš„ä½¿ç”¨ï¼Œä¾‹å¦‚ä¸€ä¸ªå¹³å°ä¸­æœ‰è®¢å•æ¨¡å—ã€æ–°é—»æ¨¡å—ã€å’¨è¯¢æ¨¡å—ï¼Œå³ä½¿æ–°é—»æ¨¡å—å®•æœºäº†ï¼Œè®¢å•æ¨¡å—ã€æ–°é—»æ¨¡å—ä¾ç„¶å·¥ä½œæ­£å¸¸ï¼Œä¹Ÿä¸ä¼šé€ æˆæ•´ä¸ªç½‘ç«™çš„ç˜«ç—ªã€‚</p>
<p>å¯¹äºå¾®æœåŠ¡ç‰ˆæœ¬è¿­ä»£è€Œè¨€ï¼Œåªéœ€è¦é’ˆå¯¹ç‰¹å®šåŠŸèƒ½æ‰€åœ¨çš„å­é¡¹ç›®ä¸Šçº¿å³å¯ï¼Œç‰ˆæœ¬è¿­ä»£æ›´åŠ çµæ´»ï¼Œè€Œå•ä½“ç¨‹åºç‰ˆæœ¬è¿­ä»£ï¼Œå“ªæ€•åªæ˜¯ä¸€ä¸ªå°å°çš„åŠŸèƒ½ä¹Ÿéœ€è¦å¯¹æ•´ä¸ªç³»ç»Ÿè¿›è¡Œæ›´æ–°ã€‚</p>
<p>ç›®å‰ä¸»æµçš„ç¨‹åºæ¶æ„å°±æ˜¯å¾®æœåŠ¡ç³»ç»Ÿï¼Œè¿ç”¨çš„æŠ€æœ¯æ ˆæ›´åŠ ä¸°å¯Œï¼Œä¾‹å¦‚kubernetesã€CI/CDã€Devopsç­‰ç­‰ã€‚</p>
<p>å¾®æœåŠ¡é¡¹ç›®åœ¨kubernetesç¯å¢ƒéƒ¨ç½²ä¸»è¦æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼šæ— çŠ¶æ€çš„éƒ¨ç½²ã€istioå¾®æœåŠ¡ç½‘æ ¼éƒ¨ç½²ã€‚</p>
<p>å¯ä»¥æŠŠå¾®æœåŠ¡ç†è§£ä¸ºæ˜¯ä¸€ä¸ªå¤§çš„æ¡†æ¶ï¼Œåœ¨è¿™ä¸ªæ¡†æ¶é‡Œé¢å†…åµŒå„ä¸ªå­ç³»ç»Ÿã€‚</p>
<h3 id="11å•ä½“æ¶æ„ä¸å¾®æœåŠ¡æ¶æ„çš„åŒºåˆ«">1.1.å•ä½“æ¶æ„ä¸å¾®æœåŠ¡æ¶æ„çš„åŒºåˆ«</h3>
<p><strong>å¾®æœåŠ¡çš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ç³»ç»ŸæœåŠ¡ç‹¬ç«‹åŒ–
<ul>
<li>æ¯ä¸ªå­é¡¹ç›®ç³»ç»Ÿéƒ½ä¼šç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²ï¼Œæœ‰æ•ˆçš„é¿å…ä¸€ä¸ªæœåŠ¡çš„bugå½±å“æ•´ä¸ªç³»ç»Ÿçš„ä½¿ç”¨</li>
</ul>
</li>
<li>æŠ€æœ¯æ ˆçµæ´»
<ul>
<li>æ¯ä¸ªå­ç³»ç»Ÿä¹‹é—´çº¦å®šä¸€ä¸ªé€šä¿¡æ–¹å¼ï¼Œä¾‹å¦‚MQã€APIç­‰ï¼Œä¸å†åƒå•ä½“æœåŠ¡é‚£ä¹ˆçš„å±€é™æ€§</li>
</ul>
</li>
<li>ç‹¬ç«‹éƒ¨ç½²
<ul>
<li>æ¯ä¸ªå¾®æœåŠ¡ç³»ç»Ÿéƒ½ç‹¬ç«‹éƒ¨ç½²ï¼Œéƒ½æœ‰å•ç‹¬çš„waråŒ…ï¼Œå³ä½¿å…¶ä¸­ä¸€ä¸ªæœåŠ¡å¼‚å¸¸å®•æœºï¼Œä¹Ÿä¸ä¼šå¯¹æ•´ä¸ªå¹³å°äº§ç”Ÿå½±å“</li>
</ul>
</li>
<li>æ‰©å±•æ€§å¼º
<ul>
<li>æ¯ä¸ªå¾®æœåŠ¡éƒ½å¯ä»¥éƒ¨ç½²å¤šå¥—ï¼Œé…åˆæ³¨å†Œä¸­å¿ƒå®ç°è´Ÿè½½å‡è¡¡èƒ½åŠ›</li>
</ul>
</li>
<li>ç‹¬ç«‹æ•°æ®
<ul>
<li>æ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰ç‹¬ç«‹çš„å­˜å‚¨ç»„ä»¶ï¼Œæ¯”å¦‚æ•°æ®åº“ã€ç¼“å­˜ç­‰ï¼Œäº’ä¸å½±å“</li>
</ul>
</li>
</ul>
<p><strong>å•ä½“æœåŠ¡çš„ç‰¹ç‚¹</strong></p>
<ul>
<li>æ˜“äºéƒ¨ç½²
<ul>
<li>å•ä½“æœåŠ¡åªæœ‰ä¸€ä¸ªç¨‹åºåŒ…ï¼Œåªéœ€è¦éƒ¨ç½²ä¸€ä¸ªæœåŠ¡å³å¯å®Œæˆæ•´ä¸ªç³»ç»Ÿçš„å»ºè®¾</li>
</ul>
</li>
<li>æ˜“äºæµ‹è¯•
<ul>
<li>æµ‹è¯•ç”¨ä¾‹ä¹Ÿåªéœ€è¦è®¾è®¡ä¸€ä¸ªå³å¯</li>
</ul>
</li>
</ul>
<p><strong>å•ä½“æœåŠ¡çš„ä¸è¶³</strong></p>
<ul>
<li>ä»£ç é‡çº§å·¨å¤§ï¼Œéš¾ä»¥ç»´æŠ¤ï¼Œå¦‚æœç³»ç»Ÿä¸­å­˜åœ¨bugï¼Œä¿®å¤èµ·æ¥ç‰µæ‰¯åŠŸèƒ½å¤ªå¤šï¼Œæ•…éšœç™¾å‡º</li>
<li>æ„å»ºã€éƒ¨ç½²çš„æˆæœ¬å·¨å¤§ï¼ŒæœåŠ¡éƒ½é›†æˆåœ¨ä¸€èµ·ï¼Œå¯åŠ¨çš„æ—¶é—´ä¹Ÿä¼šéå¸¸ç¼“æ…¢</li>
<li>æ–°äººä¸Šæ‰‹è¾ƒéš¾ï¼Œå¦‚æœæ•´ä¸ªæœåŠ¡ä¹Ÿæ²¡æœ‰æ³¨é‡Šçš„æƒ…å†µä¸‹ï¼Œæ–°çš„å¼€å‘äººå‘˜ä¸Šæ‰‹ä¼šéå¸¸éš¾</li>
</ul>
<p><strong>å¾®æœåŠ¡ä¸å•ä½“æœåŠ¡æ¶æ„ä¸Šçš„ä¸åŒ</strong></p>
<blockquote>
<p>å•ä½“æœåŠ¡ï¼šç¨‹åºåŒ…åªæœ‰ä¸€ä¸ªï¼Œå¼€å‘å›¢é˜Ÿå¯èƒ½æœ‰ä¸€ç¾¤äººï¼Œç”¨æˆ·ä¹‹é—´è®¿é—®ç¨‹åºåŒ…å³å¯è·å–ç³»ç»Ÿä¿¡æ¯ï¼Œåç«¯å¯¹åº”ä¸€ä¸ªæ•°æ®åº“</p>
<p>å¾®æœåŠ¡ï¼šç¨‹åºåŒ…æœ‰å¤šä¸ªï¼Œæ¯ä¸ªç¨‹åºåŒ…éƒ½æ˜¯ä¸åŒçš„åŠŸèƒ½ç»“åˆï¼Œä¸”æ¯ä¸ªå¾®æœåŠ¡ç¨‹åºéƒ½æœ‰è‡ªå·±çš„å•ç‹¬æ•°æ®åº“å­˜å‚¨æ•°æ®ï¼Œæ‰€æœ‰çš„å¾®æœåŠ¡ä¿¡æ¯éƒ½ä¼šå­˜å‚¨åˆ°æ³¨å†Œä¸­å¿ƒï¼Œç½‘å…³ç¨‹åºåœ¨æœ€å‰é¢ï¼Œå½“ç”¨æˆ·æœ‰è¯·æ±‚è¿›æ¥åï¼Œé¦–å…ˆå‘é€ç»™ç½‘å…³æœåŠ¡ï¼Œç„¶åç½‘å…³æ ¹æ®æ³¨å†Œä¸­å¿ƒçš„æ•°æ®ï¼Œå°†ä¸åŒåŠŸèƒ½çš„è¯·æ±‚è½¬å‘ç»™ä¸åŒçš„å¾®æœåŠ¡ç¨‹åº</p>
</blockquote>
<p><img src="https://cdn.agou-ops.cn/others/caf1d3f6f0f4405ea879f6408a54faf5.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="12å¾®æœåŠ¡ç»„ä»¶æ¶æ„å›¾">1.2.å¾®æœåŠ¡ç»„ä»¶æ¶æ„å›¾</h3>
<p>ä»¥ç”µå•†å¹³å°ä¸ºä¾‹ï¼Œæè¿°ä¸€ä¸ªè´­ä¹°å•†å“çš„å¾®æœåŠ¡ä¹‹é—´è°ƒç”¨æµç¨‹</p>
<p>ç”¨æˆ·é¦–å…ˆè®¿é—®åˆ°å¹³å°çš„é™æ€é¦–é¡µï¼Œå‘é€ä¸€ä¸ªæœç´¢è¯·æ±‚ä»å‰ç«¯é¡µé¢æäº¤ç»™å¾®æœåŠ¡çš„ç½‘å…³æœåŠ¡ï¼Œç½‘å…³æœåŠ¡æ˜¯å¯¹å¤–çš„ï¼Œä¹Ÿå°±æ˜¯ä¸ç®¡ç”¨æˆ·è¦æ“ä½œä»€ä¹ˆè¯·æ±‚ï¼Œéƒ½éœ€è¦ç”±ç½‘å…³æœåŠ¡è½¬å‘ç»™å…·ä½“çš„å¾®æœåŠ¡ï¼Œå› ä¸ºç½‘å…³æœåŠ¡æ˜¯å…¥å£ï¼Œå› æ­¤ç½‘å…³æœåŠ¡ä¸€èˆ¬éƒ½æ˜¯å¤šå°åšæˆçš„è´Ÿè½½å‡è¡¡ï¼Œæœç´¢è¯·æ±‚åˆ°è¾¾ç½‘å…³æœåŠ¡åï¼Œç½‘å…³æœåŠ¡ä¼šæ ¹æ®è¯·æ±‚çš„åŠŸèƒ½è½¬å‘åˆ°æœç´¢æœåŠ¡çš„ç¨‹åºä¸Šï¼Œæœç´¢å‡ºæ¥å•†å“åï¼Œä¼šè°ƒç”¨å•†å“æœåŠ¡ç¨‹åºï¼ŒæŸ¥çœ‹å•†å“çš„è¯¦ç»†æƒ…å†µï¼Œç”¨æˆ·é€‰æ‹©å®Œå•†å“åï¼Œå•†å“æœåŠ¡å†è°ƒç”¨è®¢å•æœåŠ¡ï¼Œå®Œæˆè®¢å•çš„åˆ›å»ºï¼Œå†ç”±è®¢å•æœåŠ¡è°ƒç”¨æ”¯ä»˜æœåŠ¡ï¼Œå®Œæˆå•†å“çš„è´­ä¹°ã€‚</p>
<p>æ‰€æœ‰çš„å¾®æœåŠ¡æ¥å£ä¿¡æ¯éƒ½ä¼šæ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼Œå½“ç¨‹åºå¯åŠ¨æˆåŠŸå°±ä¼šè‡ªåŠ¨æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼Œæ³¨å†Œä¸­å¿ƒä¹Ÿä¼šèµ·åˆ°ä¸€ä¸ªè´Ÿè½½å‡è¡¡çš„ä½œç”¨ï¼Œæ ¹æ®ç½‘å…³çš„APIè¯·æ±‚ï¼Œåœ¨æ³¨å†Œä¸­å¿ƒä¸Šæ‰¾åˆ°ç‰¹å®šçš„å¾®æœåŠ¡ç¨‹åºè¿›è¡Œè½¬å‘ã€‚</p>
<p>å¾®æœåŠ¡ç¨‹åºè¿˜æœ‰è‡ªå·±çš„ä¸€å¥—é…ç½®ä¸­å¿ƒï¼Œä¿å­˜ç€å„ä¸ªå¾®æœåŠ¡çš„é…ç½®æ–‡ä»¶ï¼Œæ‰€æœ‰çš„å¾®æœåŠ¡ç¨‹åºå¯èƒ½éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„åç«¯ç»„ä»¶ï¼Œæ¯”å¦‚MySQLã€Redisã€MQã€åˆ†å¸ƒå¼å­˜å‚¨ã€‚</p>
<p>å¾®æœåŠ¡ä¹‹é—´çš„é€šä¿¡å¯ä»¥é‡‡ç”¨æ¥å£APIã€MQã€RPACç­‰æœºåˆ¶</p>
<p>å¾®æœåŠ¡åœ¨kubernetesé›†ç¾¤ä¸­éƒ¨ç½²æ—¶å¯ä»¥é‡‡ç”¨æ— çŠ¶æ€æœåŠ¡çš„éƒ¨ç½²ï¼Œå¯¹äºæ•°æ®åº“ã€Redisã€MQã€å­˜å‚¨è¿˜æ˜¯å»ºè®®éƒ¨ç½²åœ¨k8sé›†ç¾¤ä¹‹å¤–ã€‚</p>
<p>æ³¨å†Œä¸­å¿ƒä¸å¾®æœåŠ¡ä¹‹é—´çš„è”ç³»ï¼šå‘ç°å¾®æœåŠ¡â€”>å¾®æœåŠ¡æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒâ€”>è¿›è¡Œå¿ƒè·³ç›‘æµ‹ï¼Œå¼‚å¸¸çš„èŠ‚ç‚¹ä¼šè¸¢å‡º</p>
<p>å¾®æœåŠ¡ç¨‹åºçš„é—¨æˆ·ç½‘ç«™ä¼šé…ç½®Gatewayç½‘å…³æœåŠ¡çš„åœ°å€ï¼Œç”±é—¨æˆ·ç½‘ç«™ç”¨æˆ·è¯·æ±‚çš„å¾®æœåŠ¡ä¿¡æ¯ï¼Œè½¬å‘ç»™Gatewayç½‘å…³ç¨‹åºï¼Œæ‰€æœ‰çš„å¾®æœåŠ¡éƒ½ä¼šæ³¨å†Œåœ¨Eurekaæ³¨å†Œä¸­å¿ƒä¸­ï¼ŒGatewayç½‘å…³ä¼šå°†è¯·æ±‚é€šè¿‡æ³¨å†Œä¸­å¿ƒè½¬å‘ç»™å¯¹åº”çš„å¾®æœåŠ¡ç¨‹åºã€‚
<img src="https://cdn.agou-ops.cn/others/0225cafb98dd43d98ddd102cf1203791.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="13å¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ">1.3.å¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ</h3>
<p>å¾®æœåŠ¡é¢å¯¹ç€å¾ˆå¤šé—®é¢˜ï¼š</p>
<ul>
<li>å¦‚ä½•è®°å½•ä¸€ä¸ªå¾®æœåŠ¡å‰¯æœ¬çš„æ¥å£åœ°å€ï¼Œå¦‚ä½•å¯¹å¤šä¸ªå¾®æœåŠ¡èŠ‚ç‚¹ç»„æˆçš„é›†ç¾¤åšè´Ÿè½½å‡è¡¡</li>
<li>ç¬¦åˆåˆ¤æ–­é›†ç¾¤ä¸­æŸä¸€ä¸ªå¾®æœåŠ¡æ˜¯å¦å¯ç”¨</li>
</ul>
<p>å¾®æœåŠ¡é¢ä¸´çš„è¿™äº›é—®é¢˜éƒ½å¯ä»¥é€šè¿‡æ³¨å†Œä¸­å¿ƒå»è§£å†³ï¼Œåœ¨æ³¨å†Œä¸­å¿ƒä¸­å¯ç”¨è®°å½•æŸä¸€ä¸ªå¾®æœåŠ¡çš„æ‰€æœ‰å‰¯æœ¬èŠ‚ç‚¹ï¼Œå½“ä¸€ä¸ªå‰¯æœ¬èŠ‚ç‚¹æŒ‚æ‰äº†ï¼Œæ³¨å†Œä¸­å¿ƒä¹Ÿä¼šå°†å…¶è¸¢å‡ºé›†ç¾¤ï¼Œæ³¨å†Œä¸­å¿ƒä¼šå°†ä¸€ä¸ªå¾®æœåŠ¡çš„æ‰€æœ‰å‰¯æœ¬èŠ‚ç‚¹è‡ªåŠ¨å½¢æˆä¸€ä¸ªè´Ÿè½½å‡è¡¡</p>
<p>åœ¨å¾®æœåŠ¡ä¸­é…åˆæ³¨å†Œä¸­å¿ƒåœ°å€ä¹‹åï¼Œç¨‹åºä¸€æ—¦å¯åŠ¨ï¼Œæ— éœ€é…ç½®æ³¨å†Œä¸­å¿ƒï¼Œä¸”èƒ½å¤Ÿè‡ªåŠ¨æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒ</p>
<p>å¾®æœåŠ¡æ¥å…¥æ³¨å†Œä¸­å¿ƒæµç¨‹ï¼šå¾®æœåŠ¡ç¨‹åº---->æ³¨å†Œ---->æ³¨å†Œä¸­å¿ƒæœåŠ¡å™¨</p>
<p>æ³¨å†Œä¸­å¿ƒè°ƒç”¨å¾®æœåŠ¡æµç¨‹ï¼šå¾®æœåŠ¡ç½‘å…³ç¨‹åº---->æ³¨å†Œ/æŸ¥è¯¢å¾®æœåŠ¡ï¼ˆè°ƒç”¨å¾®æœåŠ¡ï¼‰---->æ³¨å†Œä¸­å¿ƒ---->å¾®æœåŠ¡ç¨‹åº</p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ä¸é€‚ç”¨æ³¨å†Œä¸­å¿ƒï¼Œk8sè‡ªèº«çš„åŠŸèƒ½å°±æœ‰æœåŠ¡å‘ç°è‡ªåŠ¨å½¢æˆè´Ÿè½½å‡è¡¡ï¼Œä¹Ÿå¯ä»¥ç”¨å¥åº·æ£€æŸ¥ç›‘æ§æœåŠ¡çš„è¿è¡ŒçŠ¶å†µ</p>
<p>ç›®å‰ä¸»æµçš„æ³¨å†Œä¸­å¿ƒï¼šEurekaã€Nacos</p>
<h3 id="14ä¸åŒçš„éƒ¨ç½²ç¯å¢ƒå¯¹äºç¨‹åºé…ç½®æ–‡ä»¶å¦‚ä½•ç®¡ç†">1.4.ä¸åŒçš„éƒ¨ç½²ç¯å¢ƒå¯¹äºç¨‹åºé…ç½®æ–‡ä»¶å¦‚ä½•ç®¡ç†</h3>
<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹å››ç§æ–¹å¼æ¥ç®¡ç†ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒçš„é…ç½®æ–‡ä»¶</p>
<ul>
<li>kubernetes configmapèµ„æº
<ul>
<li>å¯ä»¥æ ¹æ®çº¿ä¸Šã€é¢„å‘å¸ƒã€æµ‹è¯•ç¯å¢ƒç¼–å†™ä¸åŒçš„configmapèµ„æºï¼Œç„¶åå°†å…¶æŒ‚è½½åˆ°å¯¹åº”çš„deploymentèµ„æºä¸Š</li>
</ul>
</li>
<li>docker å®¹å™¨å¯åŠ¨è„šæœ¬entrypoint.sh
<ul>
<li>æ ¹æ®ç¯å¢ƒçš„ä¸åŒåœ¨entrypoint.shå£°æ˜ç¯å¢ƒå˜é‡ï¼Œè¿è¡Œç‰¹å®šçš„é…ç½®æ–‡ä»¶</li>
</ul>
</li>
<li>javaå¯åŠ¨å‘½ä»¤æ§åˆ¶
<ul>
<li>javaç¨‹åºå¯ä»¥åŒæ—¶å­˜åœ¨å¤šä¸ªç¨‹åºé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å£°æ˜å„è‡ªçš„å˜é‡ï¼Œç„¶åä½¿ç”¨<code dir="auto">java --spring.profiles.active=xxx xxx.jar</code>çš„æ–¹å¼æ¥æŒ‡å®šä¸åŒç¯å¢ƒçš„é…ç½®æ–‡ä»¶</li>
</ul>
</li>
<li>ä½¿ç”¨å¼€æºçš„ç»Ÿä¸€é…ç½®ä¸­å¿ƒç¨‹åºï¼Œæ¯”å¦‚å¸‚é¢ä¸Šä¸»æµçš„Apolloä»¥åŠDisconfï¼Œè¿™ä¸¤æ¬¾ç¨‹åºéƒ½æœ‰è‡ªå·±çš„å›¾å½¢åŒ–ç®¡ç†ç³»ç»Ÿï¼Œé…ç½®å¯è§†åŒ–</li>
</ul>
<h2 id="2å¾®æœåŠ¡è¿ç§»è‡³kuberneteså¹³å°æµç¨‹">2.å¾®æœåŠ¡è¿ç§»è‡³kuberneteså¹³å°æµç¨‹</h2>
<h3 id="21é¡¹ç›®è¿ç§»åˆ°k8så¹³å°æµç¨‹">2.1.é¡¹ç›®è¿ç§»åˆ°K8Så¹³å°æµç¨‹</h3>
<p><img src="https://cdn.agou-ops.cn/others/47633ea793f24a4b8727059870501e50.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°">
é¡¹ç›®è¿ç§»åˆ°K8Så¹³å°å¤§è‡´æµç¨‹åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>åˆ¶ä½œç¨‹åºé•œåƒ
<ul>
<li>åœ¨K8sç¯å¢ƒï¼Œæ‰€æœ‰çš„ç¨‹åºéƒ½æ˜¯ä»¥Dockeré•œåƒæ¥è¿è¡Œçš„ï¼Œä¸€ä¸ªé•œåƒåŒ…å«äº†æ–‡ä»¶ç³»ç»Ÿã€ç¨‹åºçš„è¿è¡Œç¯å¢ƒã€ç¨‹åºæœ¬èº«ï¼Œå¯ä»¥é€šè¿‡Dockerfileçš„å½¢å¼åˆ¶ä½œé•œåƒ</li>
</ul>
</li>
<li>ä½¿ç”¨èµ„æºæ§åˆ¶å™¨ç®¡ç†Podèµ„æº
<ul>
<li>ç¨‹åºé•œåƒè¿è¡Œéœ€è¦ä¾é Podèµ„æºï¼Œéœ€è¦æœ‰Podæ§åˆ¶å™¨å»ç®¡ç†Podèµ„æº</li>
<li>å¸¸è§çš„Podæ§åˆ¶å™¨ï¼šDeploymentï¼ˆæ— çŠ¶æ€ç¨‹åºéƒ¨ç½²ï¼‰ã€Statefulsetï¼ˆæœ‰çŠ¶æ€ç¨‹åºéƒ¨ç½²ï¼‰ã€Job/CronJobï¼ˆæ‰¹é‡å¤„ç†ï¼‰</li>
</ul>
</li>
<li>å°†Podèµ„æºä½¿ç”¨æœåŠ¡å‘ç°å¯¹å¤–è¿›è¡Œæš´éœ²
<ul>
<li>Servicesèµ„æºæ³¨æ„é€šè¿‡labelæ ‡ç­¾ä¸Podè¿›è¡Œå…³è”ï¼Œå®ç°å¯¹ä¸€ç»„Podçš„è‡ªåŠ¨è´Ÿè½½å‡è¡¡ä»¥åŠæœåŠ¡å‘ç°</li>
<li>Servicesèµ„æºæ”¯æŒClusterã€Nodeportã€LoadBalancerä¸‰ç§ç±»å‹</li>
</ul>
</li>
<li>å¯¹å¤–å‘å¸ƒåº”ç”¨ç¨‹åº
<ul>
<li>å¯ä»¥ä½¿ç”¨å•ç‹¬çš„nginxå®¹å™¨å»åå‘ä»£ç†Cordnsè§£æçš„servicesåç§°å°†Podåº”ç”¨å¯¹å¤–å‘å¸ƒ</li>
<li>ä¹Ÿå¯ä»¥ä½¿ç”¨ingress+servicesçš„æ–¹å¼å°†åº”ç”¨ç¨‹åºå¯¹å¤–å‘å¸ƒï¼Œä½¿ç”¨ingressçš„å‰ææ˜¯å¿…é¡»å¯ä»¥é€šè¿‡åŸŸåè®¿é—®åº”ç”¨</li>
<li>æ¶æ„å›¾å¦‚ä¸‹
<img src="https://cdn.agou-ops.cn/others/4450dd7d3c994bb78ca36b43af66e28a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
</ul>
</li>
<li>åæœŸçš„æ—¥å¿—æ”¶é›†ä¸ç›‘æ§
<ul>
<li>å½“åº”ç”¨åœ¨K8sç¨‹åºè¿è¡Œåï¼Œå¯¹äºç¨‹åºçš„æ—¥å¿—æ¯”å¦‚nginxã€tomcatè¿™äº›æ—¥å¿—æ–‡ä»¶éƒ½ä¸ä¼šåšæŒä¹…åŒ–ï¼Œå› æ­¤å°±éœ€è¦è€ƒè™‘å¯¹æ—¥å¿—è¿›è¡Œæ”¶é›†ï¼Œå¯ä»¥é‡‡ç”¨Filebeat+ELKæ–¹å¼å¯¹ç¨‹åºæ—¥å¿—è¿›è¡Œæ”¶é›†</li>
<li>ä½¿ç”¨Prometheus+Grafanaå¯¹æ•´ä¸ªK8så¹³å°è¿›è¡Œå…¨æ–¹é¢ç›‘æ§</li>
</ul>
</li>
</ul>
<h3 id="22ä¼ ç»Ÿéƒ¨ç½²ä¸k8séƒ¨ç½²çš„åŒºåˆ«">2.2.ä¼ ç»Ÿéƒ¨ç½²ä¸K8Séƒ¨ç½²çš„åŒºåˆ«</h3>
<blockquote>
<p><strong>ä¼ ç»Ÿæ–¹å¼éƒ¨ç½²é¡¹ç›®æ–¹å¼ï¼š</strong></p>
<p>é¦–å…ˆç”±å¼€å‘äººå‘˜æäº¤ä»£ç åˆ°Gitlabä»£ç ä»“åº“ï¼ŒJenkinsè§¦å‘æ›´æ–°ä»Gitlabä¸Šè·å–æœ€æ–°ä»£ç ï¼Œé€šè¿‡mavenå°†ä»£ç ç¼–è¯‘æˆwaråŒ…æˆ–è€…jaråŒ…ï¼Œå†ç”±Jenkinsé€šè¿‡å†™å¥½çš„è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬æˆ–è€…Ansibleè‡ªåŠ¨åŒ–ç¨‹åºå°†waråŒ…éƒ¨ç½²åˆ°ç¨‹åºæ‰€åœ¨çš„äº‘ä¸»æœºï¼Œäº‘ä¸»æœºä¸€å®šä¼šæ˜¯å¤šå°ç»„æˆçš„è´Ÿè½½å‡è¡¡é›†ç¾¤ï¼Œå°†è´Ÿè½½å‡è¡¡VIPä¸åŸŸåè¿›è¡Œç»‘å®šï¼Œç”¨æˆ·é€šè¿‡è®¿é—®åŸŸåç”±è´Ÿè½½å‡è¡¡è½¬å‘è‡³å¯¹åº”çš„åå°ä¸»æœºã€‚</p>
<p>ä¼ ç»Ÿæ¶æ„è¿ç»´ç¯å¢ƒä¸€èˆ¬ç”±zabbixç›‘æ§ç³»ç»Ÿè¿›è¡Œç›‘æ§ï¼Œæ—¥å¿—é‡‡é›†ä¼šä½¿ç”¨ELKå¹³å°ã€‚</p>
</blockquote>
<p><img src="https://cdn.agou-ops.cn/others/e34c94fc97e0416cb21cd00879244103.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p><strong>Kuberneteså¹³å°éƒ¨ç½²é¡¹ç›®æ–¹å¼ï¼š</strong></p>
<p>é¦–å…ˆç”±å¼€å‘äººå‘˜æäº¤ä»£ç åˆ°Gitlabä»£ç ä»“åº“ï¼ŒJenkinsè§¦å‘æ›´æ–°ä»Gitlabä¸Šè·å–æœ€æ–°ä»£ç ï¼Œé€šè¿‡å†™å¥½æµæ°´çº¿å°†ç¨‹åºæ‰“åŒ…æˆDockeré•œåƒå¹¶æ¨é€è‡³Harborä»“åº“ï¼Œå†ç”±Jenkinsè°ƒç”¨K8sçš„Master Apiå°†ç¨‹åºçš„é•œåƒé‡‡ç”¨Deploymentæ§åˆ¶å™¨éƒ¨ç½²åˆ°K8sé›†ç¾¤ï¼Œå†ç”±serviceèµ„æºæš´éœ²podèµ„æºï¼Œæœ€åç”±ingressæˆ–è€…nginxèµ„æºå°†ç¨‹åºå‘å¸ƒåˆ°äº’è”ç½‘ã€‚</p>
</blockquote>
<p><img src="https://cdn.agou-ops.cn/others/3ca0d364bdc24690a04d4ca95eb1cb05.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="3å¾®æœåŠ¡ç¨‹åºå‰æœŸç¯å¢ƒå‡†å¤‡é…ç½®ç¼–è¯‘åˆ¶ä½œé•œåƒ">3.å¾®æœåŠ¡ç¨‹åºå‰æœŸç¯å¢ƒå‡†å¤‡ï¼ˆé…ç½®ã€ç¼–è¯‘ã€åˆ¶ä½œé•œåƒï¼‰</h2>
<h3 id="31simple-microserviceå¾®æœåŠ¡é¡¹ç›®ä»‹ç»">3.1.simple-microserviceå¾®æœåŠ¡é¡¹ç›®ä»‹ç»</h3>
<p>æœ¬æ¬¡ä½¿ç”¨çš„å¾®æœåŠ¡ä¸ºspring cloudçš„ç”µå•†å¹³å°é¡¹ç›®</p>
<p>é¡¹ç›®åç§°ï¼šsimple-microservice</p>
<p>simple-microserviceå¾®æœåŠ¡çš„å„ä¸ªç¨‹åºï¼š</p>
<ul>
<li>eureka-serviceï¼ˆæ³¨å†Œä¸­å¿ƒï¼‰</li>
<li>gateway-serviceï¼ˆç½‘ç®¡æœåŠ¡ï¼‰</li>
<li>order-serviceï¼ˆè®¢å•æœåŠ¡ï¼‰</li>
<li>product-serviceï¼ˆå•†å“æœåŠ¡ï¼‰</li>
<li>portal-serviceï¼ˆé—¨æˆ·ç½‘ç«™ï¼‰</li>
<li>stock-serviceï¼ˆåº“å­˜æœåŠ¡ï¼‰</li>
</ul>
<p>ç”¨æˆ·è¯·æ±‚é¦–å…ˆåˆ°Protalå‰ç«¯é¡µé¢ï¼Œä¹Ÿå°±æ˜¯ç¨‹åºçš„é¦–é¡µï¼Œåœ¨é¦–é¡µçš„å„é¡¹åŠŸèƒ½æ“ä½œéƒ½ä¼šç”±Gatewayç½‘å…³æœåŠ¡è½¬å‘åˆ°å„è‡ªçš„å¾®æœåŠ¡ç¨‹åºä¸Šï¼Œæ¯”å¦‚è¯·æ±‚ä¸€ä¸ªè®¢å•æœåŠ¡ï¼Œè®¢å•æœåŠ¡ä¼šäº‹å…ˆæ³¨å†Œåˆ°Eurekaä¸­ï¼Œç”±Gatewayå°†è¯·æ±‚å‘é€ç»™Eurekaï¼Œå†ç”±Eurekaè½¬å‘ç»™å…·ä½“çš„å¾®æœåŠ¡ç¨‹åºï¼Œè¿™äº›å¾®æœåŠ¡ç¨‹åºéƒ½æœ‰è‡ªå·±å•ç‹¬çš„æ•°æ®åº“æœåŠ¡ã€‚</p>
<p>å¾®æœåŠ¡ç¨‹åºçš„é—¨æˆ·ç½‘ç«™ä¼šé…ç½®Gatewayç½‘å…³æœåŠ¡çš„åœ°å€ï¼Œç”±é—¨æˆ·ç½‘ç«™ç”¨æˆ·è¯·æ±‚çš„å¾®æœåŠ¡ä¿¡æ¯ï¼Œè½¬å‘ç»™Gatewayç½‘å…³ç¨‹åºï¼Œæ‰€æœ‰çš„å¾®æœåŠ¡éƒ½ä¼šæ³¨å†Œåœ¨Eurekaæ³¨å†Œä¸­å¿ƒä¸­ï¼ŒGatewayç½‘å…³ä¼šå°†è¯·æ±‚é€šè¿‡æ³¨å†Œä¸­å¿ƒè½¬å‘ç»™å¯¹åº”çš„å¾®æœåŠ¡ç¨‹åºã€‚
<img src="https://cdn.agou-ops.cn/others/b89c6c882bbe4a2d9ab53f97d5fe1f35.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è¯¥å¾®æœåŠ¡ç¨‹åºä»£ç å¯ä»¥æ‰˜ç®¡åœ¨gitlabä»£ç ä»“åº“ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹å¤šä¸ªåˆ†æ”¯æ¨¡æ‹Ÿä»å¼€å‘åˆ°ä¸Šçº¿çš„æµç¨‹ï¼Œç†å¿µï¼šåˆ†åˆ«åˆ›å»º5ä¸ªåˆ†æ”¯ï¼Œåœ¨æ¯ä¸ªåˆ†æ”¯ä¸­å¢åŠ å¯¹åº”çš„ä»£ç ï¼Œæœ€ååˆå¹¶åˆ°masteråˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å°±åœ¨masteråˆ†æ”¯ä¸Šæ–°å¢é…ç½®æ–‡ä»¶ï¼Œæˆ‘æ˜¯ç›´æ¥æ‹‰å–dev1åˆ†æ”¯ï¼Œåªæœ‰ç¨‹åºä»£ç çš„åˆ†æ”¯ï¼Œç„¶åæ–°å¢ä¸€ç³»åˆ—é…ç½®ï¼Œæœ€åä¸Šçº¿ã€‚</p>
<p>æ‹‰å–dev1åˆ†æ”¯ï¼Œè¿›è¡Œä¸€ç³»åˆ—é…ç½®çš„è¯ï¼Œé¦–å…ˆè¦æŠŠmasteråˆ†æ”¯é‡Œçš„protalç¨‹åºä»£ç åŒæ­¥åˆ°dev1åˆ†æ”¯é‡Œï¼Œå› ä¸ºdev1çš„protalç¨‹åºä»£ç æœ‰ç‚¹bugï¼Œæ•´ä¸ªå¾®æœåŠ¡è¿è¡Œå®Œæ¯•åï¼Œorderè®¢å•æœåŠ¡ä¼šæŠ¥é”™ã€‚</p>
<p>åˆ†åˆ«æœ‰äº”ä¸ªåˆ†æ”¯ï¼š</p>
<ul>
<li>dev1ï¼šäº¤ä»˜ä»£ç </li>
<li>dev2ï¼šæ–°å¢ç¨‹åºæ‰“åŒ…çš„Dockerfileæ–‡ä»¶</li>
<li>dev3ï¼šæ–°å¢K8sèµ„æºç¼–æ’Yamlæ–‡ä»¶</li>
<li>dev4ï¼šå¾®æœåŠ¡é“¾è·¯ç›‘æ§</li>
<li>dev5ï¼šæ–°åŠŸèƒ½ä»£ç æ›´æ–°ä¸Šçº¿</li>
<li>masterï¼šä¸Šçº¿ç‰ˆæœ¬</li>
</ul>
<p><img src="https://cdn.agou-ops.cn/others/258d6fe2cd114cd58843209bdf1f85de.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="32simpleå¾®æœåŠ¡éƒ¨ç½²åˆ°k8sé€»è¾‘æ¶æ„">3.2.simpleå¾®æœåŠ¡éƒ¨ç½²åˆ°K8Sé€»è¾‘æ¶æ„</h3>
<p><strong>simple-microserviceå¾®æœåŠ¡éƒ¨ç½²åˆ°k8så¹³å°ä¸»è¦åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</strong></p>
<ul>
<li>ä¿®æ”¹ç¨‹åºé…ç½®æ–‡ä»¶ï¼Œå°†æ•°æ®åº“ç­‰å„ç»„ä»¶åœ°å€ä¿®æ”¹ä¸ºå½“å‰ç¯å¢ƒ</li>
<li>å°†å„ä¸ªå¾®æœåŠ¡ç¨‹åºä½¿ç”¨Mavenç¼–è¯‘æˆå¯éƒ¨ç½²çš„jaråŒ…</li>
<li>ç¼–å†™Dockerfileå°†ç¨‹åºåšæˆdockeré•œåƒ</li>
</ul>
<p><strong>å¯¹K8Sç¯å¢ƒçš„è¦æ±‚ï¼š</strong></p>
<p>ä¸€å¥—å®Œæ•´çš„K8Sé›†ç¾¤ã€æœ‰cordnså¯ä»¥è§£æServiceåœ°å€ã€Harboré•œåƒä»“åº“ã€Nginxå®¹å™¨å°†é¡¹ç›®å‘å¸ƒåˆ°äº’è”ç½‘æˆ–è€…INgressèµ„æºå°†é¡¹ç›®å‘å¸ƒåˆ°äº’è”ç½‘ã€‚</p>
<p><strong>å¾®æœåŠ¡éƒ¨ç½²åˆ°K8Sç¯å¢ƒä¹‹åæ¶æ„æ˜¯æ€æ ·çš„</strong></p>
<blockquote>
<p>é¦–å…ˆç”¨æˆ·è®¿é—®ç½‘ç«™çš„åŸŸåï¼Œè¯·æ±‚è¾¾åˆ°å‰ç«¯é¡µé¢ï¼Œç‚¹å‡»å‰ç«¯é¡µé¢ä¸­çš„åŠŸèƒ½è·³è½¬åˆ°ä¸åŒçš„å¾®æœåŠ¡ï¼Œæ¯”å¦‚å•†å“æœåŠ¡ï¼Œå°†å•†å“æœåŠ¡çš„è¯·æ±‚äº¤ä¸ªGatewayç½‘å…³æœåŠ¡ï¼Œç”±ç½‘å…³æœåŠ¡è½¬å‘ç»™å•†å“çš„å¾®æœåŠ¡ç¨‹åºProductï¼Œå„ä¸ªå¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨ï¼Œéƒ½ä»Eurekaæ³¨å†Œä¸­å¿ƒè¯»å–å„ä¸ªå¾®æœåŠ¡çš„ä¿¡æ¯å®Œæˆè°ƒåº¦ï¼ŒProductï¼ˆå•†å“ï¼‰ã€Orderï¼ˆè®¢å•ï¼‰ã€Stockï¼ˆåº“å­˜ï¼‰éƒ½æœ‰å•ç‹¬çš„æ•°æ®åº“ï¼ŒMySQLæ•°æ®éƒ¨ç½²åœ¨K8Sé›†ç¾¤ä¹‹å¤–ã€‚</p>
<p>æœåŠ¡å‘å¸ƒåˆ°äº’è”ç½‘é‡‡ç”¨Nginxè€Œä¸é‡‡ç”¨Ingressï¼ŒNginxå¯ä»¥é…ç½®æ›´å¤šçš„å‚æ•°ï¼Œå°†Nginxå®¹å™¨è¿è¡Œåœ¨æ¯ä¸€ä¸ªNodeä¸»æœºä¸Šï¼Œæ˜ å°„Nodeä¸»æœºçš„80/443ç«¯å£ï¼Œé€šè¿‡åœ¨hostsæ–‡ä»¶é‡Œç»‘å®šnodeä¸»æœºip+ç¨‹åºåŸŸåçš„æ–¹å¼è®¿é—®å¾®æœåŠ¡ã€‚</p>
</blockquote>
<p><img src="https://cdn.agou-ops.cn/others/60f3e04a6fb3410cbdc1f54eee6a7c4e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="33å‡†å¤‡å¾®æœåŠ¡å„ç¨‹åºçš„é…ç½®æ–‡ä»¶">3.3.å‡†å¤‡å¾®æœåŠ¡å„ç¨‹åºçš„é…ç½®æ–‡ä»¶</h3>
<p>åœ¨ä½¿ç”¨Mavenä¹‹å‰ï¼Œé¦–å…ˆå°†ç¨‹åºçš„é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œç¼–è¯‘æˆåŠŸä¹‹åå†æƒ³ä¿®æ”¹é…ç½®æ–‡ä»¶å†…å®¹ï¼Œå°±éœ€è¦é‡æ–°ç¼–è¯‘äº†ï¼Œå°†æ¯ä¸ªå¾®æœåŠ¡çš„ç¯å¢ƒåœ°å€éƒ½ä¿®æ”¹æˆè‡ªå·±ç¯å¢ƒçš„åœ°å€ã€‚</p>
<p>æ‹‰å–dev1åˆ†æ”¯å±•å¼€å…¨æ–°é…ç½®</p>
<h4 id="331åˆ›å»ºå¾®æœåŠ¡å„ä¸ªç¨‹åºçš„prodé…ç½®æ–‡ä»¶">3.3.1.åˆ›å»ºå¾®æœåŠ¡å„ä¸ªç¨‹åºçš„prodé…ç½®æ–‡ä»¶</h4>
<p>eurekaï¼ˆæ³¨å†Œä¸­å¿ƒï¼‰ã€gatewayï¼ˆç½‘å…³ï¼‰ã€orderï¼ˆè®¢å•ï¼‰ã€portalï¼ˆé¦–é¡µï¼‰ã€productï¼ˆå•†å“ï¼‰ã€stockï¼ˆåº“å­˜ï¼‰è¿™å‡ ä¸ªå¾®æœåŠ¡ç¨‹åºéƒ½éœ€è¦é…ç½®ï¼Œæ–°å»ºä¸€ä¸ªprodçš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºçº¿ä¸Šç”Ÿäº§ç¯å¢ƒ</p>
<p>orderï¼ˆè®¢å•ï¼‰ã€productï¼ˆå•†å“ï¼‰ã€stockï¼ˆåº“å­˜ï¼‰è¿™äº›å¾®æœåŠ¡æœ‰ä¸¤ä¸ªåŒ…ï¼Œåˆ†åˆ«æ˜¯xxx-bizå’Œxxx-apiï¼Œåªéœ€è¦éƒ¨ç½²bizç›®å½•ä¸‹çš„jaråŒ…å³å¯ï¼Œapiçš„ç›®å½•åªæ˜¯å­˜åœ¨ä¸€äº›ä¾èµ–</p>
<p>orderï¼ˆè®¢å•ï¼‰ã€productï¼ˆå•†å“ï¼‰ã€stockï¼ˆåº“å­˜ï¼‰è¿™äº›å¾®æœåŠ¡éƒ½æœ‰è‡ªå·±å•ç‹¬çš„æ•°æ®åº“</p>
<p>å…ˆå°†prodçš„é…ç½®æ–‡ä»¶åˆ›å»ºå‡ºæ¥ï¼Œå¾…eurekaé¡¹ç›®éƒ¨ç½²å®Œæˆåï¼Œå†è¿›è¡Œè¿›ä¸€æ­¥çš„ä¿®æ”¹ï¼Œæœ€åå°†ç¨‹åºç¼–è¯‘</p>
<p><strong>1.eureka-serviceé…ç½®æ–‡ä»¶</strong></p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.pjkke.css"><script type="module" src="/_astro/ec.sgewm.js"></script><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.åˆ›å»ºä¸€ä¸ªprodçš„é…ç½®æ–‡ä»¶</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> cd eureka-service/src/main/resources/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/eureka-service/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> cp application-fat.yml application-prod.yml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.ç¨‹åºä½¿ç”¨prodçš„é…ç½®æ–‡ä»¶è¿è¡Œ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/eureka-service/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim application.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">server:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">port:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8080</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#809191;--1:#616671">#eurekaçš„ç«¯å£å·</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">spring:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">application:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">legendshop-basic-eureka</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">profiles:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">active:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">prod</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#809191;--1:#616671">#å°†è¿™é‡Œä¿®æ”¹ä¸ºprodå°±ä¼šè°ƒç”¨prodé…ç½®æ–‡ä»¶</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">3.é…ç½®eurekaæœåŠ¡çš„é…ç½®æ–‡ä»¶</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/eureka-service/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim application-prod.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">server:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">renewal-percent-threshold:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0.9</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">enable-self-preservation:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">false</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">eviction-interval-timer-in-ms:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">40000</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">instance:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">hostname:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">127.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.1</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">prefer-ip-address:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">client:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">register-with-eureka:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">false</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">serviceUrl:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">defaultZone:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">http://127.0.0.1:</span><span style="--0:#D6DEEB;--1:#403F53">${</span><span style="--0:#C5E478;--1:#3C63B3">server</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#C5E478;--1:#3C63B3">port</span><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#ECC48D;--1:#3C63B3">/eureka/</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">fetch-registry:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">false</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.åˆ›å»ºä¸€ä¸ªprodçš„é…ç½®æ–‡ä»¶[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1]\# cd eureka-service/src/main/resources/[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/eureka-service/src/main/resources]\# cp application-fat.yml application-prod.yml2.ç¨‹åºä½¿ç”¨prodçš„é…ç½®æ–‡ä»¶è¿è¡Œ[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/eureka-service/src/main/resources]\# vim application.ymlserver:  port: 8080        #eurekaçš„ç«¯å£å·spring:  application:    name: legendshop-basic-eureka  profiles:    active: prod    #å°†è¿™é‡Œä¿®æ”¹ä¸ºprodå°±ä¼šè°ƒç”¨prodé…ç½®æ–‡ä»¶3.é…ç½®eurekaæœåŠ¡çš„é…ç½®æ–‡ä»¶[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/eureka-service/src/main/resources]\# vim application-prod.ymleureka:  server:    renewal-percent-threshold: 0.9    enable-self-preservation: false    eviction-interval-timer-in-ms: 40000  instance:    hostname: 127.0.0.1    prefer-ip-address: true  client:    register-with-eureka: false    serviceUrl:      defaultZone: http://127.0.0.1:${server.port}/eureka/    fetch-registry: false"><div></div></button></div></figure></div>
<p><strong>2.gateway-serviceé…ç½®æ–‡ä»¶</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.åˆ›å»ºä¸€ä¸ªprodçš„é…ç½®æ–‡ä»¶</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> cd gateway-service/src/main/resources/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/gateway-service/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> cp application-fat.yml application-prod.yml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.ç¨‹åºä½¿ç”¨prodçš„é…ç½®æ–‡ä»¶è¿è¡Œ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/gateway-service/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> cat application.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">server:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">port:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">spring:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">profiles:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">active:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">prod</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">application:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">@artifactId@</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">3.é…ç½®ç¨‹åºé…ç½®æ–‡ä»¶</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/gateway-service/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim application-prod.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Â·Â·Â·Â·Â·Â·</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">instance:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">prefer-ip-address:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">client:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">register-with-eureka:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">fetch-registry:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">service-url:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">defaultZone:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">http://eureka-0.eureka-service:8080/eureka/</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#809191;--1:#616671">#ä¿®æ”¹eurekaåœ°å€</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.åˆ›å»ºä¸€ä¸ªprodçš„é…ç½®æ–‡ä»¶[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1]\# cd gateway-service/src/main/resources/[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/gateway-service/src/main/resources]\# cp application-fat.yml application-prod.yml2.ç¨‹åºä½¿ç”¨prodçš„é…ç½®æ–‡ä»¶è¿è¡Œ[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/gateway-service/src/main/resources]\# cat application.ymlserver:  port: 8080spring:  profiles:    active: prod  application:    name: @artifactId@3.é…ç½®ç¨‹åºé…ç½®æ–‡ä»¶[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/gateway-service/src/main/resources]\# vim application-prod.ymlÂ·Â·Â·Â·Â·Â·eureka:  instance:    prefer-ip-address: true  client:    register-with-eureka: true    fetch-registry: true    service-url:      defaultZone: http://eureka-0.eureka-service:8080/eureka/      #ä¿®æ”¹eurekaåœ°å€"><div></div></button></div></figure></div>
<p><strong>3.order-serviceé…ç½®æ–‡ä»¶</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.åˆ›å»ºä¸€ä¸ªprodçš„é…ç½®æ–‡ä»¶</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> cd order-service/order-service-biz/src/main/resources/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/order-service/order-service-biz/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> cp application-fat.yml application-prod.yml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.ç¨‹åºä½¿ç”¨prodçš„é…ç½®æ–‡ä»¶è¿è¡Œ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/order-service/order-service-biz/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim application.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">server:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">port:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">spring:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">profiles:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">active:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">prod</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">application:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">order-service</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">3.é…ç½®ç¨‹åºé…ç½®æ–‡ä»¶</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/order-service/order-service-biz/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim application-prod.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">spring:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">datasource:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">url:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">jdbc:mysql://192.168.20.11:3306/tb_order?characterEncoding=utf-8</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#809191;--1:#616671">#mysqlæ•°æ®åº“åœ°å€</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">username:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">root</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">password:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">123456</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">driver-class-name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">com.mysql.jdbc.Driver</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">instance:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">prefer-ip-address:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">client:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">register-with-eureka:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">fetch-registry:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">service-url:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">defaultZone:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">http://eureka-0.eureka-service:8080/eureka/</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#809191;--1:#616671">#eurekaåœ°å€</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.åˆ›å»ºä¸€ä¸ªprodçš„é…ç½®æ–‡ä»¶[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1]\# cd order-service/order-service-biz/src/main/resources/[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/order-service/order-service-biz/src/main/resources]\# cp application-fat.yml application-prod.yml2.ç¨‹åºä½¿ç”¨prodçš„é…ç½®æ–‡ä»¶è¿è¡Œ[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/order-service/order-service-biz/src/main/resources]\# vim application.ymlserver:  port: 8080spring:  profiles:    active: prod  application:    name: order-service3.é…ç½®ç¨‹åºé…ç½®æ–‡ä»¶[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/order-service/order-service-biz/src/main/resources]\# vim application-prod.ymlspring:  datasource:    url: jdbc:mysql://192.168.20.11:3306/tb_order?characterEncoding=utf-8     #mysqlæ•°æ®åº“åœ°å€    username: root    password: 123456    driver-class-name: com.mysql.jdbc.Drivereureka:  instance:    prefer-ip-address: true  client:    register-with-eureka: true    fetch-registry: true    service-url:      defaultZone: http://eureka-0.eureka-service:8080/eureka/      #eurekaåœ°å€"><div></div></button></div></figure></div>
<p><strong>5.product-serviceé…ç½®æ–‡ä»¶</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.åˆ›å»ºä¸€ä¸ªprodçš„é…ç½®æ–‡ä»¶</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> cd product-service/product-service-biz/src/main/resources/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/product-service/product-service-biz/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> cp application-fat.yml application-prod.yml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.ç¨‹åºä½¿ç”¨prodçš„é…ç½®æ–‡ä»¶è¿è¡Œ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/product-service/product-service-biz/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim application.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">server:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">port:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">spring:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">profiles:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">active:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">prod</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">application:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">product-service</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">3.é…ç½®ç¨‹åºé…ç½®æ–‡ä»¶</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/product-service/product-service-biz/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim application-prod.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">spring:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">datasource:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">url:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">jdbc:mysql://192.168.20.11:3306/tb_product?characterEncoding=utf-8</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#809191;--1:#616671">#æ•°æ®åº“åœ°å€</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">username:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">root</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">password:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">123456</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">driver-class-name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">com.mysql.jdbc.Driver</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">instance:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">prefer-ip-address:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">client:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">register-with-eureka:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">fetch-registry:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">service-url:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">defaultZone:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">http://eureka-0.eureka-service:8080/eureka/</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#809191;--1:#616671">#eurekaåœ°å€</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.åˆ›å»ºä¸€ä¸ªprodçš„é…ç½®æ–‡ä»¶[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1]\# cd product-service/product-service-biz/src/main/resources/[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/product-service/product-service-biz/src/main/resources]\# cp application-fat.yml application-prod.yml2.ç¨‹åºä½¿ç”¨prodçš„é…ç½®æ–‡ä»¶è¿è¡Œ[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/product-service/product-service-biz/src/main/resources]\# vim application.ymlserver:  port: 8080spring:  profiles:    active: prod  application:    name: product-service3.é…ç½®ç¨‹åºé…ç½®æ–‡ä»¶[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/product-service/product-service-biz/src/main/resources]\# vim application-prod.ymlspring:  datasource:    url: jdbc:mysql://192.168.20.11:3306/tb_product?characterEncoding=utf-8     #æ•°æ®åº“åœ°å€    username: root    password: 123456    driver-class-name: com.mysql.jdbc.Drivereureka:  instance:    prefer-ip-address: true  client:    register-with-eureka: true    fetch-registry: true    service-url:      defaultZone: http://eureka-0.eureka-service:8080/eureka/      #eurekaåœ°å€"><div></div></button></div></figure></div>
<p><strong>6.stock-serviceé…ç½®æ–‡ä»¶</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.åˆ›å»ºä¸€ä¸ªprodçš„é…ç½®æ–‡ä»¶</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> cd stock-service/stock-service-biz/src/main/resources/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/stock-service/stock-service-biz/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> cp application-fat.yml application-prod.yml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.ç¨‹åºä½¿ç”¨prodçš„é…ç½®æ–‡ä»¶è¿è¡Œ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/stock-service/stock-service-biz/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim application.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">server:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">port:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">spring:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">profiles:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">active:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">prod</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">application:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stock-service</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">3.é…ç½®ç¨‹åºé…ç½®æ–‡ä»¶</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/stock-service/stock-service-biz/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim application-prod.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">spring:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">datasource:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">url:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">jdbc:mysql://192.168.20.11:3306/tb_stock?characterEncoding=utf-8</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#809191;--1:#616671">#æ•°æ®åº“åœ°å€</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">username:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">root</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">password:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">123456</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">driver-class-name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">com.mysql.jdbc.Driver</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">instance:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">prefer-ip-address:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">client:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">register-with-eureka:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">fetch-registry:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">service-url:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">defaultZone:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">http://eureka-service.eureka:8080/eureka/</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#809191;--1:#616671">#eurekaåœ°å€</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.åˆ›å»ºä¸€ä¸ªprodçš„é…ç½®æ–‡ä»¶[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1]\# cd stock-service/stock-service-biz/src/main/resources/[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/stock-service/stock-service-biz/src/main/resources]\# cp application-fat.yml application-prod.yml2.ç¨‹åºä½¿ç”¨prodçš„é…ç½®æ–‡ä»¶è¿è¡Œ[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/stock-service/stock-service-biz/src/main/resources]\# vim application.ymlserver:  port: 8080spring:  profiles:    active: prod  application:    name: stock-service3.é…ç½®ç¨‹åºé…ç½®æ–‡ä»¶[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/stock-service/stock-service-biz/src/main/resources]\# vim application-prod.ymlspring:  datasource:    url: jdbc:mysql://192.168.20.11:3306/tb_stock?characterEncoding=utf-8   #æ•°æ®åº“åœ°å€    username: root    password: 123456    driver-class-name: com.mysql.jdbc.Drivereureka:  instance:    prefer-ip-address: true  client:    register-with-eureka: true    fetch-registry: true    service-url:      defaultZone: http://eureka-service.eureka:8080/eureka/      #eurekaåœ°å€"><div></div></button></div></figure></div>
<p><strong>4.portal-serviceé…ç½®æ–‡ä»¶</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.åˆ›å»ºä¸€ä¸ªprodçš„é…ç½®æ–‡ä»¶</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> cd portal-service/src/main/resources/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/portal-service/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> cp application-fat.yml application-prod.yml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.ç¨‹åºä½¿ç”¨prodçš„é…ç½®æ–‡ä»¶è¿è¡Œ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/portal-service/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim application.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">server:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">port:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">undertow:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">io-threads:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">16</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">worker-threads:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">256</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">buffer-size:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1024</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">direct-buffers:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">spring:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">application:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">portal-service</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">profiles:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">active:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">prod</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">3.é…ç½®ç¨‹åºé…ç½®æ–‡ä»¶</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/portal-service/src/main/resources]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim application-prod.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">instance:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">prefer-ip-address:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">client:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">service-url:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">defaultZone:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">http://eureka-0.eureka-service:8080/eureka/</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#809191;--1:#616671">#æŒ‡å®šeurekaåœ°å€</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">register-with-eureka:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">fetch-registry:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Â·Â·Â·Â·Â·Â·</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.åˆ›å»ºä¸€ä¸ªprodçš„é…ç½®æ–‡ä»¶[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1]\# cd portal-service/src/main/resources/[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/portal-service/src/main/resources]\# cp application-fat.yml application-prod.yml2.ç¨‹åºä½¿ç”¨prodçš„é…ç½®æ–‡ä»¶è¿è¡Œ[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/portal-service/src/main/resources]\# vim application.ymlserver:  port: 8080  undertow:    io-threads: 16    worker-threads: 256    buffer-size: 1024    direct-buffers: truespring:  application:    name: portal-service  profiles:    active: prod3.é…ç½®ç¨‹åºé…ç½®æ–‡ä»¶[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/portal-service/src/main/resources]\# vim application-prod.ymleureka:  instance:    prefer-ip-address: true  client:    service-url:      defaultZone: http://eureka-0.eureka-service:8080/eureka/      #æŒ‡å®šeurekaåœ°å€    register-with-eureka: true    fetch-registry: trueÂ·Â·Â·Â·Â·Â·"><div></div></button></div></figure></div>
<h4 id="332è°ƒæ•´æ¯ä¸ªå¾®æœåŠ¡çš„pomæ–‡ä»¶å¢åŠ prodç¯å¢ƒ">3.3.2.è°ƒæ•´æ¯ä¸ªå¾®æœåŠ¡çš„pomæ–‡ä»¶å¢åŠ prodç¯å¢ƒ</h4>
<p>ç”±äºæˆ‘ä»¬æ–°åŠ äº†ä¸€ä¸ªprodçº¿ä¸Šç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œå› æ­¤ä¹Ÿéœ€è¦åœ¨pom.xmlä¸­é…ç½®ï¼Œé…ç½®å®Œæˆåå¯ä»¥ç¼–è¯‘ä¸€ä¸‹ï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥åšæˆå¯éƒ¨ç½²çš„ç¨‹åºåŒ…</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.å®‰è£…maven</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> yum -y install java-1.8.0-openjdk maven</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.è°ƒæ•´pom.xmlå¢åŠ prodç¯å¢ƒé…ç½®</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 simple-microservice-dev1]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim pom.xml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Â·Â·Â·Â·Â·Â·</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#809191;--1:#616671">#65è¡Œå·¦å³</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">&#x3C;profile></span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">&#x3C;id>prod&#x3C;/id></span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">&#x3C;properties></span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3C63B3">&#x3C;profileActive>prod&#x3C;/profileActive></span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">&#x3C;/properties></span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">&#x3C;/profile></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">&#x3C;/profiles></span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Â·Â·Â·Â·Â·Â·</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.ç¼–è¯‘ç¨‹åº</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> mvn clean package -D maven.test.skip=true -P prod</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">3.æŸ¥çœ‹ç¼–è¯‘æˆåŠŸçš„waråŒ…</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> find </span><span style="--0:#C5E478;--1:#3C63B3">.</span><span style="--0:#D6DEEB;--1:#403F53"> -name </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">*.jar</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./basic-common/basic-common-core/target/basic-common-core.jar</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./eureka-service/target/eureka-service.jar</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./gateway-service/target/gateway-service.jar</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./order-service/order-service-api/target/order-service-api.jar</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./order-service/order-service-biz/target/order-service-biz.jar</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./portal-service/target/portal-service.jar</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./product-service/product-service-api/target/product-service-api.jar</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./product-service/product-service-biz/target/product-service-biz.jar</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./stock-service/stock-service-api/target/stock-service-api.jar</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">./stock-service/stock-service-biz/target/stock-service-biz.jar</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.å®‰è£…maven[root@binary-k8s-master1 ~]\# yum -y install java-1.8.0-openjdk maven2.è°ƒæ•´pom.xmlå¢åŠ prodç¯å¢ƒé…ç½®[root@binary-k8s-master1 simple-microservice-dev1]\# vim pom.xmlÂ·Â·Â·Â·Â·Â·      #65è¡Œå·¦å³    <profile>      <id>prod</id>      <properties>        <profileActive>prod</profileActive>      </properties>    </profile>  </profiles>Â·Â·Â·Â·Â·Â·2.ç¼–è¯‘ç¨‹åº[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1]\# mvn clean package -D maven.test.skip=true -P prod3.æŸ¥çœ‹ç¼–è¯‘æˆåŠŸçš„waråŒ…[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1]\# find . -name &#x22;*.jar&#x22;./basic-common/basic-common-core/target/basic-common-core.jar./eureka-service/target/eureka-service.jar./gateway-service/target/gateway-service.jar./order-service/order-service-api/target/order-service-api.jar./order-service/order-service-biz/target/order-service-biz.jar./portal-service/target/portal-service.jar./product-service/product-service-api/target/product-service-api.jar./product-service/product-service-biz/target/product-service-biz.jar./stock-service/stock-service-api/target/stock-service-api.jar./stock-service/stock-service-biz/target/stock-service-biz.jar"><div></div></button></div></figure></div>
<h3 id="34åˆ¶ä½œå¾®æœåŠ¡ç¨‹åºæ‰€ä½¿ç”¨çš„çš„åº•å±‚ç³»ç»Ÿé•œåƒ">3.4.åˆ¶ä½œå¾®æœåŠ¡ç¨‹åºæ‰€ä½¿ç”¨çš„çš„åº•å±‚ç³»ç»Ÿé•œåƒ</h3>
<h4 id="341ä¸ºç¨‹åºç¯å¢ƒæ„å»ºåº•å±‚ç³»ç»Ÿé•œåƒ">3.4.1.ä¸ºç¨‹åºç¯å¢ƒæ„å»ºåº•å±‚ç³»ç»Ÿé•œåƒ</h4>
<p>ç”±äºæ˜¯SpringCloudå¾®æœåŠ¡ç³»ç»Ÿï¼ŒSpringCloudå±äºJAVAè¯­è¨€å¼€å‘çš„é¡¹ç›®ï¼Œå› æ­¤è¦æœ‰JAVAå¯åŠ¨ç¯å¢ƒã€‚</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.æ‹‰å–centos7.5ä½œä¸ºåº•å±‚å®¹å™¨</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> docker pull centos:7.5.1804</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.å¯åŠ¨å®¹å™¨</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> docker run -itd centos:7.5.1804</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">3.è¿›å…¥ç³»ç»Ÿå®¹å™¨è¿›è¡Œç¯å¢ƒé…ç½®</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> docker exec -it 462237f9a0a bash</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#å®‰è£…javaç¯å¢ƒ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@2fcfb51f04e0 /]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> yum -y install java-1.8.0-openjdk net-tools</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@2fcfb51f04e0 /]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> java  -version</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">openjdk</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">version</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">1.8.0_302</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">OpenJDK</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">Runtime</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">Environment</span><span style="--0:#D6DEEB;--1:#403F53"> (build </span><span style="--0:#F78C6C;--1:#AA0982">1.8</span><span style="--0:#ECC48D;--1:#3C63B3">.0_302-b08</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">OpenJDK</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">64</span><span style="--0:#ECC48D;--1:#3C63B3">-Bit</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">Server</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">VM</span><span style="--0:#D6DEEB;--1:#403F53"> (build </span><span style="--0:#F78C6C;--1:#AA0982">25.302</span><span style="--0:#ECC48D;--1:#3C63B3">-b08,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">mixed</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">mode</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@2fcfb51f04e0 /]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> mkdir /data/simple-microservice -p</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#è°ƒæ•´ç³»ç»Ÿæ—¶åŒº</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@2fcfb51f04e0 /]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> yum -y intall tzdata</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@2fcfb51f04e0 /]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">4.å°†å®¹å™¨æäº¤ä¸ºé•œåƒ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> docker commit 2fcfb51f04e0 centos-java:v1</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">5.é…ç½®Harboré•œåƒä»“åº“</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim /etc/docker/daemon.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"registry-mirrors"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">https://9wn5tbfh.mirror.aliyuncs.com</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">],</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">"insecure-registries"</span><span style="--0:#C5E478;--1:#3C63B3">:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">192.168.20.10</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> systemctl restart docker</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">6.æäº¤é•œåƒåˆ°Harborä»“åº“</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> docker login -u admin -p Harbor12345 192.168.20.10</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> docker tag centos-java:v1 192.168.20.11/base/centos-java:v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> docker push 192.168.20.11/base/centos-java:v1</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.æ‹‰å–centos7.5ä½œä¸ºåº•å±‚å®¹å™¨[root@binary-k8s-master1 ~]\# docker pull centos:7.5.18042.å¯åŠ¨å®¹å™¨[root@binary-k8s-master1 ~]\# docker run -itd centos:7.5.18043.è¿›å…¥ç³»ç»Ÿå®¹å™¨è¿›è¡Œç¯å¢ƒé…ç½®[root@binary-k8s-master1 ~]\# docker exec -it 462237f9a0a bash[root@2fcfb51f04e0 /]\# yum -y install java-1.8.0-openjdk net-tools[root@2fcfb51f04e0 /]\# java  -versionopenjdk version &#x22;1.8.0_302&#x22;OpenJDK Runtime Environment (build 1.8.0_302-b08)OpenJDK 64-Bit Server VM (build 25.302-b08, mixed mode)[root@2fcfb51f04e0 /]\# mkdir /data/simple-microservice -p[root@2fcfb51f04e0 /]\# yum -y intall tzdata[root@2fcfb51f04e0 /]\# ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime4.å°†å®¹å™¨æäº¤ä¸ºé•œåƒ[root@binary-k8s-master1 ~]\# docker commit 2fcfb51f04e0 centos-java:v15.é…ç½®Harboré•œåƒä»“åº“[root@binary-k8s-master1 ~]\# vim /etc/docker/daemon.json{  &#x22;registry-mirrors&#x22;: [&#x22;https://9wn5tbfh.mirror.aliyuncs.com&#x22;],  &#x22;insecure-registries&#x22;: [&#x22;192.168.20.10&#x22;]}[root@binary-k8s-master1 ~]\# systemctl restart docker6.æäº¤é•œåƒåˆ°Harborä»“åº“[root@binary-k8s-master1 ~]\# docker login -u admin -p Harbor12345 192.168.20.10[root@binary-k8s-master1 ~]\# docker tag centos-java:v1 192.168.20.11/base/centos-java:v1[root@binary-k8s-master1 ~]\# docker push 192.168.20.11/base/centos-java:v1"><div></div></button></div></figure></div>
<h4 id="342ä¸ºæ¯ä¸ªå¾®æœåŠ¡ç¨‹åºç¼–å†™dockerfile">3.4.2.ä¸ºæ¯ä¸ªå¾®æœåŠ¡ç¨‹åºç¼–å†™Dockerfile</h4>
<p><strong>è®¾è®¡æ¦‚å¿µï¼š</strong></p>
<p>é‡‡ç”¨3.3.1ä¸­åˆ¶ä½œçš„åº•å±‚é•œåƒ</p>
<p>ç¬¬ä¸€æ­¥ï¼šåœ¨é•œåƒé‡Œé¢åˆ›å»º<code dir="auto">/data/simple-microservice/å¾®æœåŠ¡åç§°</code>è¿™æ ·çš„ç›®å½•ç”¨äºå­˜æ”¾ç¨‹åºçš„jaråŒ…</p>
<p>ç¬¬äºŒæ­¥ï¼šå°†ç¨‹åºçš„jaråŒ…æ‹·è´è‡³é•œåƒä¸­</p>
<p>ç¬¬ä¸‰æ­¥ï¼šç”Ÿæˆä¸€ä¸ªå¯åŠ¨è„šæœ¬ï¼Œç”±äºæœåŠ¡åç§°éƒ½ä¸ä¸€æ ·ä¹Ÿå°±æ˜¯æ¯ä¸ªç¨‹åºçš„è·¯å¾„éƒ½ä¸åŒï¼Œæƒ³è¦åšåˆ°ä¸€ä¸ªåº•å±‚é•œåƒå¤šä¸ªç¨‹åºå¤ç”¨ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨å¯åŠ¨è„šæœ¬é‡Œæ‰‹åŠ¨æŒ‡å®šç¨‹åºçš„è·¯å¾„ï¼Œåœ¨è„šæœ¬ä¸­æŒ‡å®šç¨‹åºçš„éƒ¨ç½²è·¯å¾„ä»¥åŠæ—¥å¿—è·¯å¾„</p>
<p>ç¬¬å››æ­¥ï¼šæš´éœ²8080ç«¯å£</p>
<p>å°†Dockerfileæ”¾åˆ°ç¨‹åºç¼–è¯‘çš„ç›®å½•ä¹Ÿå°±æ˜¯ä¸srcåœ¨åŒä¸€ç›®å½•</p>
<p><strong>1.eureka-serviceæœåŠ¡</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">åœ¨4.2.2.ä¼šå†™</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="åœ¨4.2.2.ä¼šå†™"><div></div></button></div></figure></div>
<p><strong>2.gateway-serviceæœåŠ¡</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/gateway-service]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim Dockerfile</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">FROM</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">192.168</span><span style="--0:#ECC48D;--1:#3C63B3">.20.11/base/centos-java:v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">RUN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/simple-microservice/gateway-service</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-p</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">COPY</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">./target/gateway-service.jar</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/simple-microservice/gateway-service/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">RUN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">echo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-e</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">#!/bin/bash \njava -jar /data/simple-microservice/gateway-service/gateway-service.jar > /data/simple-microservice/gateway-service/gateway-service.log &#x26; \ntail -f /data/simple-microservice/gateway-service/gateway-service.log</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span><span style="--0:#D6DEEB;--1:#403F53"> &#x26;&#x26; </span><span style="--0:#82AAFF;--1:#3C63B3">chmod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">a+x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">EXPOSE</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">ENTRYPOINT</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/gateway-service]\# vim DockerfileFROM 192.168.20.11/base/centos-java:v1RUN mkdir /data/simple-microservice/gateway-service -pCOPY ./target/gateway-service.jar /data/simple-microservice/gateway-service/RUN echo -e &#x22;#!/bin/bash \njava -jar /data/simple-microservice/gateway-service/gateway-service.jar > /data/simple-microservice/gateway-service/gateway-service.log &#x26; \ntail -f /data/simple-microservice/gateway-service/gateway-service.log&#x22; > /data/entrypoint.sh &#x26;&#x26; chmod a+x /data/entrypoint.shEXPOSE 8080ENTRYPOINT /data/entrypoint.sh"><div></div></button></div></figure></div>
<p><strong>3.order-serviceæœåŠ¡</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/order-service/order-service-biz]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim Dockerfile</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">FROM</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">192.168</span><span style="--0:#ECC48D;--1:#3C63B3">.20.11/base/centos-java:v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">RUN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/simple-microservice/order-service</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-p</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">COPY</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">./target/order-service-biz.jar</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/simple-microservice/order-service/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">RUN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">echo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-e</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">#!/bin/bash \njava -jar /data/simple-microservice/order-service/order-service-biz.jar > /data/simple-microservice/order-service/order-service-biz.log &#x26; \ntail -f /data/simple-microservice/order-service/order-service-biz.log</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span><span style="--0:#D6DEEB;--1:#403F53"> &#x26;&#x26; </span><span style="--0:#82AAFF;--1:#3C63B3">chmod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">a+x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">EXPOSE</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">ENTRYPOINT</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/order-service/order-service-biz]\# vim DockerfileFROM 192.168.20.11/base/centos-java:v1RUN mkdir /data/simple-microservice/order-service -pCOPY ./target/order-service-biz.jar /data/simple-microservice/order-service/RUN echo -e &#x22;#!/bin/bash \njava -jar /data/simple-microservice/order-service/order-service-biz.jar > /data/simple-microservice/order-service/order-service-biz.log &#x26; \ntail -f /data/simple-microservice/order-service/order-service-biz.log&#x22; > /data/entrypoint.sh &#x26;&#x26; chmod a+x /data/entrypoint.shEXPOSE 8080ENTRYPOINT /data/entrypoint.sh"><div></div></button></div></figure></div>
<p><strong>4.portal-serviceæœåŠ¡</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/portal-service]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim Dockerfile</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">FROM</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">192.168</span><span style="--0:#ECC48D;--1:#3C63B3">.20.11/base/centos-java:v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">RUN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/simple-microservice/portal-service</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-p</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">COPY</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">./target/portal-service.jar</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/simple-microservice/portal-service/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">RUN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">echo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-e</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">#!/bin/bash \njava -jar /data/simple-microservice/portal-service/portal-service.jar > /data/simple-microservice/portal-service/portal-service.log &#x26; \ntail -f /data/simple-microservice/portal-service/portal-service.log</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span><span style="--0:#D6DEEB;--1:#403F53"> &#x26;&#x26; </span><span style="--0:#82AAFF;--1:#3C63B3">chmod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">a+x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">EXPOSE</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">ENTRYPOINT</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/portal-service]\# vim DockerfileFROM 192.168.20.11/base/centos-java:v1RUN mkdir /data/simple-microservice/portal-service -pCOPY ./target/portal-service.jar /data/simple-microservice/portal-service/RUN echo -e &#x22;#!/bin/bash \njava -jar /data/simple-microservice/portal-service/portal-service.jar > /data/simple-microservice/portal-service/portal-service.log &#x26; \ntail -f /data/simple-microservice/portal-service/portal-service.log&#x22; > /data/entrypoint.sh &#x26;&#x26; chmod a+x /data/entrypoint.shEXPOSE 8080ENTRYPOINT /data/entrypoint.sh"><div></div></button></div></figure></div>
<p><strong>5.product-serviceæœåŠ¡</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/product-service/product-service-biz]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim Dockerfile</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">FROM</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">192.168</span><span style="--0:#ECC48D;--1:#3C63B3">.20.11/base/centos-java:v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">RUN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/simple-microservice/product-service</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-p</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">COPY</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">./target/product-service-biz.jar</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/simple-microservice/product-service/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">RUN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">echo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-e</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">#!/bin/bash \njava -jar /data/simple-microservice/product-service/product-service-biz.jar > /data/simple-microservice/product-service/product-service-biz.log &#x26; \ntail -f /data/simple-microservice/product-service/product-service-biz.log</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span><span style="--0:#D6DEEB;--1:#403F53"> &#x26;&#x26; </span><span style="--0:#82AAFF;--1:#3C63B3">chmod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">a+x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">EXPOSE</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">ENTRYPOINT</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/product-service/product-service-biz]\# vim DockerfileFROM 192.168.20.11/base/centos-java:v1RUN mkdir /data/simple-microservice/product-service -pCOPY ./target/product-service-biz.jar /data/simple-microservice/product-service/RUN echo -e &#x22;#!/bin/bash \njava -jar /data/simple-microservice/product-service/product-service-biz.jar > /data/simple-microservice/product-service/product-service-biz.log &#x26; \ntail -f /data/simple-microservice/product-service/product-service-biz.log&#x22; > /data/entrypoint.sh &#x26;&#x26; chmod a+x /data/entrypoint.shEXPOSE 8080ENTRYPOINT /data/entrypoint.sh"><div></div></button></div></figure></div>
<p><strong>6.stock-serviceæœåŠ¡</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/simple-microservice-dev1/stock-service/stock-service-biz]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> cat Dockerfile</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">FROM</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">192.168</span><span style="--0:#ECC48D;--1:#3C63B3">.20.11/base/centos-java:v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">RUN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/simple-microservice/stock-service</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-p</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">COPY</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">./target/stock-service-biz.jar</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/simple-microservice/stock-service/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">RUN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">echo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-e</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">#!/bin/bash \njava -jar /data/simple-microservice/stock-service/stock-service-biz.jar > /data/simple-microservice/stock-service/stock-service-biz.log &#x26; \ntail -f /data/simple-microservice/stock-service/stock-service-biz.log</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span><span style="--0:#D6DEEB;--1:#403F53"> &#x26;&#x26; </span><span style="--0:#82AAFF;--1:#3C63B3">chmod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">a+x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">EXPOSE</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">ENTRYPOINT</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 ~/springcloud/simple-microservice-dev1/stock-service/stock-service-biz]\# cat DockerfileFROM 192.168.20.11/base/centos-java:v1RUN mkdir /data/simple-microservice/stock-service -pCOPY ./target/stock-service-biz.jar /data/simple-microservice/stock-service/RUN echo -e &#x22;#!/bin/bash \njava -jar /data/simple-microservice/stock-service/stock-service-biz.jar > /data/simple-microservice/stock-service/stock-service-biz.log &#x26; \ntail -f /data/simple-microservice/stock-service/stock-service-biz.log&#x22; > /data/entrypoint.sh &#x26;&#x26; chmod a+x /data/entrypoint.shEXPOSE 8080ENTRYPOINT /data/entrypoint.sh"><div></div></button></div></figure></div>
<h3 id="35è°ƒæ•´protalå¾®æœåŠ¡ä¸­è¿æ¥gatewayç½‘å…³çš„åœ°å€">3.5.è°ƒæ•´Protalå¾®æœåŠ¡ä¸­è¿æ¥Gatewayç½‘å…³çš„åœ°å€</h3>
<p>Protalæ˜¯æˆ‘ä»¬ç”µå•†å¹³å°çš„é—¨æˆ·ç½‘ç«™ï¼Œä¹Ÿå°±æ˜¯å‰ç«¯é¦–é¡µï¼Œåœ¨Protalå¾®æœåŠ¡ä¸­ä¼šå¡«å†™å¥½å…¶ä»–å¾®æœåŠ¡ç¨‹åºçš„åœ°å€ï¼ŒGatewayç½‘å…³ç¨‹åºçš„åœ°å€å°±æ˜¯å†™æ­»åœ¨Protalé¡¹ç›®çš„jsé‡Œï¼Œåœ¨æˆ‘ä»¬å®šä¹‰å¥½Gatewayç½‘å…³æœåŠ¡çš„åŸŸååï¼Œå°±è¦å°†åŸŸåå†™å…¥åˆ°å¯¹åº”çš„jsæ–‡ä»¶é‡Œï¼Œå¦åˆ™å½“é¡¹ç›®å¯åŠ¨ä¹‹åæ˜¯æ— æ³•è°ƒé€šçš„ã€‚</p>
<p>éœ€è¦ä¿®æ”¹ä¸‹åˆ—è¿™å››ä¸ªæ–‡ä»¶</p>
<p>portal-service/src/main/resources/static/js/orderList.js</p>
<p>portal-service/src/main/resources/static/js/productList.js
<img src="https://cdn.agou-ops.cn/others/d0e207db0cb54e6296ca185728e5ed1c.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">æ‰“å¼€è¿™å››ä¸ªæ–‡ä»¶ï¼Œå°†é‡Œé¢çš„gateway.ctnrs.comåŸŸåä¿®æ”¹ä¸ºgateway.jiangxl.comåŸŸå</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">vimä¿®æ”¹å‘½ä»¤ï¼š%s/gateway.ctnrs.com/gateway.jiangxl.com/g</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="æ‰“å¼€è¿™å››ä¸ªæ–‡ä»¶ï¼Œå°†é‡Œé¢çš„gateway.ctnrs.comåŸŸåä¿®æ”¹ä¸ºgateway.jiangxl.comåŸŸåvimä¿®æ”¹å‘½ä»¤ï¼š%s/gateway.ctnrs.com/gateway.jiangxl.com/g"><div></div></button></div></figure></div>
<h3 id="36éƒ¨ç½²ingressç”¨äºå°†å¾®æœåŠ¡ç¨‹åºå‘å¸ƒåˆ°äº’è”ç½‘">3.6.éƒ¨ç½²Ingressç”¨äºå°†å¾®æœåŠ¡ç¨‹åºå‘å¸ƒåˆ°äº’è”ç½‘</h3>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.ä¸‹è½½ingresséƒ¨ç½²çš„yamlæ–‡ä»¶</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> wget https://raw.githubusercontent.com/kubernetes/ingress-nginx/nginx-0.30.0/deploy/static/mandatory.yaml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> wget https://raw.githubusercontent.com/kubernetes/ingress-nginx/nginx-0.30.0/deploy/static/provider/baremetal/service-nodeport.yaml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.è°ƒæ•´ingress</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">nodeportç«¯å£</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/ingress]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim service-nodeport.yaml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Â·Â·Â·Â·Â·Â·</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">ports:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">http</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">port:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">80</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">targetPort:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">80</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">nodePort:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">80</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">protocol:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">TCP</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">name:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">port:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">443</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">targetPort:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">443</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">nodePort:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">443</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">protocol:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">TCP</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Â·Â·Â·Â·Â·Â·</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">3.éƒ¨ç½²ingress</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">/springcloud/ingress]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl apply -f mandatory.yaml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">4.æŸ¥çœ‹ingresséƒ¨ç½²çš„ç»“æœ</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get all -n ingress-nginx</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                                            </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">STATUS</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">RESTARTS</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/nginx-ingress-controller-766867958b-n7dwj</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">49</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                    </span><span style="--0:#ECC48D;--1:#3C63B3">TYPE</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#ECC48D;--1:#3C63B3">CLUSTER-IP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">EXTERNAL-IP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">PORT</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">S</span><span style="--0:#D6DEEB;--1:#403F53">)                 </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">service/ingress-nginx</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">NodePort</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">10.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.107</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#F78C6C;--1:#AA0982">80</span><span style="--0:#ECC48D;--1:#3C63B3">:80/TCP,443:443/TCP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">49</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                                       </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">UP-TO-DATE</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AVAILABLE</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">deployment.apps/nginx-ingress-controller</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">49</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                                                  </span><span style="--0:#ECC48D;--1:#3C63B3">DESIRED</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">CURRENT</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">replicaset.apps/nginx-ingress-controller-766867958b</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#F78C6C;--1:#AA0982">49</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.ä¸‹è½½ingresséƒ¨ç½²çš„yamlæ–‡ä»¶[root@binary-k8s-master1 ~]\# wget https://raw.githubusercontent.com/kubernetes/ingress-nginx/nginx-0.30.0/deploy/static/mandatory.yaml[root@binary-k8s-master1 ~]\# wget https://raw.githubusercontent.com/kubernetes/ingress-nginx/nginx-0.30.0/deploy/static/provider/baremetal/service-nodeport.yaml2.è°ƒæ•´ingress nodeportç«¯å£[root@binary-k8s-master1 ~/springcloud/ingress]\# vim service-nodeport.yamlÂ·Â·Â·Â·Â·Â·  ports:    - name: http      port: 80      targetPort: 80      nodePort: 80      protocol: TCP    - name: https      port: 443      targetPort: 443      nodePort: 443      protocol: TCPÂ·Â·Â·Â·Â·Â·3.éƒ¨ç½²ingress[root@binary-k8s-master1 ~/springcloud/ingress]\# kubectl apply -f mandatory.yaml4.æŸ¥çœ‹ingresséƒ¨ç½²çš„ç»“æœ[root@binary-k8s-master1 ~]\# kubectl get all -n ingress-nginxNAME                                            READY   STATUS    RESTARTS   AGEpod/nginx-ingress-controller-766867958b-n7dwj   1/1     Running   0          49mNAME                    TYPE       CLUSTER-IP   EXTERNAL-IP   PORT(S)                 AGEservice/ingress-nginx   NodePort   10.0.0.107   <none>        80:80/TCP,443:443/TCP   49mNAME                                       READY   UP-TO-DATE   AVAILABLE   AGEdeployment.apps/nginx-ingress-controller   1/1     1            1           49mNAME                                                  DESIRED   CURRENT   READY   AGEreplicaset.apps/nginx-ingress-controller-766867958b   1         1         1       49m"><div></div></button></div></figure></div>
<h2 id="4åœ¨kubernetesé›†ç¾¤éƒ¨ç½²simpleå¾®æœåŠ¡é¡¹ç›®">4.åœ¨kubernetesé›†ç¾¤éƒ¨ç½²simpleå¾®æœåŠ¡é¡¹ç›®</h2>
<p>simpleå¾®æœåŠ¡é¡¹ç›®åœ¨K8Sé›†ç¾¤ä¸­éƒ¨ç½²ï¼Œåªæœ‰eurekaæœåŠ¡é‡‡ç”¨statefulsetæ§åˆ¶å™¨éƒ¨ç½²ï¼Œå…¶ä½™æ‰€æœ‰å¾®æœåŠ¡å‡é‡‡ç”¨deploymentæ§åˆ¶å™¨éƒ¨ç½²ï¼Œæ‰€æœ‰çš„å¾®æœåŠ¡é€šè¿‡ingresså‘å¸ƒåœ¨äº’è”ç½‘ã€‚</p>
<p><strong>simpleå¾®æœåŠ¡ç”µå•†é¡¹ç›®åœ¨K8Sé›†ç¾¤éƒ¨ç½²æµç¨‹</strong></p>
<p>1ï¼‰éƒ¨ç½²simpleç”µå•†å¾®æœåŠ¡é¡¹ç›®çš„æ•°æ®åº“ç¯å¢ƒ</p>
<p>2ï¼‰åœ¨K8Sä¸­éƒ¨ç½²Eurekaæ³¨å†Œä¸­å¿ƒ</p>
<p>3ï¼‰ä¿®æ”¹æ¯ä¸ªå¾®æœåŠ¡çš„é…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®šeurekaæ³¨å†Œä¸­å¿ƒé›†ç¾¤çš„åœ°å€</p>
<p>4ï¼‰ä½¿ç”¨mavenå°†æ¯ä¸ªå¾®æœåŠ¡æ„å»ºæˆå¯éƒ¨ç½²çš„jaråŒ…</p>
<p>5ï¼‰éƒ¨ç½²Gatewayå…³æœåŠ¡</p>
<p>6ï¼‰éƒ¨ç½²protalã€orderã€productã€stockæœåŠ¡</p>
<h3 id="41éƒ¨ç½²simpleå¾®æœåŠ¡ç¨‹åºçš„mysqlæ•°æ®åº“ç¯å¢ƒ">4.1.éƒ¨ç½²simpleå¾®æœåŠ¡ç¨‹åºçš„mysqlæ•°æ®åº“ç¯å¢ƒ</h3>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.å®‰è£…MySQLæ•°æ®åº“</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@harbor-mysql </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> rpm -ivh http://repo.mysql.com/yum/mysql-5.6-community/el/7/x86_64/mysql-community-release-el7-5.noarch.rpm</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@harbor-mysql </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53">  yum install mysql-community-server</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.å¯åŠ¨MySQL</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@harbor-mysql </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> systemctl start mysqld</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@harbor-mysql </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> systemctl enable mysqld</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">3.è®¾ç½®æ•°æ®åº“å¯†ç </span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@harbor-mysql </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> mysqladmin -u root password </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">123456</span><span style="--0:#D9F5DD;--1:#111111">'</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">4.åˆ›å»ºorderï¼ˆè®¢å•ï¼‰ã€productï¼ˆå•†å“ï¼‰ã€stockï¼ˆåº“å­˜ï¼‰å¾®æœåŠ¡çš„æ•°æ®åº“</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@harbor-mysql </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> mysql -uroot -p123456</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mysql></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">create</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">database</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">tb_order</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Query</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">OK,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">row</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">affected</span><span style="--0:#D6DEEB;--1:#403F53"> (0.00 </span><span style="--0:#ECC48D;--1:#3C63B3">sec</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mysql></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">create</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">database</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">tb_product</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Query</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">OK,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">row</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">affected</span><span style="--0:#D6DEEB;--1:#403F53"> (0.01 </span><span style="--0:#ECC48D;--1:#3C63B3">sec</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mysql></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">create</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">database</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">tb_stock</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Query</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">OK,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">row</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">affected</span><span style="--0:#D6DEEB;--1:#403F53"> (0.00 </span><span style="--0:#ECC48D;--1:#3C63B3">sec</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">5.å¯¼å…¥æ•°æ®åº“æ•°æ®</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#å°†æ•°æ®åº“æ–‡ä»¶ä¼ åˆ°æ•°æ®åº“æœåŠ¡å™¨</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 simple-microservice-dev1]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> scp -r db root@192.168.20.11:/root</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#å¯¼å…¥orderæ•°æ®åº“çš„æ•°æ®</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mysql></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">use</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">tb_order</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mysql></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">source</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/root/db/order.sql</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#å¯¼å…¥productæ•°æ®åº“çš„æ•°æ®</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mysql></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">use</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">tb_product</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mysql></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">source</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/root/db/product.sql</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#å¯¼å…¥stockæ•°æ®åº“çš„æ•°æ®</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mysql></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">use</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">tb_stock</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mysql></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">source</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/root/db/stock.sql</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">6.å…è®¸æ•°æ®åº“è¿œç¨‹è®¿é—®</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">mysql></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">grant</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">all</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">privileges</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">on</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#ECC48D;--1:#3C63B3">.</span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">root</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#3C63B3">@</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">%</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">identified</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">by</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">123456</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">with</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">grant</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">option</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">Query</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">OK,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">rows</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">affected</span><span style="--0:#D6DEEB;--1:#403F53"> (0.00 </span><span style="--0:#ECC48D;--1:#3C63B3">sec</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.å®‰è£…MySQLæ•°æ®åº“[root@harbor-mysql ~]\# rpm -ivh http://repo.mysql.com/yum/mysql-5.6-community/el/7/x86_64/mysql-community-release-el7-5.noarch.rpm[root@harbor-mysql ~]\#  yum install mysql-community-server2.å¯åŠ¨MySQL[root@harbor-mysql ~]\# systemctl start mysqld[root@harbor-mysql ~]\# systemctl enable mysqld3.è®¾ç½®æ•°æ®åº“å¯†ç [root@harbor-mysql ~]\# mysqladmin -u root password &#x27;123456&#x27;4.åˆ›å»ºorderï¼ˆè®¢å•ï¼‰ã€productï¼ˆå•†å“ï¼‰ã€stockï¼ˆåº“å­˜ï¼‰å¾®æœåŠ¡çš„æ•°æ®åº“[root@harbor-mysql ~]\# mysql -uroot -p123456mysql> create database tb_order;Query OK, 1 row affected (0.00 sec)mysql> create database tb_product;Query OK, 1 row affected (0.01 sec)mysql> create database tb_stock;Query OK, 1 row affected (0.00 sec)5.å¯¼å…¥æ•°æ®åº“æ•°æ®[root@binary-k8s-master1 simple-microservice-dev1]\# scp -r db root@192.168.20.11:/rootmysql> use tb_ordermysql> source /root/db/order.sqlmysql> use tb_productmysql> source /root/db/product.sqlmysql> use tb_stock;mysql> source /root/db/stock.sql6.å…è®¸æ•°æ®åº“è¿œç¨‹è®¿é—®mysql> grant all privileges on *.* to &#x27;root&#x27;@&#x27;%&#x27; identified by &#x27;123456&#x27; with grant option;Query OK, 0 rows affected (0.00 sec)"><div></div></button></div></figure></div>
<h3 id="42éƒ¨ç½²eurekaå¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ">4.2.éƒ¨ç½²eurekaå¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ</h3>
<p>Eurekaåœ¨æ•´ä¸ªå¾®æœåŠ¡æ¶æ„ä¸­èµ·åˆ°è‡³å…³é‡è¦çš„çš„ä½œç”¨ï¼Œå¿…é¡»ä¿è¯EurekaæœåŠ¡é«˜å¯ç”¨ã€‚</p>
<p>EurekaæœåŠ¡é‡‡ç”¨statefulsetæœ‰çŠ¶æ€åº”ç”¨éƒ¨ç½²æ–¹å¼å†K8Sé›†ç¾¤ä¸­è¿›è¡Œéƒ¨ç½²ã€‚</p>
<p>Eurekaæœ¬èº«å°±å¯ä»¥åˆ©ç”¨è‡ªèº«çš„æœåŠ¡å‘ç°æ¥å®ç°é›†ç¾¤çš„é«˜å¯ç”¨ï¼Œåªéœ€è¦åœ¨Eurekaé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šå„ä¸ªEurekaèŠ‚ç‚¹çš„åœ°å€å°±å¯ä»¥å®ç°ã€‚</p>
<p>å°†ç¨‹åºéƒ¨ç½²åœ¨K8Sä¹‹åï¼Œå¦‚ä½•èƒ½å¤Ÿä¿è¯æ¯ä¸ªEureka Podçš„åœ°å€å”¯ä¸€ä¸å˜ï¼Œå°±éœ€è¦ç”¨åˆ°Statefulsetæ§åˆ¶å™¨é‡‡ç”¨æœ‰çŠ¶æ€çš„åº”ç”¨éƒ¨ç½²ï¼Œä½¿ç”¨Statefulsetæ§åˆ¶å™¨ä¹‹åï¼Œæ¯ä¸ªPodçš„åç§°éƒ½æ˜¯å”¯ä¸€ä¸å˜çš„ï¼Œå¹¶ä¸”æ¯ä¸ªPodéƒ½æœ‰ä¸€ä¸ªDNSæœåŠ¡å‘ç°åœ°å€ï¼Œé€šè¿‡è¿™ä¸ªDNSåœ°å€å°±å¯ä»¥è¯·æ±‚åˆ°Podä¸­çš„æœåŠ¡ï¼Œä¸»è¦æ˜¯corednsç»„ä»¶æ¥å®ç°çš„ï¼Œå› æ­¤é›†ç¾¤è¿˜éœ€è¦å®‰è£…æœ‰corednsæœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¯ä¸€ä¸ªEureka Podçš„DNSæœåŠ¡å‘ç°åœ°å€å†™å…¥åˆ°Eurekaçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªEurekaèŠ‚ç‚¹ç›¸äº’æ³¨å†Œï¼Œæœ€ç»ˆå½¢æˆé«˜å¯ç”¨é›†ç¾¤ã€‚</p>
<p>Statefulset+Headlesséƒ¨ç½²çš„ç¨‹åºDNSåæ ¼å¼ï¼š<code dir="auto">&#x3C;statefulsetName-index>.&#x3C;service-name>.&#x3C;namespace-name>.svc.cluster.local</code>åé¢çš„.svc.cluster.localå¯ä»¥å»æ‰ï¼ŒK8Sé»˜è®¤å°±æ˜¯.svc.cluster.localã€‚</p>
<p><code dir="auto">&#x3C;statefulsetName-index></code>å°±æ˜¯Podçš„åç§°ï¼Œ-indexæ˜¯æ¯ä¸€ä¸ªPodåç§°åé¢çš„æ•°å­—ç¼–å·ï¼ŒStatefulsetæ§åˆ¶å™¨éƒ¨ç½²å¥½çš„Podï¼Œä¼šåœ¨æ¯ä¸€ä¸ªPodåç§°åé¢åŠ ä¸Šä¸€ä¸ªæ•°å­—ç¼–å·ï¼Œä»0å¼€å§‹ï¼Œä¸€æ¬¡ç´¯åŠ ï¼Œä¿è¯æ‰€æœ‰çš„Podéƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„è®¿é—®å…¥å£</p>
<p><code dir="auto">&#x3C;service-name></code>æ˜¯ç¨‹åºçš„serviceèµ„æºçš„åç§°</p>
<p><code dir="auto">&#x3C;namespace-name></code>æ˜¯ç¨‹åºæ‰€åœ¨çš„namespaceåç§°</p>
<p>æˆ‘ä»¬çš„Eurekaè§„å®šçš„èŠ‚ç‚¹æ•°ä¸º3ä¸ªï¼Œä¹Ÿå°±æ˜¯æœ€ç»ˆstatefulsetä¼šå¯åŠ¨3ä¸ªPodå‰¯æœ¬ç»„æˆEurekaé›†ç¾¤ã€‚</p>
<h4 id="421ä¿®æ”¹eurekaé…ç½®æ–‡ä»¶å¢åŠ å„èŠ‚ç‚¹åœ°å€">4.2.1.ä¿®æ”¹Eurekaé…ç½®æ–‡ä»¶å¢åŠ å„èŠ‚ç‚¹åœ°å€</h4>
<p>Eurekaé›†ç¾¤èŠ‚ç‚¹æ¯ä¸ªPodå‰¯æœ¬æœåŠ¡å‘ç°åœ°å€å¦‚ä¸‹ï¼Œéœ€è¦å°†å…¶é…ç½®åœ¨eurekaä¸­</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">http://eureka-0.eureka-service.simple-ms`</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">`http://eureka-0.eureka-service.simple-ms`</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">`http://eureka-0.eureka-service.simple-ms</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="http://eureka-0.eureka-service.simple-ms&#x60;&#x60;http://eureka-0.eureka-service.simple-ms&#x60;&#x60;http://eureka-0.eureka-service.simple-ms"><div></div></button></div></figure></div>
<p>ä¿®æ”¹Eurekaçš„é…ç½®æ–‡ä»¶ï¼Œé‡‡ç”¨DnsæœåŠ¡å‘ç°åœ°å€çš„å½¢å¼å°†æ¯ä¸ªèŠ‚ç‚¹çš„åœ°å€éƒ½å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå½“Eurekaå¯åŠ¨ä¹‹åï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šç›¸äº’å‘ç°æœ€ç»ˆå½¢æˆé«˜å¯ç”¨é›†ç¾¤ã€‚</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.ä¿®æ”¹Eurekaé…ç½®æ–‡ä»¶ä¸­çš„èŠ‚ç‚¹åœ°å€</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 eureka-service]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim src/main/resources/application-prod.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">server:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">renewal-percent-threshold:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0.9</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">enable-self-preservation:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">false</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">eviction-interval-timer-in-simple-ms:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">40000</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">instance:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">hostname:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">127.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.1</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">prefer-ip-address:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">false</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3C63B3">client:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">register-with-eureka:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">serviceUrl:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3C63B3">defaultZone:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">http://eureka-0.eureka.simple-ms:</span><span style="--0:#D6DEEB;--1:#403F53">${</span><span style="--0:#C5E478;--1:#3C63B3">server</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#C5E478;--1:#3C63B3">port</span><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#ECC48D;--1:#3C63B3">/eureka/,http://eureka-1.eureka.simple-ms:</span><span style="--0:#D6DEEB;--1:#403F53">${</span><span style="--0:#C5E478;--1:#3C63B3">server</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#C5E478;--1:#3C63B3">port</span><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#ECC48D;--1:#3C63B3">/eureka/,http://eureka-2.eureka.simple-ms:</span><span style="--0:#D6DEEB;--1:#403F53">${</span><span style="--0:#C5E478;--1:#3C63B3">server</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#C5E478;--1:#3C63B3">port</span><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#ECC48D;--1:#3C63B3">/eureka/</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">fetch-registry:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">true</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.ä½¿ç”¨mavenå°†æœ€æ–°çš„Eurekaç¼–è¯‘</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 simple-microservice-dev1]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> mvn clean package -D maven.test.skip=true -P prod</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">æ³¨æ„ï¼šåªèƒ½åœ¨é¡¹ç›®æœ€å¤–å±‚çš„ç›®å½•ä¸­æ‰§è¡Œmvn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">clean</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">package</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.ä¿®æ”¹Eurekaé…ç½®æ–‡ä»¶ä¸­çš„èŠ‚ç‚¹åœ°å€[root@binary-k8s-master1 eureka-service]\# vim src/main/resources/application-prod.ymleureka:  server:    renewal-percent-threshold: 0.9    enable-self-preservation: false    eviction-interval-timer-in-simple-ms: 40000  instance:    hostname: 127.0.0.1    prefer-ip-address: false  client:    register-with-eureka: true    serviceUrl:      defaultZone: http://eureka-0.eureka.simple-ms:${server.port}/eureka/,http://eureka-1.eureka.simple-ms:${server.port}/eureka/,http://eureka-2.eureka.simple-ms:${server.port}/eureka/    fetch-registry: true2.ä½¿ç”¨mavenå°†æœ€æ–°çš„Eurekaç¼–è¯‘[root@binary-k8s-master1 simple-microservice-dev1]\# mvn clean package -D maven.test.skip=true -P prodæ³¨æ„ï¼šåªèƒ½åœ¨é¡¹ç›®æœ€å¤–å±‚çš„ç›®å½•ä¸­æ‰§è¡Œmvn clean package"><div></div></button></div></figure></div>
<h4 id="422è°ƒæ•´eurekaçš„dockerfile">4.2.2.è°ƒæ•´Eurekaçš„Dockerfile</h4>
<p>ç”±äºæˆ‘ä»¬åœ¨Eurekaé…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ˜¯ä»¥dnsåç§°æ¥äº’ç›¸å‘ç°å¯¹æ–¹ï¼Œå¹¶ä¸æ˜¯ä»¥IPåœ°å€å½¢å¼å‘ç°ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é…ç½®Dockerfileï¼Œåœ¨å¯åŠ¨ç¨‹åºæ—¶å°†é…ç½®æ–‡ä»¶ä¸­çš„hostnameå­—æ®µå€¼ä¿®æ”¹ä¸ºå½“å‰Podçš„dnsåç§°ã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬çš„Eurekaæ˜¯å¤šPodç»„æˆçš„é«˜å¯ç”¨é›†ç¾¤ï¼Œå› æ­¤ä¸èƒ½å°†dnsåç§°å†™æ­»åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä¸ç„¶æ¯ä¸ªPodéƒ½æ˜¯åŒæ ·çš„åœ°å€ï¼Œé›†ç¾¤æ˜¯ç»„ä»¶ä¸æˆåŠŸçš„ï¼Œæ‰€ä»¥å°±éœ€è¦åœ¨Dockerfileä¸­å®šä¹‰ç¨‹åºå¯åŠ¨å‘½ä»¤æ—¶ï¼Œå°†dnsåç§°åœ°å€è®¾ç½®æˆå˜é‡ï¼Œç”±Podèµ„æºå°†å˜é‡å€¼ä¼ å…¥åˆ°å¯åŠ¨å‘½ä»¤ä¸­ï¼Œç¨‹åºå¯åŠ¨æ—¶å°±ä¼šç”¨Podçš„dnsåç§°åœ°å€æ›¿æ¢æ‰é…ç½®æ–‡ä»¶ä¸­çš„IPåœ°å€ã€‚</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.ä¿®æ”¹DOckerfileæ–‡ä»¶å†…å®¹</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 eureka-service]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> vim Dockerfile</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">FROM</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">192.168</span><span style="--0:#ECC48D;--1:#3C63B3">.20.11/base/centos-java:v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">RUN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/simple-microservice/eureka-service</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-p</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">COPY</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">./target/eureka-service.jar</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/simple-microservice/eureka-service/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">RUN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">echo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-e</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">#!/bin/bash \njava -jar -Deureka.instance.hostname=${</span><span style="--0:#C5E478;--1:#3C63B3">MY_POD_NAME</span><span style="--0:#ECC48D;--1:#9B504E">}.eureka.simple-ms /data/simple-microservice/eureka-service/eureka-service.jar > /data/simple-microservice/eureka-service/eureka-service.log &#x26; \ntail -f /data/simple-microservice/eureka-service/eureka-service.log</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span><span style="--0:#D6DEEB;--1:#403F53"> &#x26;&#x26; </span><span style="--0:#82AAFF;--1:#3C63B3">chmod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">a+x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">EXPOSE</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">ENTRYPOINT</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/entrypoint.sh</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.ä¿®æ”¹DOckerfileæ–‡ä»¶å†…å®¹[root@binary-k8s-master1 eureka-service]\# vim DockerfileFROM 192.168.20.11/base/centos-java:v1RUN mkdir /data/simple-microservice/eureka-service -pCOPY ./target/eureka-service.jar /data/simple-microservice/eureka-service/RUN echo -e &#x22;#!/bin/bash \njava -jar -Deureka.instance.hostname=${MY_POD_NAME}.eureka.simple-ms /data/simple-microservice/eureka-service/eureka-service.jar > /data/simple-microservice/eureka-service/eureka-service.log &#x26; \ntail -f /data/simple-microservice/eureka-service/eureka-service.log&#x22; > /data/entrypoint.sh &#x26;&#x26; chmod a+x /data/entrypoint.shEXPOSE 8080ENTRYPOINT /data/entrypoint.sh"><div></div></button></div></figure></div>
<p>å¯åŠ¨å‘½ä»¤å•ç‹¬æ‹‰å‡ºæ¥çœ‹ä¸€ä¸‹ï¼Œ<code dir="auto">-Deureka.instance.hostname</code>è¿™ä¸ªå‚æ•°è¡¨ç¤ºä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­hostnameå‚æ•°çš„å€¼ï¼Œ<code dir="auto">${MY_POD_NAME}</code>è¿™ä¸ªå˜é‡ä½¿ä»deploymentèµ„æºæ–‡ä»¶ä¸­å®šä¹‰çš„envå˜é‡ï¼Œå°†Podçš„åç§°èµ‹ç»™MY_POD_NAMEå˜é‡ï¼Œæœ€åå¼•å…¥åˆ°å¯åŠ¨å‘½ä»¤ä¸­ï¼Œæœ€ååœ¨é…ç½®æ–‡ä»¶ä¸­hostnameå­—æ®µçš„å€¼åº”è¯¥æ˜¯<code dir="auto">eureka-0.eureka-service.simple-ms</code></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">java</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-jar</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--1:#3C63B3"><span style="--0:#82AAFF">-Deureka.instance.hostname=${</span><span style="--0:#C5E478">MY_POD_NAME</span><span style="--0:#82AAFF">}.eureka-service.simple-ms</span></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">/data/simple-microservice/eureka-service/eureka-service.jar</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="java -jar -Deureka.instance.hostname=${MY_POD_NAME}.eureka-service.simple-ms /data/simple-microservice/eureka-service/eureka-service.jar"><div></div></button></div></figure></div>
<h4 id="423æ„å»ºeurekaæœåŠ¡çš„dockeré•œåƒ">4.2.3.æ„å»ºEurekaæœåŠ¡çš„Dockeré•œåƒ</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 eureka-service]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> docker build -t  192.168.20.11/simple-microservice/eureka-service:v1 </span><span style="--0:#C5E478;--1:#3C63B3">.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 eureka-service]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> docker images </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">grep</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">eureka</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">192.168.20.11/simp-microservice/eureka-service</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#ECC48D;--1:#3C63B3">v1</span><span style="--0:#D6DEEB;--1:#403F53">                  </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">dc64fc9ba09</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#ECC48D;--1:#3C63B3">About</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">a</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">minute</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ago</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">800</span><span style="--0:#ECC48D;--1:#3C63B3">MB</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 eureka-service]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> docker push 192.168.20.11/simple-microservice/eureka-service:v1</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 eureka-service]\# docker build -t  192.168.20.11/simple-microservice/eureka-service:v1 .[root@binary-k8s-master1 eureka-service]\# docker images | grep eureka192.168.20.11/simp-microservice/eureka-service        v1                  1dc64fc9ba09        About a minute ago   800MB[root@binary-k8s-master1 eureka-service]\# docker push 192.168.20.11/simple-microservice/eureka-service:v1"><div></div></button></div></figure></div>
<h4 id="424ç¼–å†™eurekaéƒ¨ç½²yamlèµ„æºæ–‡ä»¶">4.2.4.ç¼–å†™Eurekaéƒ¨ç½²YAMLèµ„æºæ–‡ä»¶</h4>
<p><strong>1ï¼‰åˆ›å»ºå‘½åç©ºé—´</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">1.åˆ›å»ºå‘½åç©ºé—´</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># kubectl create ns simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">namespace/simple-ms created</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">2.åˆ›å»ºèµ„æºç¼–æ’YAMLæ–‡ä»¶å­˜æ”¾è·¯å¾„</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#ECC48D;--1:#3C63B3">root@binary-k8s-master1 ~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#ECC48D;--1:#3C63B3">\# mkdir springcloud/simple-microservice-dev1/k8s/</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.åˆ›å»ºå‘½åç©ºé—´# kubectl create ns simple-msnamespace/simple-ms created2.åˆ›å»ºèµ„æºç¼–æ’YAMLæ–‡ä»¶å­˜æ”¾è·¯å¾„[root@binary-k8s-master1 ~]\# mkdir springcloud/simple-microservice-dev1/k8s/"><div></div></button></div></figure></div>
<p><strong>2ï¼‰ç™»å½•Harbor</strong></p>
<p>å¯ä»¥ä¸åœ¨æ¯ä¸€ä¸ªNodeèŠ‚ç‚¹ä½¿ç”¨docker loginç™»é™†Harborä»“åº“ï¼Œå¯ä»¥å°†Harborä»“åº“çš„è®¤è¯ä¿¡æ¯åšæˆsecretï¼Œé€šè¿‡ä½¿ç”¨secretçš„æ–¹å¼è¿æ¥Harborã€‚</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl create secret docker-registry registry-pull-secret --docker-server=192.168.20.11 --docker-username=admin --docker-password=Harbor12345 --docker-email=admin@ctnrs.com -n simple-ms</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 ~]\# kubectl create secret docker-registry registry-pull-secret --docker-server=192.168.20.11 --docker-username=admin --docker-password=Harbor12345 --docker-email=admin@ctnrs.com -n simple-ms"><div></div></button></div></figure></div>
<p><strong>3ï¼‰ç¼–å†™èµ„æºYAMLæ–‡ä»¶</strong></p>
<p>eurekaè¦åšæˆé›†ç¾¤å¼çš„æœåŠ¡ï¼Œæ‰€ä»¥è¦é‡‡ç”¨statefulsetæ§åˆ¶å™¨éƒ¨ç½²ï¼Œå¹¶é‡‡ç”¨headless serviceä¿è¯statefulsetåˆ›å»ºçš„podåç§°å”¯ä¸€æ€§ï¼Œæœ€åé€šè¿‡ingresså°†eurekaæœåŠ¡å‘å¸ƒåœ¨äº’è”ç½‘ç¯å¢ƒã€‚</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#ECC48D;--1:#3C63B3">root@binary-k8s-master1 k8s</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#ECC48D;--1:#3C63B3">\# vim eureka-deploy.yaml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#ingressèµ„æº</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">apiVersion</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">extensions/v1beta1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">kind</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Ingress</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#809191;--1:#616671">#ç±»å‹ä¸ºingress</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:             </span><span style="--0:#809191;--1:#616671">#å®šä¹‰å…ƒæ•°æ®ä¿¡æ¯ï¼šèµ„æºåç§°ã€èµ„æºæ‰€åœ¨çš„å‘½åç©ºé—´</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">eureka</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">namespace</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">rules</span><span style="--0:#D6DEEB;--1:#403F53">:                  </span><span style="--0:#809191;--1:#616671">#å®šä¹‰ingressè§„åˆ™</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">host</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">eureka.jiangxl.com</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#809191;--1:#616671">#å®šä¹‰eurekaä½¿ç”¨çš„åŸŸå</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">http</span><span style="--0:#D6DEEB;--1:#403F53">:                   </span><span style="--0:#809191;--1:#616671">#é‡‡ç”¨httpç±»å‹çš„è®¿é—®æ–¹å¼</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">paths</span><span style="--0:#D6DEEB;--1:#403F53">:                  </span><span style="--0:#809191;--1:#616671">#å®šä¹‰ç¨‹åºçš„urlè·¯å¾„</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">/</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">backend</span><span style="--0:#D6DEEB;--1:#403F53">:                </span><span style="--0:#809191;--1:#616671">#é’ˆå¯¹å®šä¹‰çš„ç¨‹åºè·¯å¾„å…³äºå¯¹åº”çš„åç«¯serviceèµ„æº</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">serviceName</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">eureka</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">servicePort</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#headless serviceèµ„æº</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">apiVersion</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">kind</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Service</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">eureka</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">namespace</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">clusterIP</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">None</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#809191;--1:#616671">#ClusterIPèµ„æºè®¾ç½®ä¸ºNodeå°±ä»£è¡¨headlessç±»å‹çš„service</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">ports</span><span style="--0:#D6DEEB;--1:#403F53">:            </span><span style="--0:#809191;--1:#616671">#å®šä¹‰æš´éœ²çš„eurekaç«¯å£å·</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">port</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">eureka</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">selector</span><span style="--0:#D6DEEB;--1:#403F53">:           </span><span style="--0:#809191;--1:#616671">#æ ‡ç­¾é€‰æ‹©å™¨ï¼Œå…³è”åç«¯pod</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">project</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">app</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">eureka</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#statefulsetèµ„æº</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">apiVersion</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">apps/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">kind</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">StatefulSet</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">eureka</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">namespace</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">replicas</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">               </span><span style="--0:#809191;--1:#616671">#å‰¯æœ¬æ•°</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">selector</span><span style="--0:#D6DEEB;--1:#403F53">:                 </span><span style="--0:#809191;--1:#616671">#æ ‡ç­¾é€‰æ‹©å™¨</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">matchLabels</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">project</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">app</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">eureka</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">serviceName</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">eureka</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#809191;--1:#616671">#serviceçš„åç§°ï¼Œä¹Ÿå°±æ˜¯å°†æ¥çš„podåç§°</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">template</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">labels</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">project</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">app</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">eureka</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">imagePullSecrets</span><span style="--0:#D6DEEB;--1:#403F53">:           </span><span style="--0:#809191;--1:#616671">#harboré•œåƒä»“åº“çš„å‡­æ®ä¿¡æ¯</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">registry-pull-secret</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">containers</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">eureka</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">image</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">192.168.20.11/simple-microservice/eureka-service:v1</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">ports</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">protocol</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">TCP</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">containerPort</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">env</span><span style="--0:#D6DEEB;--1:#403F53">:              </span><span style="--0:#809191;--1:#616671">#å¢åŠ ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œå˜é‡åä¸ºMY_POD_NAMEï¼Œå€¼ä¸ºpodçš„åç§°ï¼Œè¿™ä¸ªå˜é‡ä¿¡æ¯ä¼šä¼ å…¥dockerfileä¸­</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">MY_POD_NAME</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">valueFrom</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">              </span><span style="--0:#7FDBCA;--1:#111111">fieldRef</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#7FDBCA;--1:#111111">fieldPath</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">metadata.name</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">resources</span><span style="--0:#D6DEEB;--1:#403F53">:            </span><span style="--0:#809191;--1:#616671">#èµ„æºé…é¢</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">requests</span><span style="--0:#D6DEEB;--1:#403F53">:           </span><span style="--0:#809191;--1:#616671">#æœ€å°èµ„æºé™åˆ¶ï¼Œcpuä¸º0.5ï¼Œå†…å­˜ä¸º256M</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">cpu</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">0.5</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">memory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">256Mi</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">limits</span><span style="--0:#D6DEEB;--1:#403F53">:           </span><span style="--0:#809191;--1:#616671">#æœ€å¤§èµ„æºé™åˆ¶ï¼Œcpuä¸º1ï¼Œå†…å­˜ä¸º1G</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">cpu</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">memory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">1Gi</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">readinessProbe</span><span style="--0:#D6DEEB;--1:#403F53">:         </span><span style="--0:#809191;--1:#616671">#å°±ç»ªæ€§å¥åº·æ£€æŸ¥</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">tcpSocket</span><span style="--0:#D6DEEB;--1:#403F53">:          </span><span style="--0:#809191;--1:#616671">#ä»¥tcp 8080ç«¯å£ä½œä¸ºå¥åº·æ£€æŸ¥çš„æœºåˆ¶</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">port</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">initialDelaySeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">60</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#809191;--1:#616671">#å®¹å™¨å¯åŠ¨60ç§’åè¿›è¡Œæ£€æµ‹</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">periodSeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#809191;--1:#616671">#æ¢æµ‹çš„é¢‘ç‡</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">livenessProbe</span><span style="--0:#D6DEEB;--1:#403F53">:            </span><span style="--0:#809191;--1:#616671">#å­˜æ´»æ€§å¥åº·æ£€æŸ¥</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">tcpSocket</span><span style="--0:#D6DEEB;--1:#403F53">:            </span><span style="--0:#809191;--1:#616671">#ä»¥tcp 8080ç«¯å£ä½œä¸ºå¥åº·æ£€æŸ¥çš„æœºåˆ¶</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">port</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">initialDelaySeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">60</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#809191;--1:#616671">#å®¹å™¨å¯åŠ¨60ç§’åè¿›è¡Œæ£€æŸ¥</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">periodSeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#809191;--1:#616671">#æ¢æµ‹çš„é¢‘ç‡ä¸º10ç§’ä¸€æ¬¡</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 k8s]\# vim eureka-deploy.yaml---#ingressèµ„æºapiVersion: extensions/v1beta1kind: Ingress           #ç±»å‹ä¸ºingressmetadata:             #å®šä¹‰å…ƒæ•°æ®ä¿¡æ¯ï¼šèµ„æºåç§°ã€èµ„æºæ‰€åœ¨çš„å‘½åç©ºé—´  name: eureka  namespace: simple-msspec:  rules:                  #å®šä¹‰ingressè§„åˆ™    - host: eureka.jiangxl.com          #å®šä¹‰eurekaä½¿ç”¨çš„åŸŸå      http:                   #é‡‡ç”¨httpç±»å‹çš„è®¿é—®æ–¹å¼        paths:                  #å®šä¹‰ç¨‹åºçš„urlè·¯å¾„        - path: /          backend:                #é’ˆå¯¹å®šä¹‰çš„ç¨‹åºè·¯å¾„å…³äºå¯¹åº”çš„åç«¯serviceèµ„æº            serviceName: eureka            servicePort: 8080---#headless serviceèµ„æºapiVersion: v1kind: Servicemetadata:  name: eureka  namespace: simple-msspec:  clusterIP: None       #ClusterIPèµ„æºè®¾ç½®ä¸ºNodeå°±ä»£è¡¨headlessç±»å‹çš„service  ports:            #å®šä¹‰æš´éœ²çš„eurekaç«¯å£å·  - port: 8080    name: eureka  selector:           #æ ‡ç­¾é€‰æ‹©å™¨ï¼Œå…³è”åç«¯pod    project: simple    app: eureka---#statefulsetèµ„æºapiVersion: apps/v1kind: StatefulSetmetadata:  name: eureka  namespace: simple-msspec:  replicas: 3               #å‰¯æœ¬æ•°  selector:                 #æ ‡ç­¾é€‰æ‹©å™¨    matchLabels:      project: simple      app: eureka  serviceName: &#x22;eureka&#x22;           #serviceçš„åç§°ï¼Œä¹Ÿå°±æ˜¯å°†æ¥çš„podåç§°  template:    metadata:      labels:        project: simple        app: eureka    spec:      imagePullSecrets:           #harboré•œåƒä»“åº“çš„å‡­æ®ä¿¡æ¯      - name: registry-pull-secret      containers:      - name: eureka        image: 192.168.20.11/simple-microservice/eureka-service:v1        ports:          - protocol: TCP            containerPort: 8080        env:              #å¢åŠ ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œå˜é‡åä¸ºMY_POD_NAMEï¼Œå€¼ä¸ºpodçš„åç§°ï¼Œè¿™ä¸ªå˜é‡ä¿¡æ¯ä¼šä¼ å…¥dockerfileä¸­          - name: MY_POD_NAME            valueFrom:              fieldRef:                fieldPath: metadata.name        resources:            #èµ„æºé…é¢          requests:           #æœ€å°èµ„æºé™åˆ¶ï¼Œcpuä¸º0.5ï¼Œå†…å­˜ä¸º256M            cpu: 0.5            memory: 256Mi          limits:           #æœ€å¤§èµ„æºé™åˆ¶ï¼Œcpuä¸º1ï¼Œå†…å­˜ä¸º1G            cpu: 1            memory: 1Gi        readinessProbe:         #å°±ç»ªæ€§å¥åº·æ£€æŸ¥          tcpSocket:          #ä»¥tcp 8080ç«¯å£ä½œä¸ºå¥åº·æ£€æŸ¥çš„æœºåˆ¶            port: 8080          initialDelaySeconds: 60     #å®¹å™¨å¯åŠ¨60ç§’åè¿›è¡Œæ£€æµ‹          periodSeconds: 10         #æ¢æµ‹çš„é¢‘ç‡        livenessProbe:            #å­˜æ´»æ€§å¥åº·æ£€æŸ¥          tcpSocket:            #ä»¥tcp 8080ç«¯å£ä½œä¸ºå¥åº·æ£€æŸ¥çš„æœºåˆ¶            port: 8080          initialDelaySeconds: 60       #å®¹å™¨å¯åŠ¨60ç§’åè¿›è¡Œæ£€æŸ¥          periodSeconds: 10           #æ¢æµ‹çš„é¢‘ç‡ä¸º10ç§’ä¸€æ¬¡"><div></div></button></div></figure></div>
<h4 id="425åœ¨k8sé›†ç¾¤ä¸­éƒ¨ç½²eurekaæ³¨å†Œä¸­å¿ƒ">4.2.5.åœ¨K8Sé›†ç¾¤ä¸­éƒ¨ç½²Eurekaæ³¨å†Œä¸­å¿ƒ</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.éƒ¨ç½²eurekaæœåŠ¡</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl apply -f eureka-deploy.yaml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.æŸ¥çœ‹éƒ¨ç½²çš„èµ„æºçŠ¶æ€</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get all -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">STATUS</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">RESTARTS</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/eureka-0</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">12</span><span style="--0:#ECC48D;--1:#3C63B3">h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/eureka-1</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">12</span><span style="--0:#ECC48D;--1:#3C63B3">h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/eureka-2</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">12</span><span style="--0:#ECC48D;--1:#3C63B3">h</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">             </span><span style="--0:#ECC48D;--1:#3C63B3">TYPE</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#ECC48D;--1:#3C63B3">CLUSTER-IP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">EXTERNAL-IP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">PORT</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">S</span><span style="--0:#D6DEEB;--1:#403F53">)    </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">service/eureka</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">ClusterIP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">None</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#F78C6C;--1:#AA0982">8080</span><span style="--0:#ECC48D;--1:#3C63B3">/TCP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">13</span><span style="--0:#ECC48D;--1:#3C63B3">h</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                      </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">statefulset.apps/eureka</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#ECC48D;--1:#3C63B3">/3</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">13</span><span style="--0:#ECC48D;--1:#3C63B3">h</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">3.æŸ¥çœ‹eurekaçš„ingressçŠ¶æ€</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get ingress -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">CLASS</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">HOSTS</span><span style="--0:#D6DEEB;--1:#403F53">                </span><span style="--0:#ECC48D;--1:#3C63B3">ADDRESS</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">PORTS</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">eureka.jiangxl.com</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">10.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.107</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">80</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#F78C6C;--1:#AA0982">13</span><span style="--0:#ECC48D;--1:#3C63B3">h</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.éƒ¨ç½²eurekaæœåŠ¡[root@binary-k8s-master1 k8s]\# kubectl apply -f eureka-deploy.yaml2.æŸ¥çœ‹éƒ¨ç½²çš„èµ„æºçŠ¶æ€[root@binary-k8s-master1 k8s]\# kubectl get all -n simple-msNAME           READY   STATUS    RESTARTS   AGEpod/eureka-0   1/1     Running   1          12hpod/eureka-1   1/1     Running   0          12hpod/eureka-2   1/1     Running   0          12hNAME             TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)    AGEservice/eureka   ClusterIP   None         <none>        8080/TCP   13hNAME                      READY   AGEstatefulset.apps/eureka   3/3     13h3.æŸ¥çœ‹eurekaçš„ingressçŠ¶æ€[root@binary-k8s-master1 k8s]\# kubectl get ingress -n simple-msNAME     CLASS    HOSTS                ADDRESS      PORTS   AGEeureka   <none>   eureka.jiangxl.com   10.0.0.107   80      13h"><div></div></button></div></figure></div>
<p>é¦–å…ˆåœ¨æœ¬åœ°hostsæ–‡ä»¶ä¸­ç»‘å®šeurekaåŸŸåè§£æï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥eureka.jiangxl.comè®¿é—®eurekaæœåŠ¡ã€‚</p>
<p><img src="https://cdn.agou-ops.cn/others/dac8c49c10904c4591acb933a094c0d7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="43é…ç½®å„ä¸ªå¾®æœåŠ¡ç¨‹åºè¿æ¥eurekaé›†ç¾¤çš„åœ°å€">4.3.é…ç½®å„ä¸ªå¾®æœåŠ¡ç¨‹åºè¿æ¥Eurekaé›†ç¾¤çš„åœ°å€</h3>
<p>åœ¨ç¨‹åºçš„é…ç½®æ–‡ä»¶ä¸­å¡«å†™eurekaé›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹çš„æœåŠ¡å‘ç°åœ°å€</p>
<p><strong>1.gateway-serviceé…ç½®æ–‡ä»¶</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># vim gateway-service/src/main/resources/application-prod.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">Â·Â·Â·Â·Â·Â·</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">eureka</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">instance</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">prefer-ip-address</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">client</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">register-with-eureka</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">fetch-registry</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">service-url</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">defaultZone</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">http://eureka-0.eureka.simple-ms:8080/eureka,http://eureka-1.eureka.simple-ms:8080/eureka,http://eureka-2.eureka.simple-ms:8080/eureka</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="# vim gateway-service/src/main/resources/application-prod.ymlÂ·Â·Â·Â·Â·Â·eureka:  instance:    prefer-ip-address: true  client:    register-with-eureka: true    fetch-registry: true    service-url:      defaultZone: http://eureka-0.eureka.simple-ms:8080/eureka,http://eureka-1.eureka.simple-ms:8080/eureka,http://eureka-2.eureka.simple-ms:8080/eureka"><div></div></button></div></figure></div>
<p><strong>2.order-serviceé…ç½®æ–‡ä»¶</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># vim order-service/order-service-biz/src/main/resources/application-prod.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">spring</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">datasource</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">url</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">jdbc:mysql://192.168.20.11:3306/tb_order?characterEncoding=utf-8</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">username</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">root</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">password</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">123456</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">driver-class-name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">com.mysql.jdbc.Driver</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">eureka</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">instance</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">prefer-ip-address</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">client</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">register-with-eureka</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">fetch-registry</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">service-url</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">defaultZone</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">http://eureka-0.eureka.simple-ms:8080/eureka,http://eureka-1.eureka.simple-ms:8080/eureka,http://eureka-2.eureka.simple-ms:8080/eureka</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="# vim order-service/order-service-biz/src/main/resources/application-prod.ymlspring:  datasource:    url: jdbc:mysql://192.168.20.11:3306/tb_order?characterEncoding=utf-8    username: root    password: 123456    driver-class-name: com.mysql.jdbc.Drivereureka:  instance:    prefer-ip-address: true  client:    register-with-eureka: true    fetch-registry: true    service-url:      defaultZone: http://eureka-0.eureka.simple-ms:8080/eureka,http://eureka-1.eureka.simple-ms:8080/eureka,http://eureka-2.eureka.simple-ms:8080/eureka"><div></div></button></div></figure></div>
<p><strong>3.product-serviceé…ç½®æ–‡ä»¶</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># vim product-service/product-service-biz/src/main/resources/application-prod.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">spring</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">datasource</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">url</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">jdbc:mysql://192.168.20.11:3306/tb_product?characterEncoding=utf-8</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">username</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">root</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">password</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">123456</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">driver-class-name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">com.mysql.jdbc.Driver</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">eureka</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">instance</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">prefer-ip-address</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">client</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">register-with-eureka</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">fetch-registry</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">service-url</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">defaultZone</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">http://eureka-0.eureka.simple-ms:8080/eureka,http://eureka-1.eureka.simple-ms:8080/eureka,http://eureka-2.eureka.simple-ms:8080/eureka</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="# vim product-service/product-service-biz/src/main/resources/application-prod.ymlspring:  datasource:    url: jdbc:mysql://192.168.20.11:3306/tb_product?characterEncoding=utf-8    username: root    password: 123456    driver-class-name: com.mysql.jdbc.Drivereureka:  instance:    prefer-ip-address: true  client:    register-with-eureka: true    fetch-registry: true    service-url:      defaultZone: http://eureka-0.eureka.simple-ms:8080/eureka,http://eureka-1.eureka.simple-ms:8080/eureka,http://eureka-2.eureka.simple-ms:8080/eureka"><div></div></button></div></figure></div>
<p><strong>4.stock-serviceé…ç½®æ–‡ä»¶</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># vim stock-service/stock-service-biz/src/main/resources/application-prod.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">spring</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">datasource</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">url</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">jdbc:mysql://192.168.20.11:3306/tb_stock?characterEncoding=utf-8</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">username</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">root</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">password</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">123456</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">driver-class-name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">com.mysql.jdbc.Driver</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">eureka</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">instance</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">prefer-ip-address</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">client</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">register-with-eureka</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">fetch-registry</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">service-url</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">defaultZone</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">http://eureka-0.eureka.simple-ms:8080/eureka,http://eureka-1.eureka.simple-ms:8080/eureka,http://eureka-2.eureka.simple-ms:8080/eureka</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="# vim stock-service/stock-service-biz/src/main/resources/application-prod.ymlspring:  datasource:    url: jdbc:mysql://192.168.20.11:3306/tb_stock?characterEncoding=utf-8    username: root    password: 123456    driver-class-name: com.mysql.jdbc.Drivereureka:  instance:    prefer-ip-address: true  client:    register-with-eureka: true    fetch-registry: true    service-url:      defaultZone: http://eureka-0.eureka.simple-ms:8080/eureka,http://eureka-1.eureka.simple-ms:8080/eureka,http://eureka-2.eureka.simple-ms:8080/eureka"><div></div></button></div></figure></div>
<p><strong>5.portal-serviceé…ç½®æ–‡ä»¶</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># vim portal-service/src/main/resources/application-prod.yml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">eureka</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">instance</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">prefer-ip-address</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">client</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">service-url</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">defaultZone</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">http://eureka-0.eureka.simple-ms:8080/eureka,http://eureka-1.eureka.simple-ms:8080/eureka,http://eureka-2.eureka.simple-ms:8080/eureka</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">register-with-eureka</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">fetch-registry</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3C63B3">Â·Â·Â·Â·Â·Â·</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="# vim portal-service/src/main/resources/application-prod.ymleureka:  instance:    prefer-ip-address: true  client:    service-url:      defaultZone: http://eureka-0.eureka.simple-ms:8080/eureka,http://eureka-1.eureka.simple-ms:8080/eureka,http://eureka-2.eureka.simple-ms:8080/eureka    register-with-eureka: true    fetch-registry: trueÂ·Â·Â·Â·Â·Â·"><div></div></button></div></figure></div>
<h3 id="44å°†å„ä¸ªç¨‹åºä»£ç ç¼–è¯‘æˆå¯éƒ¨ç½²çš„ç¨‹åº">4.4.å°†å„ä¸ªç¨‹åºä»£ç ç¼–è¯‘æˆå¯éƒ¨ç½²çš„ç¨‹åº</h3>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 simple-microservice-dev1]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> mvn clean package -D maven.test.skip=true -P prod</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 simple-microservice-dev1]\# mvn clean package -D maven.test.skip=true -P prod"><div></div></button></div></figure></div>
<h3 id="43ä¸­éƒ¨ç½²gatewayç½‘å…³æœåŠ¡">4.3.ä¸­éƒ¨ç½²Gatewayç½‘å…³æœåŠ¡</h3>
<h4 id="431å°†gatewayç¨‹åºæ‰“åŒ…æˆdockeré•œåƒ">4.3.1.å°†Gatewayç¨‹åºæ‰“åŒ…æˆdockeré•œåƒ</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 gateway-service]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> docker build -t 192.168.20.11/simple-microservice/gateway-service:v1 </span><span style="--0:#C5E478;--1:#3C63B3">.</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 gateway-service]\# docker build -t 192.168.20.11/simple-microservice/gateway-service:v1 ."><div></div></button></div></figure></div>
<h4 id="432åœ¨k8sé›†ç¾¤ä¸­éƒ¨ç½²gatewayç½‘å…³æœåŠ¡">4.3.2.åœ¨K8Sé›†ç¾¤ä¸­éƒ¨ç½²Gatewayç½‘å…³æœåŠ¡</h4>
<p>æ‰€æœ‰ç¨‹åºçš„èµ„æºYAMLæ–‡ä»¶éƒ½å­˜æ”¾åœ¨/root/springcloud/simple-microservice-dev1/k8sè·¯å¾„ã€‚</p>
<p>å¾®æœåŠ¡ç¨‹åºçš„è¯å°±ä¸éœ€è¦æœ‰çŠ¶æ€åº”ç”¨éƒ¨ç½²äº†ï¼Œç›´æ¥é‡‡ç”¨deploymentæ— çŠ¶æ€åº”ç”¨éƒ¨ç½²çš„æ§åˆ¶å™¨ï¼Œå­—æ®µé…ç½®å’ŒeurekaæœåŠ¡çš„statefulseté…ç½®å‚æ•°å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œå¾®æœåŠ¡çš„å„ä¸ªç¨‹åºä¹Ÿéƒ½é‡‡ç”¨æœ‰deploymentæ§åˆ¶å™¨å»éƒ¨ç½²ï¼Œæ¯ä¸ªç¨‹åºçš„yamlæ–‡ä»¶ä¹Ÿåªæœ‰åå­—ã€ä½¿ç”¨çš„é•œåƒä¸åŒï¼Œå…¶ä½™æ‰€æœ‰å‚æ•°å‡ä¸€è‡´ã€‚</p>
<p>gatewayæ˜¯ç½‘å…³æœåŠ¡ï¼Œéœ€è¦é…ç½®ä¸€ä¸ªingresså’Œserviceèµ„æºï¼Œå°†å…¶å‘å¸ƒåœ¨é›†ç¾¤ä¹‹å¤–ã€‚</p>
<p>å­—æ®µé…ç½®å’Œstatefulsetçš„ä¸€è‡´ï¼Œä¸å†åšæ³¨é‡Šä¿¡æ¯</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># vim gateway-deploy.yaml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#ingressèµ„æºYAML</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">apiVersion</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">extensions/v1beta1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">kind</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Ingress</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">gateway</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">namespace</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">rules</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">host</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">gateway.jiangxl.com</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">http</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">paths</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">/</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">backend</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">serviceName</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">gateway</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">servicePort</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#serviceèµ„æºYAML</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">apiVersion</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">kind</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Service</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">gateway</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">namespace</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">ports</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">port</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">gateway</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">selector</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">project</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">app</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">gateway</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#deploymentèµ„æºYAML</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">apiVersion</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">apps/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">kind</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Deployment</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">gateway</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">namespace</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">replicas</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#809191;--1:#616671">#å‰¯æœ¬æ•°è®¾ç½®1ä¸ªï¼Œåç»­å†åŠ </span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">selector</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">matchLabels</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">project</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">app</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">gateway</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">template</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">labels</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">project</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">app</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">gateway</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">imagePullSecrets</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">registry-pull-secret</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">containers</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">gateway</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">image</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">192.168.20.11/simple-microservice/gateway-service:v1</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">imagePullPolicy</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Always</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">ports</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">protocol</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">TCP</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">containerPort</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">resources</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">requests</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">cpu</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">0.5</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">memory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">256Mi</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">limits</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">cpu</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">memory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">1Gi</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">readinessProbe</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">tcpSocket</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">port</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">initialDelaySeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">60</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">periodSeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">livenessProbe</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">tcpSocket</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">port</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">initialDelaySeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">60</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">periodSeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="# vim gateway-deploy.yaml---#ingressèµ„æºYAMLapiVersion: extensions/v1beta1kind: Ingressmetadata:  name: gateway  namespace: simple-msspec:  rules:    - host: gateway.jiangxl.com      http:        paths:        - path: /          backend:            serviceName: gateway            servicePort: 8080---#serviceèµ„æºYAMLapiVersion: v1kind: Servicemetadata:  name: gateway  namespace: simple-msspec:  ports:  - port: 8080    name: gateway  selector:    project: simple    app: gateway---#deploymentèµ„æºYAMLapiVersion: apps/v1kind: Deploymentmetadata:  name: gateway  namespace: simple-msspec:  replicas: 1         #å‰¯æœ¬æ•°è®¾ç½®1ä¸ªï¼Œåç»­å†åŠ   selector:    matchLabels:      project: simple      app: gateway  template:    metadata:      labels:        project: simple        app: gateway    spec:      imagePullSecrets:      - name: registry-pull-secret      containers:      - name: gateway        image: 192.168.20.11/simple-microservice/gateway-service:v1        imagePullPolicy: Always        ports:          - protocol: TCP            containerPort: 8080        resources:          requests:            cpu: 0.5            memory: 256Mi          limits:            cpu: 1            memory: 1Gi        readinessProbe:          tcpSocket:            port: 8080          initialDelaySeconds: 60          periodSeconds: 10        livenessProbe:          tcpSocket:            port: 8080          initialDelaySeconds: 60          periodSeconds: 10"><div></div></button></div></figure></div>
<h4 id="433åœ¨k8sé›†ç¾¤ä¸­éƒ¨ç½²gatewayç½‘å…³æœåŠ¡">4.3.3.åœ¨K8Sé›†ç¾¤ä¸­éƒ¨ç½²Gatewayç½‘å…³æœåŠ¡</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.éƒ¨ç½²ç½‘å…³æœåŠ¡</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl apply -f gateway-deploy.yaml</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.æŸ¥çœ‹gateway</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">podèµ„æºçš„çŠ¶æ€</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get pod -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                       </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">STATUS</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">RESTARTS</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka-0</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d12h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka-1</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d12h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka-2</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d12h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">gateway-7c687f6c45-mcwpf</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">m2s</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">3.æŸ¥çœ‹deploymentå’Œsvcçš„èµ„æºçŠ¶æ€</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get deploy,svc -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                      </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">UP-TO-DATE</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AVAILABLE</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">deployment.apps/gateway</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">17</span><span style="--0:#ECC48D;--1:#3C63B3">h</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">              </span><span style="--0:#ECC48D;--1:#3C63B3">TYPE</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#ECC48D;--1:#3C63B3">CLUSTER-IP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">EXTERNAL-IP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">PORT</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">S</span><span style="--0:#D6DEEB;--1:#403F53">)    </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">service/eureka</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">ClusterIP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">None</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#F78C6C;--1:#AA0982">8080</span><span style="--0:#ECC48D;--1:#3C63B3">/TCP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d13h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">service/gateway</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">ClusterIP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">10.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.188</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#F78C6C;--1:#AA0982">8080</span><span style="--0:#ECC48D;--1:#3C63B3">/TCP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">17</span><span style="--0:#ECC48D;--1:#3C63B3">h</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">4.æŸ¥çœ‹gateway</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">ingressèµ„æºçŠ¶æ€</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get ingress -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">CLASS</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">HOSTS</span><span style="--0:#D6DEEB;--1:#403F53">                 </span><span style="--0:#ECC48D;--1:#3C63B3">ADDRESS</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">PORTS</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">eureka.jiangxl.com</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#F78C6C;--1:#AA0982">10.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.107</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">80</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d13h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">gateway</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">gateway.jiangxl.com</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">10.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.107</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">80</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#F78C6C;--1:#AA0982">17</span><span style="--0:#ECC48D;--1:#3C63B3">h</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.éƒ¨ç½²ç½‘å…³æœåŠ¡[root@binary-k8s-master1 k8s]\# kubectl apply -f gateway-deploy.yaml2.æŸ¥çœ‹gateway podèµ„æºçš„çŠ¶æ€[root@binary-k8s-master1 k8s]\# kubectl get pod -n simple-msNAME                       READY   STATUS    RESTARTS   AGEeureka-0                   1/1     Running   1          2d12heureka-1                   1/1     Running   0          2d12heureka-2                   1/1     Running   0          2d12hgateway-7c687f6c45-mcwpf   1/1     Running   0          2m2s3.æŸ¥çœ‹deploymentå’Œsvcçš„èµ„æºçŠ¶æ€[root@binary-k8s-master1 k8s]\# kubectl get deploy,svc -n simple-msNAME                      READY   UP-TO-DATE   AVAILABLE   AGEdeployment.apps/gateway   1/1     1            1           17hNAME              TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)    AGEservice/eureka    ClusterIP   None         <none>        8080/TCP   2d13hservice/gateway   ClusterIP   10.0.0.188   <none>        8080/TCP   17h4.æŸ¥çœ‹gateway ingressèµ„æºçŠ¶æ€[root@binary-k8s-master1 k8s]\# kubectl get ingress -n simple-msNAME      CLASS    HOSTS                 ADDRESS      PORTS   AGEeureka    <none>   eureka.jiangxl.com    10.0.0.107   80      2d13hgateway   <none>   gateway.jiangxl.com   10.0.0.107   80      17h"><div></div></button></div></figure></div>
<h3 id="44ç¼–å†™å¿«é€Ÿéƒ¨ç½²å¾®æœåŠ¡åˆ°k8sé›†ç¾¤çš„è„šæœ¬">4.4.ç¼–å†™å¿«é€Ÿéƒ¨ç½²å¾®æœåŠ¡åˆ°K8Sé›†ç¾¤çš„è„šæœ¬</h3>
<p>ç”±äºå¾®æœåŠ¡ç¨‹åºä¼—å¤šï¼Œå¹¶ä¸”æ¯ä¸ªç¨‹åºåœ¨K8Sé›†ç¾¤éƒ¨ç½²çš„æµç¨‹ä¹ŸåŸºæœ¬ä¸€æ ·ï¼Œå› æ­¤æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªéƒ¨ç½²è„šæœ¬ï¼Œåªè¦å‡†å¤‡å¥½ç¨‹åºçš„jaråŒ…ä»¥åŠèµ„æºYAMLæ–‡ä»¶å°±å¯ä»¥å°†å…¶ä¸€é”®éƒ¨ç½²åˆ°K8Sé›†ç¾¤ï¼Œå½“å‰ä¹Ÿå¯ä»¥é€šè¿‡Helmæ¥å®ç°ã€‚</p>
<p><strong>1.è„šæœ¬å†…å®¹</strong></p>
<p>å®ç°é€»è¾‘ï¼š</p>
<p>1.å°†harborä»“åº“çš„åœ°å€ã€æ‰€æœ‰å¾®æœåŠ¡çš„åç§°ã€k8s yamlæ–‡ä»¶çš„è·¯å¾„ã€å¾®æœåŠ¡ä»£ç æ‰€åœ¨çš„è·¯å¾„éƒ½å®šä¹‰æˆç¯å¢ƒå˜é‡ã€‚</p>
<p>2.å¦‚æœåªæƒ³éƒ¨ç½²å…¶ä¸­ä¸€ä¸ªå¾®æœåŠ¡çš„è¯ï¼Œé€šè¿‡ä½ç½®ä¼ å‚çš„æ–¹å¼æ¥å®ç°ï¼Œä¹Ÿå°±æ˜¯å†å®šä¹‰ä¸€ä¸ªå¾®æœåŠ¡åç§°çš„å˜é‡ï¼Œå˜é‡å€¼ä¸ºKaTeX parse error: Expected â€™}â€™, got â€˜EOFâ€™ at end of input: {1:-{service_list}}ï¼Œå°†è¦éƒ¨ç½²çš„å¾®æœåŠ¡åç§°é€šè¿‡ä½ç½®ä¼ å‚çš„æ–¹å¼ï¼Œå°†å€¼ä¼ å…¥åˆ°service_listå˜é‡åé‡Œï¼Œè¦†ç›–åŸservice_listå˜é‡å€¼ï¼Œå®ç°å•ä¸ªå¾®æœåŠ¡çš„éƒ¨ç½²ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨ä½ç½®å‚æ•°ï¼Œé‚£ä¹ˆé»˜è®¤éƒ¨ç½²å…¨éƒ¨çš„å¾®æœåŠ¡ã€‚</p>
<p>3.è¿›å…¥å¾®æœåŠ¡ä»£ç æ‰€åœ¨çš„è·¯å¾„ã€‚ç„¶åé€šè¿‡forå¾ªç¯çš„æ–¹å¼ï¼Œéå†service_listå˜é‡ä¸­çš„å„ä¸ªå¾®æœåŠ¡ï¼Œç„¶åæœ¬æ¬¡å¾ªç¯çš„å¾®æœåŠ¡ä»£ç è·¯å¾„ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰åŒ…å«bizçš„ç›®å½•ï¼Œå¦‚æœæœ‰bizç›®å½•åˆ™åˆ‡å…¥åˆ°bizç›®å½•ï¼Œç„¶åé€šè¿‡å˜é‡çš„å½¢å¼å®šä¹‰é•œåƒåç§°ï¼Œæ„å»ºé•œåƒã€æ¨é€è‡³é•œåƒä»“åº“ã€‚</p>
<p>4.å°†æœ€æ–°æ‰“åŒ…å¥½çš„dockerè¿›åœ¨yamlæ–‡ä»¶ä¸­é€šè¿‡sedå‘½ä»¤æ›¿æ¢ï¼Œæœ€ååœ¨k8sé›†ç¾¤ä¸­éƒ¨ç½²è¿™ä¸ªå¾®æœåŠ¡ã€‚</p>
<p><code dir="auto">${1:-${service_list}}</code>ï¼šè¿™ä¸ªçš„æ„æ€å°±æ˜¯å¦‚æœ<code dir="auto">$1</code>ä½ç½®å‚æ•°æ²¡æœ‰ä¼ å…¥å€¼ï¼Œé‚£ä¹ˆservice_listå˜é‡çš„å€¼å°±æ˜¯<code dir="auto">$service_list</code>å˜é‡çš„å€¼ï¼Œç›¸å½“äºä¸€ä¸ªåˆ¤æ–­ã€‚</p>
<p>æœ¬è„šæœ¬å¯ä»¥è‡ªåŠ¨åŒ–å®Œæˆå¾®æœåŠ¡åˆ°K8Sé›†ç¾¤çš„ä¸€ä¸ªéƒ¨ç½²ï¼ŒåŒ…æ‹¬ç¨‹åºçš„ç¼–è¯‘ã€æ‰“åŒ…æˆdockeré•œåƒã€æ¨èé•œåƒåˆ°Harborä»“åº“ï¼Œæœ€åå°†ç¨‹åºéƒ¨ç½²åˆ°K8Sé›†ç¾¤</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#!/bin/bash</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">registry_addr</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">192.168</span><span style="--0:#ECC48D;--1:#3C63B3">.20.11</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">service_list</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">eureka-service gateway-service order-service product-service stock-service portal-service</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">service_list</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D7DBE0;--1:#403F53">${1</span><span style="--0:#7FDBCA;--1:#097174">:-</span><span style="--0:#D6DEEB;--1:#403F53">${</span><span style="--0:#C5E478;--1:#3C63B3">service_list</span><span style="--1:#403F53"><span style="--0:#D6DEEB">}</span><span style="--0:#D7DBE0">}</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">current_dir</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#ECC48D;--1:#3C63B3">/root/springcloud/simple-microservice-dev1/k8s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">service_dir</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--1:#3C63B3"><span style="--0:#ECC48D">$(</span><span style="--0:#82AAFF">dirname</span><span style="--0:#ECC48D"> </span><span style="--0:#C5E478">$current_dir</span><span style="--0:#ECC48D">)</span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$service_dir</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">#mvn clean package -Dmaven.test.skip=true</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">service</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$service_list</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#C792EA;--1:#8D46B4">do</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">$service_dir</span><span style="--0:#ECC48D;--1:#3C63B3">/</span><span style="--0:#C5E478;--1:#3C63B3">$service</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#C5E478;--1:#3C63B3">biz_count</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--1:#3C63B3"><span style="--0:#ECC48D">`</span><span style="--0:#82AAFF">ls</span><span style="--0:#ECC48D"> </span></span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">grep</span><span style="--0:#ECC48D"> biz </span></span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">wc</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-l</span><span style="--0:#ECC48D">`</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#C792EA;--1:#8D46B4">if</span><span style="--0:#D6DEEB;--1:#403F53"> [ </span><span style="--0:#C5E478;--1:#3C63B3">$biz_count</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">-eq</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53"> ];</span><span style="--0:#C792EA;--1:#8D46B4">then</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#C5E478;--1:#3C63B3">cd</span><span style="--0:#D6DEEB;--1:#403F53"> ${</span><span style="--0:#C5E478;--1:#3C63B3">service</span><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#ECC48D;--1:#3C63B3">-biz</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#C792EA;--1:#8D46B4">fi</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#C5E478;--1:#3C63B3">service_name</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--1:#3C63B3"><span style="--0:#ECC48D">`</span><span style="--0:#C5E478">echo</span><span style="--0:#ECC48D"> </span><span style="--0:#C5E478">$service</span><span style="--0:#ECC48D"> </span></span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--1:#3C63B3"><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">awk</span><span style="--0:#ECC48D"> </span><span style="--0:#82AAFF">-F-</span><span style="--0:#ECC48D"> </span></span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">{print $1}</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#3C63B3">`</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#C5E478;--1:#3C63B3">image_name</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53">${</span><span style="--0:#C5E478;--1:#3C63B3">registry_addr</span><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#ECC48D;--1:#3C63B3">/simple-microservice/</span><span style="--0:#D6DEEB;--1:#403F53">${</span><span style="--0:#C5E478;--1:#3C63B3">service</span><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#ECC48D;--1:#3C63B3">:v1</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#C5E478;--1:#3C63B3">yaml_name</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53">${</span><span style="--0:#C5E478;--1:#3C63B3">service_name</span><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#ECC48D;--1:#3C63B3">-deploy.yaml</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#82AAFF;--1:#3C63B3">docker</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">build</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-t</span><span style="--0:#D6DEEB;--1:#403F53"> ${</span><span style="--0:#C5E478;--1:#3C63B3">image_name</span><span style="--0:#D6DEEB;--1:#403F53">} </span><span style="--0:#ECC48D;--1:#3C63B3">.</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#82AAFF;--1:#3C63B3">docker</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">push</span><span style="--0:#D6DEEB;--1:#403F53"> ${</span><span style="--0:#C5E478;--1:#3C63B3">image_name</span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#82AAFF;--1:#3C63B3">sed</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-r</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">s#(image: )(.*)#\1</span><span style="--0:#C5E478;--1:#3C63B3">$image_name</span><span style="--0:#ECC48D;--1:#9B504E">#</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> ${</span><span style="--0:#C5E478;--1:#3C63B3">current_dir</span><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#ECC48D;--1:#3C63B3">/</span><span style="--0:#D6DEEB;--1:#403F53">${</span><span style="--0:#C5E478;--1:#3C63B3">yaml_name</span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#82AAFF;--1:#3C63B3">kubectl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">apply</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">-f</span><span style="--0:#D6DEEB;--1:#403F53"> ${</span><span style="--0:#C5E478;--1:#3C63B3">current_dir</span><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#ECC48D;--1:#3C63B3">/</span><span style="--0:#D6DEEB;--1:#403F53">${</span><span style="--0:#C5E478;--1:#3C63B3">yaml_name</span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">done</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="#!/bin/bashregistry_addr=192.168.20.11service_list=&#x22;eureka-service gateway-service order-service product-service stock-service portal-service&#x22;service_list=${1:-${service_list}}current_dir=/root/springcloud/simple-microservice-dev1/k8sservice_dir=$(dirname $current_dir)cd $service_dir#mvn clean package -Dmaven.test.skip=truefor service in $service_list; do   cd $service_dir/$service   biz_count=&#x60;ls | grep biz | wc -l&#x60;   if [ $biz_count -eq 1 ];then      cd ${service}-biz   fi   service_name=&#x60;echo $service | awk -F- &#x27;{print $1}&#x27;&#x60;   image_name=${registry_addr}/simple-microservice/${service}:v1   yaml_name=${service_name}-deploy.yaml   docker build -t ${image_name} .   docker push ${image_name}   sed -i -r &#x22;s#(image: )(.*)#\1$image_name#&#x22; ${current_dir}/${yaml_name}   kubectl apply -f ${current_dir}/${yaml_name}done"><div></div></button></div></figure></div>
<p><strong>2.è„šæœ¬ä½¿ç”¨æ–¹å¼</strong></p>
<p>æ‰§è¡Œæœ¬è„šæœ¬å‰ææ˜¯å¿…é¡»å…ˆå°†ç¨‹åºéƒ¨ç½²çš„YAMLæ–‡ä»¶å‡†å¤‡å¥½ï¼Œæ”¾åœ¨/root/springcloud/simple-microservice-dev1/k8sè·¯å¾„</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">è„šæœ¬çš„ç”¨æ³•ï¼š</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">sh</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">deploy_k8s.sh</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">å¾®æœåŠ¡åç§°</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="è„šæœ¬çš„ç”¨æ³•ï¼šsh deploy_k8s.sh å¾®æœåŠ¡åç§°"><div></div></button></div></figure></div>
<h3 id="45ä½¿ç”¨è„šæœ¬éƒ¨ç½²orderè®¢å•æœåŠ¡">4.5.ä½¿ç”¨è„šæœ¬éƒ¨ç½²Orderè®¢å•æœåŠ¡</h3>
<h4 id="451ç¼–å†™èµ„æºéƒ¨ç½²yamlæ–‡ä»¶">4.5.1.ç¼–å†™èµ„æºéƒ¨ç½²YAMLæ–‡ä»¶</h4>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># vim order-deploy.yaml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">apiVersion</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">apps/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">kind</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Deployment</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">order</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">namespace</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">replicas</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">selector</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">matchLabels</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">project</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">app</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">order</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">template</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">labels</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">project</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">app</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">order</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">imagePullSecrets</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">registry-pull-secret</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">containers</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">order</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">image</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">192.168.20.11/simple-microservice/order-service:v1</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">imagePullPolicy</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Always</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">ports</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">protocol</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">TCP</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">containerPort</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">resources</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">requests</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">cpu</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">0.5</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">memory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">256Mi</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">limits</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">cpu</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">memory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">1Gi</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">readinessProbe</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">tcpSocket</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">port</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">initialDelaySeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">60</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">periodSeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">livenessProbe</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">tcpSocket</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">port</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">initialDelaySeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">60</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">periodSeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="# vim order-deploy.yamlapiVersion: apps/v1kind: Deploymentmetadata:  name: order  namespace: simple-msspec:  replicas: 1  selector:    matchLabels:      project: simple      app: order  template:    metadata:      labels:        project: simple        app: order    spec:      imagePullSecrets:      - name: registry-pull-secret      containers:      - name: order        image: 192.168.20.11/simple-microservice/order-service:v1        imagePullPolicy: Always        ports:          - protocol: TCP            containerPort: 8080        resources:          requests:            cpu: 0.5            memory: 256Mi          limits:            cpu: 1            memory: 1Gi        readinessProbe:          tcpSocket:            port: 8080          initialDelaySeconds: 60          periodSeconds: 10        livenessProbe:          tcpSocket:            port: 8080          initialDelaySeconds: 60          periodSeconds: 10"><div></div></button></div></figure></div>
<h4 id="452åœ¨k8sé›†ç¾¤ä¸­éƒ¨ç½²orderè®¢å•æœåŠ¡">4.5.2åœ¨K8Sé›†ç¾¤ä¸­éƒ¨ç½²Orderè®¢å•æœåŠ¡</h4>
<p><strong>1.ä½¿ç”¨è„šæœ¬å°†OrderæœåŠ¡éƒ¨ç½²åˆ°K8Sé›†ç¾¤</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> sh deploy_k8s.sh order-service</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">æ‰§è¡Œå®Œè„šæœ¬ï¼Œorderç¨‹åºçš„dockeré•œåƒå·²ç»åˆ¶ä½œå¥½å¹¶ä¸”æ¨é€åˆ°äº†harborä»“åº“ï¼Œå·²ç»ä½¿ç”¨sedå‘½ä»¤å°†é•œåƒçš„åç§°åœ¨yamlä¸­æ›¿æ¢æˆäº†æœ€æ–°çš„é•œåƒï¼Œéƒ¨ç½²åˆ°äº†K8Sé›†ç¾¤</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 k8s]\# sh deploy_k8s.sh order-serviceæ‰§è¡Œå®Œè„šæœ¬ï¼Œorderç¨‹åºçš„dockeré•œåƒå·²ç»åˆ¶ä½œå¥½å¹¶ä¸”æ¨é€åˆ°äº†harborä»“åº“ï¼Œå·²ç»ä½¿ç”¨sedå‘½ä»¤å°†é•œåƒçš„åç§°åœ¨yamlä¸­æ›¿æ¢æˆäº†æœ€æ–°çš„é•œåƒï¼Œéƒ¨ç½²åˆ°äº†K8Sé›†ç¾¤"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/be81d4ca75f14ea1afd933b7e4f34ea5.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>2.æŸ¥çœ‹ç¨‹åºèµ„æºçš„çŠ¶æ€</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.æŸ¥çœ‹podçš„çŠ¶æ€</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get all -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                          </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">STATUS</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">RESTARTS</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/eureka-0</span><span style="--0:#D6DEEB;--1:#403F53">                  </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d15h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/eureka-1</span><span style="--0:#D6DEEB;--1:#403F53">                  </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d15h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/eureka-2</span><span style="--0:#D6DEEB;--1:#403F53">                  </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d15h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/gateway-8665d5d56-tx2m8</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">39</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/order-6694f4c474-cp5d6</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">35</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.æŸ¥çœ‹deploymentèµ„æºçš„çŠ¶æ€</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get deploy -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">UP-TO-DATE</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AVAILABLE</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">gateway</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">21</span><span style="--0:#ECC48D;--1:#3C63B3">h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">order</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">36</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.æŸ¥çœ‹podçš„çŠ¶æ€[root@binary-k8s-master1 k8s]\# kubectl get all -n simple-msNAME                          READY   STATUS    RESTARTS   AGEpod/eureka-0                  1/1     Running   1          2d15hpod/eureka-1                  1/1     Running   0          2d15hpod/eureka-2                  1/1     Running   0          2d15hpod/gateway-8665d5d56-tx2m8   1/1     Running   0          39mpod/order-6694f4c474-cp5d6    1/1     Running   0          35m2.æŸ¥çœ‹deploymentèµ„æºçš„çŠ¶æ€[root@binary-k8s-master1 k8s]\# kubectl get deploy -n simple-msNAME      READY   UP-TO-DATE   AVAILABLE   AGEgateway   1/1     1            1           21horder     1/1     1            1           36m"><div></div></button></div></figure></div>
<h3 id="46ä½¿ç”¨è„šæœ¬éƒ¨ç½²productå•†å“æœåŠ¡">4.6.ä½¿ç”¨è„šæœ¬éƒ¨ç½²Productå•†å“æœåŠ¡</h3>
<h4 id="461ç¼–å†™èµ„æºéƒ¨ç½²yamlæ–‡ä»¶">4.6.1.ç¼–å†™èµ„æºéƒ¨ç½²YAMLæ–‡ä»¶</h4>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># vim product-deploy.yaml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">apiVersion</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">apps/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">kind</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Deployment</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">product</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">namespace</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">replicas</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">selector</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">matchLabels</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">project</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">app</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">product</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">template</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">labels</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">project</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">app</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">product</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">imagePullSecrets</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">registry-pull-secret</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">containers</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">product</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">image</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">192.168.20.11/simple-microservice/product-service:v1</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">imagePullPolicy</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Always</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">ports</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">protocol</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">TCP</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">containerPort</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">resources</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">requests</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">cpu</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">0.5</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">memory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">256Mi</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">limits</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">cpu</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">memory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">1Gi</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">readinessProbe</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">tcpSocket</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">port</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">initialDelaySeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">60</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">periodSeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">livenessProbe</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">tcpSocket</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">port</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">initialDelaySeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">60</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">periodSeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="# vim product-deploy.yamlapiVersion: apps/v1kind: Deploymentmetadata:  name: product  namespace: simple-msspec:  replicas: 1  selector:    matchLabels:      project: simple      app: product  template:    metadata:      labels:        project: simple        app: product    spec:      imagePullSecrets:      - name: registry-pull-secret      containers:      - name: product        image: 192.168.20.11/simple-microservice/product-service:v1        imagePullPolicy: Always        ports:          - protocol: TCP            containerPort: 8080        resources:          requests:            cpu: 0.5            memory: 256Mi          limits:            cpu: 1            memory: 1Gi        readinessProbe:          tcpSocket:            port: 8080          initialDelaySeconds: 60          periodSeconds: 10        livenessProbe:          tcpSocket:            port: 8080          initialDelaySeconds: 60          periodSeconds: 10"><div></div></button></div></figure></div>
<h4 id="462åœ¨k8sé›†ç¾¤ä¸­ç†Ÿä¸ç†Ÿproductå•†å“æœåŠ¡">4.6.2.åœ¨K8Sé›†ç¾¤ä¸­ç†Ÿä¸ç†ŸProductå•†å“æœåŠ¡</h4>
<p><strong>1.ä½¿ç”¨è„šæœ¬åœ¨K8Sé›†ç¾¤ä¸­éƒ¨ç½²productæœåŠ¡</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> sh deploy_k8s.sh product-service</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 k8s]\# sh deploy_k8s.sh product-service"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/72e772fd74a1497188734a6e1fd3d28e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>2.æŸ¥çœ‹ç¨‹åºèµ„æºçš„çŠ¶æ€</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.æŸ¥çœ‹podçš„çŠ¶æ€</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get pod -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                       </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">STATUS</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">RESTARTS</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka-1</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d16h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka-2</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d16h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">gateway-8665d5d56-tx2m8</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">74</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">order-6694f4c474-cp5d6</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">69</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">product-77c8bb6847-vbxnr</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">21</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.æŸ¥çœ‹deploymentèµ„æºçš„çŠ¶æ€</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get deploy -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">UP-TO-DATE</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AVAILABLE</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">gateway</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">21</span><span style="--0:#ECC48D;--1:#3C63B3">h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">order</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">72</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">product</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">24</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.æŸ¥çœ‹podçš„çŠ¶æ€[root@binary-k8s-master1 k8s]\# kubectl get pod -n simple-msNAME                       READY   STATUS    RESTARTS   AGEeureka-1                   1/1     Running   3          2d16heureka-2                   1/1     Running   2          2d16hgateway-8665d5d56-tx2m8    1/1     Running   2          74morder-6694f4c474-cp5d6     1/1     Running   4          69mproduct-77c8bb6847-vbxnr   1/1     Running   2          21m2.æŸ¥çœ‹deploymentèµ„æºçš„çŠ¶æ€[root@binary-k8s-master1 k8s]\# kubectl get deploy -n simple-msNAME      READY   UP-TO-DATE   AVAILABLE   AGEgateway   1/1     1            1           21horder     1/1     1            1           72mproduct   1/1     1            1           24m"><div></div></button></div></figure></div>
<h3 id="47ä½¿ç”¨è„šæœ¬éƒ¨ç½²stockåº“å­˜æœåŠ¡">4.7.ä½¿ç”¨è„šæœ¬éƒ¨ç½²Stockåº“å­˜æœåŠ¡</h3>
<h4 id="471ç¼–å†™èµ„æºéƒ¨ç½²yamlæ–‡ä»¶">4.7.1.ç¼–å†™èµ„æºéƒ¨ç½²YAMLæ–‡ä»¶</h4>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># vim product-deploy.yaml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">apiVersion</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">apps/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">kind</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Deployment</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">product</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">namespace</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">replicas</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">selector</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">matchLabels</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">project</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">app</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">product</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">template</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">labels</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">project</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">app</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">product</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">imagePullSecrets</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">registry-pull-secret</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">containers</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">product</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">image</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">192.168.20.11/simple-microservice/product-service:v1</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">imagePullPolicy</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Always</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">ports</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">protocol</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">TCP</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">containerPort</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">resources</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">requests</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">cpu</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">0.5</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">memory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">256Mi</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">limits</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">cpu</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">memory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">1Gi</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">readinessProbe</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">tcpSocket</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">port</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">initialDelaySeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">60</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">periodSeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">livenessProbe</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">tcpSocket</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">port</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">initialDelaySeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">60</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">periodSeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="# vim product-deploy.yamlapiVersion: apps/v1kind: Deploymentmetadata:  name: product  namespace: simple-msspec:  replicas: 1  selector:    matchLabels:      project: simple      app: product  template:    metadata:      labels:        project: simple        app: product    spec:      imagePullSecrets:      - name: registry-pull-secret      containers:      - name: product        image: 192.168.20.11/simple-microservice/product-service:v1        imagePullPolicy: Always        ports:          - protocol: TCP            containerPort: 8080        resources:          requests:            cpu: 0.5            memory: 256Mi          limits:            cpu: 1            memory: 1Gi        readinessProbe:          tcpSocket:            port: 8080          initialDelaySeconds: 60          periodSeconds: 10        livenessProbe:          tcpSocket:            port: 8080          initialDelaySeconds: 60          periodSeconds: 10"><div></div></button></div></figure></div>
<h4 id="472åœ¨k8sé›†ç¾¤ä¸­éƒ¨ç½²stockåº“å­˜æœåŠ¡">4.7.2.åœ¨K8Sé›†ç¾¤ä¸­éƒ¨ç½²Stockåº“å­˜æœåŠ¡</h4>
<p><strong>1.ä½¿ç”¨è„šæœ¬åœ¨K8Sé›†ç¾¤ä¸­éƒ¨ç½²stockæœåŠ¡</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> sh deploy_k8s.sh stock-service</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 k8s]\# sh deploy_k8s.sh stock-service"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/34720b14a59e4d8e97e5d887beff8a9d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>2.æŸ¥çœ‹ç¨‹åºèµ„æºçš„çŠ¶æ€</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.æŸ¥çœ‹podçš„çŠ¶æ€</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get pod -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                       </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">STATUS</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">RESTARTS</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka-0</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d16h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka-1</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d16h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka-2</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d16h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">gateway-8665d5d56-tx2m8</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">112</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">order-6694f4c474-cp5d6</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">107</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">product-77c8bb6847-vbxnr</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">59</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">stock-6cf98bb445-mxf7b</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">30</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.æŸ¥çœ‹deploymentèµ„æºçš„çŠ¶æ€</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get deploy -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">UP-TO-DATE</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AVAILABLE</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">gateway</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">22</span><span style="--0:#ECC48D;--1:#3C63B3">h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">order</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">108</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">product</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">60</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">stock</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">/2</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">31</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.æŸ¥çœ‹podçš„çŠ¶æ€[root@binary-k8s-master1 ~]\# kubectl get pod -n simple-msNAME                       READY   STATUS    RESTARTS   AGEeureka-0                   1/1     Running   5          2d16heureka-1                   1/1     Running   3          2d16heureka-2                   1/1     Running   2          2d16hgateway-8665d5d56-tx2m8    1/1     Running   2          112morder-6694f4c474-cp5d6     1/1     Running   4          107mproduct-77c8bb6847-vbxnr   1/1     Running   2          59mstock-6cf98bb445-mxf7b     1/1     Running   0          30m2.æŸ¥çœ‹deploymentèµ„æºçš„çŠ¶æ€[root@binary-k8s-master1 ~]\# kubectl get deploy -n simple-msNAME      READY   UP-TO-DATE   AVAILABLE   AGEgateway   1/1     1            1           22horder     1/1     1            1           108mproduct   1/1     1            1           60mstock     2/2     2            2           31m"><div></div></button></div></figure></div>
<h3 id="48ä½¿ç”¨è„šæœ¬éƒ¨ç½²portalå‰ç«¯é¦–é¡µ">4.8.ä½¿ç”¨è„šæœ¬éƒ¨ç½²Portalå‰ç«¯é¦–é¡µ</h3>
<h4 id="481ç¼–å†™èµ„æºéƒ¨ç½²yamlæ–‡ä»¶">4.8.1.ç¼–å†™èµ„æºéƒ¨ç½²YAMLæ–‡ä»¶</h4>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># vim portal-deploy.yaml</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">apiVersion</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">extensions/v1beta1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">kind</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Ingress</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">portal</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">namespace</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">rules</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">host</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">portal.jiangxl.com</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">http</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">paths</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">/</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">backend</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">serviceName</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">portal</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">servicePort</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">apiVersion</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">kind</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Service</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">portal</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">namespace</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">ports</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">port</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">portal</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">selector</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">project</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">app</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">portal</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">apiVersion</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">apps/v1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">kind</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Deployment</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">portal</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">namespace</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">replicas</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">selector</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">matchLabels</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">project</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">app</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">portal</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">template</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">metadata</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">labels</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">project</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">simple</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">app</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">portal</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">spec</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">imagePullSecrets</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">registry-pull-secret</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">containers</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">portal</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">image</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">192.168.20.11/simple-microservice/portal-service:v1</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">imagePullPolicy</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">Always</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">ports</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">protocol</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">TCP</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">containerPort</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">resources</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">requests</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">cpu</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">0.5</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">memory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">256Mi</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">limits</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">cpu</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">memory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">1Gi</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">readinessProbe</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">tcpSocket</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">port</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">initialDelaySeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">60</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">periodSeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">livenessProbe</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">tcpSocket</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#111111">port</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">8080</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">initialDelaySeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">60</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">periodSeconds</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="# vim portal-deploy.yamlapiVersion: extensions/v1beta1kind: Ingressmetadata:  name: portal  namespace: simple-msspec:  rules:    - host: portal.jiangxl.com      http:        paths:        - path: /          backend:            serviceName: portal            servicePort: 8080---apiVersion: v1kind: Servicemetadata:  name: portal  namespace: simple-msspec:  ports:  - port: 8080    name: portal  selector:    project: simple    app: portal---apiVersion: apps/v1kind: Deploymentmetadata:  name: portal  namespace: simple-msspec:  replicas: 1  selector:    matchLabels:      project: simple      app: portal  template:    metadata:      labels:        project: simple        app: portal    spec:      imagePullSecrets:      - name: registry-pull-secret      containers:      - name: portal        image: 192.168.20.11/simple-microservice/portal-service:v1        imagePullPolicy: Always        ports:          - protocol: TCP            containerPort: 8080        resources:          requests:            cpu: 0.5            memory: 256Mi          limits:            cpu: 1            memory: 1Gi        readinessProbe:          tcpSocket:            port: 8080          initialDelaySeconds: 60          periodSeconds: 10        livenessProbe:          tcpSocket:            port: 8080          initialDelaySeconds: 60          periodSeconds: 10"><div></div></button></div></figure></div>
<h4 id="482åœ¨k8sé›†ç¾¤ä¸­ç†Ÿä¸ç†Ÿportalå­˜æœåŠ¡">4.8.2.åœ¨K8Sé›†ç¾¤ä¸­ç†Ÿä¸ç†ŸPortalå­˜æœåŠ¡</h4>
<p><strong>1.ä½¿ç”¨è„šæœ¬åœ¨K8Sé›†ç¾¤ä¸­éƒ¨ç½²portalæœåŠ¡</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> sh deploy_k8s.sh portal-service</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 k8s]\# sh deploy_k8s.sh portal-service"><div></div></button></div></figure></div>
<p><img src="https://cdn.agou-ops.cn/others/c452fabffdb24a97b0ec5dbfc8dbe6b5.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>2.æŸ¥çœ‹ç¨‹åºèµ„æºçš„çŠ¶æ€</strong></p>
<p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæ‰€æœ‰çš„simpleç”µå•†å¹³å°çš„å¾®æœåŠ¡ç¨‹åºä»¥åŠå…¨éƒ¨éƒ¨ç½²å®Œæ¯•ã€‚</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">1.æŸ¥çœ‹æ‰€æœ‰å¾®æœåŠ¡çš„ç¨‹åº</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get all -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                           </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">STATUS</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">RESTARTS</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/eureka-0</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d16h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/eureka-1</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d16h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/eureka-2</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d16h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/gateway-8665d5d56-tx2m8</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">117</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/order-6694f4c474-cp5d6</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">112</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/portal-d5d55b784-7kntp</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">m53s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/product-77c8bb6847-vbxnr</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">64</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">pod/stock-6cf98bb445-mxf7b</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">35</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">              </span><span style="--0:#ECC48D;--1:#3C63B3">TYPE</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#ECC48D;--1:#3C63B3">CLUSTER-IP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">EXTERNAL-IP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">PORT</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">S</span><span style="--0:#D6DEEB;--1:#403F53">)    </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">service/eureka</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">ClusterIP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">None</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#F78C6C;--1:#AA0982">8080</span><span style="--0:#ECC48D;--1:#3C63B3">/TCP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d18h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">service/gateway</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">ClusterIP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">10.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.188</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#F78C6C;--1:#AA0982">8080</span><span style="--0:#ECC48D;--1:#3C63B3">/TCP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">22</span><span style="--0:#ECC48D;--1:#3C63B3">h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">service/portal</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">ClusterIP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">10.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.190</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#F78C6C;--1:#AA0982">8080</span><span style="--0:#ECC48D;--1:#3C63B3">/TCP</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">m53s</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                      </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">UP-TO-DATE</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AVAILABLE</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">deployment.apps/gateway</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">22</span><span style="--0:#ECC48D;--1:#3C63B3">h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">deployment.apps/order</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">112</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">deployment.apps/portal</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">m53s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">deployment.apps/product</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">65</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">deployment.apps/stock</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">           </span><span style="--0:#F78C6C;--1:#AA0982">35</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                                 </span><span style="--0:#ECC48D;--1:#3C63B3">DESIRED</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">CURRENT</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">replicaset.apps/gateway-8665d5d56</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#F78C6C;--1:#AA0982">117</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">replicaset.apps/order-6694f4c474</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#F78C6C;--1:#AA0982">112</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">replicaset.apps/portal-d5d55b784</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">m53s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">replicaset.apps/product-77c8bb6847</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#F78C6C;--1:#AA0982">64</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">replicaset.apps/stock-6cf98bb445</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">         </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#F78C6C;--1:#AA0982">35</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                      </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">statefulset.apps/eureka</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#ECC48D;--1:#3C63B3">/3</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d18h</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">2.æŸ¥çœ‹æ‰€æœ‰å¾®æœåŠ¡çš„ingressèµ„æº</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get ingress -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">CLASS</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">HOSTS</span><span style="--0:#D6DEEB;--1:#403F53">                 </span><span style="--0:#ECC48D;--1:#3C63B3">ADDRESS</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3C63B3">PORTS</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">eureka.jiangxl.com</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#F78C6C;--1:#AA0982">10.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.107</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">80</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#ECC48D;--1:#3C63B3">d18h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">gateway</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">gateway.jiangxl.com</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">10.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.107</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">80</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#F78C6C;--1:#AA0982">22</span><span style="--0:#ECC48D;--1:#3C63B3">h</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">portal</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;none></span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">portal.jiangxl.com</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#F78C6C;--1:#AA0982">10.0</span><span style="--0:#ECC48D;--1:#3C63B3">.0.107</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">80</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#ECC48D;--1:#3C63B3">m16s</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="1.æŸ¥çœ‹æ‰€æœ‰å¾®æœåŠ¡çš„ç¨‹åº[root@binary-k8s-master1 k8s]\# kubectl get all -n simple-msNAME                           READY   STATUS    RESTARTS   AGEpod/eureka-0                   1/1     Running   5          2d16hpod/eureka-1                   1/1     Running   3          2d16hpod/eureka-2                   1/1     Running   2          2d16hpod/gateway-8665d5d56-tx2m8    1/1     Running   2          117mpod/order-6694f4c474-cp5d6     1/1     Running   4          112mpod/portal-d5d55b784-7kntp     1/1     Running   0          2m53spod/product-77c8bb6847-vbxnr   1/1     Running   2          64mpod/stock-6cf98bb445-mxf7b     1/1     Running   0          35mNAME              TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)    AGEservice/eureka    ClusterIP   None         <none>        8080/TCP   2d18hservice/gateway   ClusterIP   10.0.0.188   <none>        8080/TCP   22hservice/portal    ClusterIP   10.0.0.190   <none>        8080/TCP   2m53sNAME                      READY   UP-TO-DATE   AVAILABLE   AGEdeployment.apps/gateway   1/1     1            1           22hdeployment.apps/order     1/1     1            1           112mdeployment.apps/portal    1/1     1            1           2m53sdeployment.apps/product   1/1     1            1           65mdeployment.apps/stock     1/1     1            1           35mNAME                                 DESIRED   CURRENT   READY   AGEreplicaset.apps/gateway-8665d5d56    1         1         1       117mreplicaset.apps/order-6694f4c474     1         1         1       112mreplicaset.apps/portal-d5d55b784     1         1         1       2m53sreplicaset.apps/product-77c8bb6847   1         1         1       64mreplicaset.apps/stock-6cf98bb445     1         1         1       35mNAME                      READY   AGEstatefulset.apps/eureka   3/3     2d18h2.æŸ¥çœ‹æ‰€æœ‰å¾®æœåŠ¡çš„ingressèµ„æº[root@binary-k8s-master1 k8s]\# kubectl get ingress -n simple-msNAME      CLASS    HOSTS                 ADDRESS      PORTS   AGEeureka    <none>   eureka.jiangxl.com    10.0.0.107   80      2d18hgateway   <none>   gateway.jiangxl.com   10.0.0.107   80      22hportal    <none>   portal.jiangxl.com    10.0.0.107   80      3m16s"><div></div></button></div></figure></div>
<h3 id="49æŸ¥çœ‹eurekaæ³¨å†Œä¸­å¿ƒä¸­å„ä¸ªå¾®æœåŠ¡çš„ä¿¡æ¯">4.9.æŸ¥çœ‹Eurekaæ³¨å†Œä¸­å¿ƒä¸­å„ä¸ªå¾®æœåŠ¡çš„ä¿¡æ¯</h3>
<p>æ¯ä¸ªå¾®æœåŠ¡ç¨‹åºå‡åœ¨Eurekaæ³¨å†Œä¸­å¿ƒä¸­æ³¨å†Œå®Œæˆã€‚</p>
<p><img src="https://cdn.agou-ops.cn/others/feae01f050a440ed92aa5f948efd875f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="410ä½¿ç”¨simpleå¾®æœåŠ¡ç”µå•†å¹³å°">4.10.ä½¿ç”¨simpleå¾®æœåŠ¡ç”µå•†å¹³å°</h3>
<p>åˆ°4.8æ­¥éª¤ä¹‹åï¼Œæˆ‘ä»¬çš„simpleå¾®æœåŠ¡ç”µå•†å¹³å°å·²ç»å…¨éƒ¨éƒ¨ç½²åœ¨K8Sé›†ç¾¤äº†ï¼Œå¯ä»¥åœ¨æœ¬æœºhostsé‡Œç»‘å®šsimpleå¾®æœåŠ¡çš„åŸŸåï¼Œæ“ä½œç”µå•†å¹³å°ã€‚</p>
<p><img src="https://cdn.agou-ops.cn/others/11d0320836a54e1b96d6e6801bdb9f8b.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è¿™ä¸ªå¾®æœåŠ¡å¹³å°çš„èƒŒæ™¯å›¾å…¶å®æ˜¯äº¬ä¸œçš„ä¸€å¼ å›¾è€Œå·²ï¼Œæ˜¯ä¸å¯ä»¥ç‚¹çš„ã€‚</p>
<p><img src="https://cdn.agou-ops.cn/others/5de80a8717554409af8d9a14b6462e30.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>åªèƒ½åœ¨å•†å“æœåŠ¡ä¸­æŸ¥è¯¢èƒ½è´­ä¹°çš„å•†å“ï¼Œç„¶åè¿›è¡Œè´­ä¹°ï¼Œæœ€ååœ¨è®¢å•æœåŠ¡ä¸­æŸ¥è¯¢ã€‚</p>
<p>æœç´¢å•†å“æ—¶ä¼šè°ƒç”¨productå•†å“å¾®æœåŠ¡ï¼Œä¸‹å•åï¼ŒæŸ¥è¯¢è®¢å•æœåŠ¡æ—¶ä¼šè°ƒç”¨orderè®¢å•æœåŠ¡ã€‚</p>
<p>ç‚¹å‡»æŸ¥è¯¢å•†å“æœåŠ¡ï¼Œæˆ‘ä»¬æ¥ä¸‹å•ä¸€ä¸ªç¾å¥³è§‚å¯Ÿä¸€ä¸‹æ•ˆæœï¼Œä¸‹å•åä¼šæç¤ºä¸‹å•æˆåŠŸã€‚</p>
<p><img src="https://cdn.agou-ops.cn/others/2776324a762543f5a9df8fc3fc0f6e19.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ç‚¹å‡»æŸ¥è¯¢è®¢å•æœåŠ¡å°±å¯ä»¥çœ‹åˆ°æˆ‘å—ä¸‹çš„è®¢å•äº†</p>
<p><img src="https://cdn.agou-ops.cn/others/91eee91044a3497986b5f0f788a95738.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="5åŸºäºk8sé›†ç¾¤çš„å¾®æœåŠ¡çš„æ‰©å®¹ä¸å‡çº§">5.åŸºäºK8Sé›†ç¾¤çš„å¾®æœåŠ¡çš„æ‰©å®¹ä¸å‡çº§</h2>
<h3 id="51å¾®æœåŠ¡çš„æ‰©å®¹">5.1.å¾®æœåŠ¡çš„æ‰©å®¹</h3>
<p>å¾®æœåŠ¡åœ¨ç‰©ç†æœºç¯å¢ƒè¿è¡Œæ—¶ï¼Œç½‘ç«™å¹¶å‘é‡é«˜çš„æƒ…å†µä¸‹ï¼Œæ‰©å®¹åªèƒ½å»è´­ä¹°äº‘æœåŠ¡å™¨ï¼Œç„¶åæ­å»ºä¸€å¥—ä¸€æ¨¡ä¸€æ ·çš„æœåŠ¡ï¼Œæ‰‹åŠ¨ç»„æˆè´Ÿè½½å‡è¡¡é›†ç¾¤ï¼Œå¢åŠ ä¸€å°å…¶å®è¿˜å¥½ï¼Œå¦‚æœè¦å¢åŠ å‡ åå°ï¼Œå¤ªè´¹äººå·¥æˆæœ¬äº†ã€‚</p>
<p>å½“å¾®æœåŠ¡è¿ç§»åˆ°K8Sé›†ç¾¤ä¹‹åï¼Œæ‰©å®¹å…¶å®å˜å¾—éå¸¸ç®€å•ï¼Œåªéœ€è¦å¢åŠ ç¨‹åºPodçš„å‰¯æœ¬æ•°å°±å¯ä»¥å®Œæˆç¨‹åºçš„æ‰©å®¹ã€‚</p>
<p>å‘½ä»¤å¦‚ä¸‹ï¼Œä»¥æ‰©å±•orderå•†å“å¾®æœåŠ¡ä¸ºä¾‹ã€‚</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">å°†orderå•†å“æœåŠ¡çš„å‰¯æœ¬æ•°è°ƒæ•´ä¸º3ä¸ªï¼ŒåŸæœ¬æ˜¯1ä¸ªï¼Œç°åœ¨æ‰©å®¹åˆ°3ä¸ª</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl scale deploy order --replicas=3 -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">deployment.apps/order</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">scaled</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">å¯ä»¥çœ‹åˆ°orderè®¢å•æœåŠ¡ç›®å‰å·²ç»æœ‰3ä¸ªpodå‰¯æœ¬äº†</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get pod -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                       </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">STATUS</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">RESTARTS</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka-0</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">6</span><span style="--0:#ECC48D;--1:#3C63B3">m15s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka-1</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">7</span><span style="--0:#ECC48D;--1:#3C63B3">m59s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka-2</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">9</span><span style="--0:#ECC48D;--1:#3C63B3">m40s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">gateway-848874fc9d-pwp9w</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">48</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">order-6694f4c474-cp5d6</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#ECC48D;--1:#3C63B3">h29m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">order-6694f4c474-kh8hm</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">96</span><span style="--0:#ECC48D;--1:#3C63B3">s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">order-6694f4c474-rg7kw</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">96</span><span style="--0:#ECC48D;--1:#3C63B3">s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">portal-6fdcd765bd-mtq68</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">24</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">product-784d9f77b5-rxsf2</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">64</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">stock-6cf98bb445-l8gxb</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">133</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">ç¼©å®¹ä¹Ÿå¾ˆç®€å•ï¼Œå°†orderçš„å‰¯æœ¬æ•°ç¼©å‡æˆ1ä¸ª</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl scale deploy order --replicas=1 -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">deployment.apps/order</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">scaled</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">æˆåŠŸç¼©å‡åˆ°1ä¸ªå‰¯æœ¬</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 </span><span style="--0:#7FDBCA;--1:#097174">~</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl get pod -n simple-ms</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">NAME</span><span style="--0:#D6DEEB;--1:#403F53">                       </span><span style="--0:#ECC48D;--1:#3C63B3">READY</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">STATUS</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#ECC48D;--1:#3C63B3">RESTARTS</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3C63B3">AGE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka-0</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">9</span><span style="--0:#ECC48D;--1:#3C63B3">m24s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka-1</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">11</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">eureka-2</span><span style="--0:#D6DEEB;--1:#403F53">                   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">12</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">gateway-848874fc9d-pwp9w</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">51</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">order-6694f4c474-rg7kw</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#ECC48D;--1:#3C63B3">m45s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">portal-6fdcd765bd-mtq68</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">27</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">product-784d9f77b5-rxsf2</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">67</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">stock-6cf98bb445-l8gxb</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#ECC48D;--1:#3C63B3">/1</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3C63B3">Running</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#F78C6C;--1:#AA0982">136</span><span style="--0:#ECC48D;--1:#3C63B3">m</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="å°†orderå•†å“æœåŠ¡çš„å‰¯æœ¬æ•°è°ƒæ•´ä¸º3ä¸ªï¼ŒåŸæœ¬æ˜¯1ä¸ªï¼Œç°åœ¨æ‰©å®¹åˆ°3ä¸ª[root@binary-k8s-master1 k8s]\# kubectl scale deploy order --replicas=3 -n simple-msdeployment.apps/order scaledå¯ä»¥çœ‹åˆ°orderè®¢å•æœåŠ¡ç›®å‰å·²ç»æœ‰3ä¸ªpodå‰¯æœ¬äº†[root@binary-k8s-master1 ~]\# kubectl get pod -n simple-msNAME                       READY   STATUS    RESTARTS   AGEeureka-0                   1/1     Running   1          6m15seureka-1                   1/1     Running   0          7m59seureka-2                   1/1     Running   1          9m40sgateway-848874fc9d-pwp9w   1/1     Running   0          48morder-6694f4c474-cp5d6     1/1     Running   4          3h29morder-6694f4c474-kh8hm     1/1     Running   0          96sorder-6694f4c474-rg7kw     1/1     Running   0          96sportal-6fdcd765bd-mtq68    1/1     Running   1          24mproduct-784d9f77b5-rxsf2   1/1     Running   0          64mstock-6cf98bb445-l8gxb     1/1     Running   0          133mç¼©å®¹ä¹Ÿå¾ˆç®€å•ï¼Œå°†orderçš„å‰¯æœ¬æ•°ç¼©å‡æˆ1ä¸ª[root@binary-k8s-master1 k8s]\# kubectl scale deploy order --replicas=1 -n simple-msdeployment.apps/order scaledæˆåŠŸç¼©å‡åˆ°1ä¸ªå‰¯æœ¬[root@binary-k8s-master1 ~]\# kubectl get pod -n simple-msNAME                       READY   STATUS    RESTARTS   AGEeureka-0                   1/1     Running   1          9m24seureka-1                   1/1     Running   0          11meureka-2                   1/1     Running   1          12mgateway-848874fc9d-pwp9w   1/1     Running   0          51morder-6694f4c474-rg7kw     1/1     Running   0          4m45sportal-6fdcd765bd-mtq68    1/1     Running   1          27mproduct-784d9f77b5-rxsf2   1/1     Running   0          67mstock-6cf98bb445-l8gxb     1/1     Running   0          136m"><div></div></button></div></figure></div>
<h3 id="52å¾®æœåŠ¡çš„å‡çº§">5.2.å¾®æœåŠ¡çš„å‡çº§</h3>
<p>å¾®æœåŠ¡åœ¨ç‰©ç†æœºç¯å¢ƒæ›´æ–°æ—¶åªéœ€è¦æ‹‰å–æœ€æ–°çš„ä»£ç ï¼Œç¼–è¯‘æˆjaråŒ…ï¼Œåœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²å°±å¯ä»¥äº†ï¼Œä½†æ˜¯å¾®æœåŠ¡è¿ç§»åˆ°K8Sé›†ç¾¤ä¹‹åï¼Œæ›´æ–°è¿‡ç¨‹å°±å˜å¾—æ¯”è¾ƒå¤æ‚äº†ï¼Œé¦–å…ˆæ›´æ–°çš„ä»£ç ï¼Œç„¶åç¼–è¯‘æˆjaråŒ…ï¼Œå†é€šè¿‡Dockerfileå°†jaråŒ…åšæˆdockeré•œåƒï¼Œç„¶ååœ¨k8sé›†ç¾¤ä¸­éƒ¨ç½²ï¼Œå½“ç„¶è¿™äº›æµç¨‹å¯ä»¥é€šè¿‡Jenkinså®ç°è‡ªåŠ¨åŒ–ä¸Šçº¿ã€‚</p>
<h4 id="521å¾®è°ƒportalå‰ç«¯é¦–é¡µçš„ä»£ç ">5.2.1.å¾®è°ƒPortalå‰ç«¯é¦–é¡µçš„ä»£ç </h4>
<p>å°†å¹³å°çš„è¿™äº›æ–‡ä»¶ä¿®æ”¹æˆjiangxl.comçš„å†…å®¹å®Œæˆä¸€æ¬¡portalå‰ç«¯é¦–é¡µçš„å‡çº§</p>
<p><img src="https://cdn.agou-ops.cn/others/6fff8cf3680744d9bd8f4340015acf60.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>é¦–å…ˆæ‰¾åˆ°è®°å½•è¿™äº›æ–‡å­—çš„æ–‡ä»¶</p>
<p><img src="https://cdn.agou-ops.cn/others/c8b660cdf01f4e92aed03aa0005f48a4.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># vim templates/index.ftl</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># vim templates/orderList.ftl</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># vim templates/productList.ftl</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">è¿›å…¥æ–‡ä»¶ååœ¨æœ«è¡Œæ¨¡å¼è¾“å…¥ï¼š</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">%s/å®¹å™¨å­¦é™¢</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">www.ctnrs.com/jiangxl.com/g</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">%s/www.ctnrs.com/jiangxl.com/g</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">ç„¶åå°†æ‰€æœ‰çš„å®¹å™¨å­¦é™¢çš„æ–‡å­—åˆ é™¤</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="è¿›å…¥æ–‡ä»¶ååœ¨æœ«è¡Œæ¨¡å¼è¾“å…¥ï¼š%s/å®¹å™¨å­¦é™¢ www.ctnrs.com/jiangxl.com/g%s/www.ctnrs.com/jiangxl.com/gç„¶åå°†æ‰€æœ‰çš„å®¹å™¨å­¦é™¢çš„æ–‡å­—åˆ é™¤"><div></div></button></div></figure></div>
<h4 id="522ç¼–è¯‘æœ€æ–°ä»£ç ">5.2.2.ç¼–è¯‘æœ€æ–°ä»£ç </h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 simple-microservice-dev1]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> mvn clean package -D maven.test.skip=true -P prod</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 simple-microservice-dev1]\# mvn clean package -D maven.test.skip=true -P prod"><div></div></button></div></figure></div>
<h4 id="523é€šè¿‡è„šæœ¬å°†protalæœ€æ–°ä»£ç æ‰“åŒ…æˆé•œåƒ">5.2.3.é€šè¿‡è„šæœ¬å°†Protalæœ€æ–°ä»£ç æ‰“åŒ…æˆé•œåƒ</h4>
<p>ç›´æ¥ä½¿ç”¨å‰é¢éƒ¨ç½²ç¨‹åºçš„è„šæœ¬å³å¯</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> sh deploy_k8s.sh portal-service</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 k8s]\# sh deploy_k8s.sh portal-service"><div></div></button></div></figure></div>
<h4 id="524å‡çº§k8sé›†ç¾¤ä¸­çš„protalå¾®æœåŠ¡">5.2.4.å‡çº§K8Sé›†ç¾¤ä¸­çš„Protalå¾®æœåŠ¡</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[root@binary-k8s-master1 k8s]</span><span style="--0:#F78C6C;--1:#AA0982">\#</span><span style="--0:#D6DEEB;--1:#403F53"> kubectl -n simple-ms set image deployment portal portal=192.168.20.11/simple-microservice/portal-service:v1 --record</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@binary-k8s-master1 k8s]\# kubectl -n simple-ms set image deployment portal portal=192.168.20.11/simple-microservice/portal-service:v1 --record"><div></div></button></div></figure></div>
<p>ç¨‹åºæ›´æ–°å®Œæˆååˆ·æ–°é¡µé¢å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ›´æ–°çš„é¡µé¢å†…å®¹</p>
<p><img src="https://cdn.agou-ops.cn/others/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASmlhbmd4bH4=,size_20,color_FFFFFF,t_70,g_se,x_16.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> </div> <footer class="astro-3yyafb3n"> <div class="meta sl-flex astro-3yyafb3n">   </div> <div class="pagination-links astro-u2l5gyhi" dir="ltr"> <a href="/cloudnative/k8s/å®æˆ˜æ¡ˆä¾‹/rbac-å®æˆ˜æ¡ˆä¾‹/" rel="prev" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg>  <span class="astro-u2l5gyhi"> Previous <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">RBAC å®æˆ˜æ¡ˆä¾‹</span> </span> </a> <a href="/cloudnative/k8s/å®æˆ˜æ¡ˆä¾‹/ä½¿ç”¨csr-apiåˆ›å»ºç”¨æˆ·/" rel="next" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg>  <span class="astro-u2l5gyhi"> Next <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">ä½¿ç”¨CSR APIåˆ›å»ºç”¨æˆ·</span> </span> </a> </div>  </footer>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>